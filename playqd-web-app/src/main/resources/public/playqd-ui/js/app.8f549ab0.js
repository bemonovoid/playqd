(function(t){function e(e){for(var i,o,n=e[0],l=e[1],u=e[2],d=0,m=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(m.length)m.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/playqd/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var u=0;u<n.length;u++)e(n[u]);var c=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"3ff1":function(t,e,a){"use strict";a("e5f3")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return qt}));var i=a("2b0e"),s=a("f309"),r=a("8c4f"),o=a("bc3a"),n=a.n(o),l=a("2106"),u=a.n(l),c=(a("5363"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"grey lighten-4"},[a("NavToolbarView"),a("v-main",[a("v-container",[a("Audio"),a("v-row",{staticClass:"pt-15"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("router-view")],1)],1)],1)],1),a("MiniPlayerView")],1)}),d=[],m=a("2f62");const p=n.a.create({baseURL:"/playqd/api"});function h(t){for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[a],t[a]=i}}i["a"].use(m["a"]);var v=new m["a"].Store({state:{audio:{isPlaying:!1,volume:.5,currentTime:0,currentTimeAsInt:0,duration:0},artists:[],playlist:{id:null,shuffle:!1,loopAll:!1,loopCurrent:!1,currentSong:null,songs:[]}},getters:{getArtists:t=>t.artists,getArtWorkBaseUrl:t=>p.defaults.baseURL+"/artwork/open/",getCurrentSongArtworkSrc:(t,e)=>t.playlist.currentSong?e.getArtWorkBaseUrl+"?albumId="+t.playlist.currentSong.album.id:null,hasNextSong:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];return e.idx+1<t.playlist.songs.length},hasPrevSong:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];return e.idx-1>=0},getCurrentSongDurationInMinutesAndSeconds:t=>{let e=t.audio.duration;return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},audioIsPlaying:t=>t.audio.isPlaying},mutations:{setAudioCurrentTime:(t,e)=>{t.audio.currentTime=e,t.audio.currentTimeAsInt=parseInt(e,10)},setAudioProperties:(t,e)=>{t.audio.paused=e.paused,t.audio.volume=e.volume,t.audio.currentTime=e.currentTime,t.audio.currentTimeAsInt=parseInt(e.currentTime,10),t.audio.duration=e.duration},setArtists:(t,e)=>{t.artists=e},setPlaylist:(t,e)=>{t.playlist.id=e.playlistId,t.playlist.shuffle=e.shuffle;let a=Array.from(e.songs);t.playlist.shuffle?(h(a),t.playlist.currentSong=a[0]):t.playlist.currentSong=a.filter((t,a)=>t.id===e.startFromSongId)[0],t.playlist.songs=a},setCurrentSongToId:(t,e)=>{t.playlist.currentSong=t.playlist.songs.filter(t=>t.id===e)[0]},setCurrentSongToPrev:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];t.playlist.currentSong=t.playlist.songs[e.idx-1]},setCurrentSongToNext:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];t.playlist.currentSong=t.playlist.songs[e.idx+1]},setAudioIsPlaying:(t,e)=>{t.audio.isPlaying=e},setAudioVolume:(t,e)=>{t.audio.volume=e}}}),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("audio",{attrs:{id:"audio-player",autoplay:""},on:{loadedmetadata:function(e){return t.updateAudioMetadata()},timeupdate:function(e){return t.timeUpdate()},ended:function(e){return t.playNext()},play:function(e){return t.notifyIsPlaying()},pause:function(e){return t.notifyIsPaused()}}},[a("source",{attrs:{id:"audio-player-source",src:""}})])])},f=[],g={name:"Audio",mounted(){this.audioDOMElement=document.getElementById("audio-player"),this.audioSourceDOMElement=document.getElementById("audio-player-source"),this.audioDOMElement.volume=.5},created(){qt.$on("player-set-on-pause",()=>{this.pause()}),qt.$on("player-load",()=>{this.load()}),qt.$on("player-play",()=>{this.play()}),qt.$on("toolbar-player-current-time-changed",t=>{this.$store.commit("setAudioCurrentTime",t),this.audioDOMElement.currentTime=t}),qt.$on("toolbar-player-current-volume-changed",t=>{this.$store.commit("setAudioVolume",t),this.audioDOMElement.volume=t})},methods:{load(){let t=this.$store.state.playlist.currentSong.id,e=p.defaults.baseURL+"/audio/open/?songId="+t;this.audioSourceDOMElement.src=e,this.audioDOMElement.load()},play(){this.audioDOMElement.play()},notifyIsPlaying(){this.$store.commit("setAudioIsPlaying",!0)},pause(){this.audioDOMElement.pause()},notifyIsPaused(){this.$store.commit("setAudioIsPlaying",!1),qt.$emit("audio-play-paused")},playNext(){this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),qt.$emit("player-load"))},timeUpdate(){this.$store.commit("setAudioCurrentTime",this.audioDOMElement.currentTime)},updateAudioMetadata(){this.$store.commit("setAudioProperties",this.getMetadata())},getMetadata(){return{paused:this.audioDOMElement.paused,volume:this.audioDOMElement.volume,currentTime:this.audioDOMElement.currentTime,duration:parseInt(this.audioDOMElement.duration,10)}}}},y=g,S=a("2877"),w=Object(S["a"])(y,b,f,!1,null,null,null),x=w.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{dense:"",color:"blue lighten-2",fixed:"",flat:"",elevation:"0"}},["LibraryView"!==this.$route.name?a("v-toolbar-title",[a("v-btn",{staticClass:"text-capitalize text-subtitle-1",attrs:{depressed:"",plain:"",to:t.toolBarParams.routeParams}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),a("span",[t._v(t._s(this.toolBarParams.title))])],1)],1):t._e(),a("v-spacer"),"AlbumsView"===this.$route.name?a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,167339318)},[a("v-list",{attrs:{dense:"",align:"left"}},[a("v-subheader",[t._v("Sort albums")]),t._l(t.albumSortData,(function(e){return a("v-list-item",{on:{click:function(a){return t.sortAlbums(e.id)}}},[a("v-list-item-title",[t._v(t._s(e.name))])],1)}))],2)],1):t._e(),"SongsView"===this.$route.name?a("v-bottom-sheet",{attrs:{inset:"",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3622910166),model:{value:t.bottomSheet.enable,callback:function(e){t.$set(t.bottomSheet,"enable",e)},expression:"bottomSheet.enable"}},[a("v-sheet",{staticClass:"text-center"},[a("v-card",{attrs:{elevation:"1"}},[a("v-toolbar",{attrs:{light:"",elevation:"0"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.bottomSheet.album.artworkSrc}})],1),a("v-toolbar-title",[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.bottomSheet.album.artistName)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate"},[a("small",[t._v(t._s(this.bottomSheet.album.name))])])]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.bottomSheet.enable=!t.bottomSheet.enable}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("v-list",{attrs:{subheader:""}},[this.bottomSheet.album.artworkUnknown?a("v-list-item",{attrs:{align:"left"},on:{click:function(e){return t.resolveArtworkOnline()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Resolve artwork online")]),a("v-list-item-subtitle",{staticClass:"text-wrap"},[t._v("Set the content filtering level to restrict appts that can be downloaded")])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-information")])],1)],1)],1):t._e(),a("v-list-item",[a("v-list-item-content",[t._v("Play next")])],1),a("v-list-item",[a("v-list-item-content",[t._v("Play prev")])],1)],1)],1)],1)],1):t._e()],1)},V=[],A={name:"NavToolbarView",components:{},data(){return{albumSortData:[{id:"by-title",name:"Title"},{id:"by-newest",name:"Newest First"},{id:"by-oldest",name:"Oldest First"}],bottomSheet:{enable:!1,album:{id:-1,name:"",artistName:"",artworkUnknown:!0,artworkSrc:""}},toolBarParams:{title:"",routeParams:{}}}},created(){qt.$on("toolbar-back-route-changed",t=>{this.toolBarParams=t.toolBarParams,t.album&&(this.bottomSheet.album={id:t.album.id,name:t.album.name,artistName:t.album.artist.name,artworkUnknown:"UNKNOWN"===t.album.artworkStatus,artworkSrc:this.$store.getters.getArtWorkBaseUrl+"?albumId="+t.album.id})})},methods:{sortAlbums(t){qt.$emit("sort-albums",t)},resolveArtworkOnline(){this.bottomSheet.album.artworkUnknown&&p.get("/artwork/search/?albumId="+this.bottomSheet.album.id).then(t=>{this.bottomSheet.album.artworkSrc=t.data.url}).catch(t=>{alert("Failed to resolve artwork")})}}},C=A,I=a("6544"),$=a.n(I),k=a("40dc"),T=a("288c"),P=a("8336"),M=a("b0af"),O=a("ce7e"),L=a("132d"),E=a("adda"),F=a("8860"),N=a("da13"),B=a("1800"),D=a("5d23"),j=a("e449"),U=a("8dd9"),R=a("2fa4"),W=a("e0c7"),z=a("71d9"),G=a("2a7f"),q=Object(S["a"])(C,_,V,!1,null,null,null),H=q.exports;$()(q,{VAppBar:k["a"],VBottomSheet:T["a"],VBtn:P["a"],VCard:M["a"],VDivider:O["a"],VIcon:L["a"],VImg:E["a"],VList:F["a"],VListItem:N["a"],VListItemAction:B["a"],VListItemContent:D["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VMenu:j["a"],VSheet:U["a"],VSpacer:R["a"],VSubheader:W["a"],VToolbar:z["a"],VToolbarTitle:G["b"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.$store.state.playlist.currentSong?a("v-app-bar",{attrs:{fixed:"",bottom:"",flat:"",color:"grey lighten-3"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.$store.getters.getCurrentSongArtworkSrc}})],1),a("v-toolbar-title",{staticClass:"hidden-md-and-up"},[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.$store.state.playlist.currentSong.name)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate text--disabled"},[a("small",[t._v(t._s(this.$store.state.playlist.currentSong.artist.name))])])]),a("v-toolbar-title",{staticClass:"hidden-sm-and-down text-left px-5 pt-2",staticStyle:{width:"90%"}},[a("div",{staticClass:"body-2 px-2 text--disabled"},[t._v(" "+t._s(this.$store.state.playlist.currentSong.artist.name+" - "+this.$store.state.playlist.currentSong.name)+" ")]),a("div",[a("v-slider",{staticClass:"toolbar-player-slider",attrs:{"inverse-label":"","thumb-color":"black","track-color":"grey","track-fill-color":"black","persistent-hint":"",min:"0","tick-size":"1",step:"0.001",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",{staticClass:"caption text--secondary"},[t._v(" "+t._s(t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.currentTimeAsInt)+" / "+t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration))+" ")])]},proxy:!0}],null,!1,2227118777),model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)]),a("v-spacer"),a("v-toolbar-items",{staticClass:"pl-5",attrs:{align:"right"}},[a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playPrev()}}},[a("v-icon",[t._v("mdi-rewind")])],1),this.$store.state.audio.isPlaying?a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.pause()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-pause")])],1):a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.play()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-play")])],1),a("v-btn",{staticClass:"px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playNext()}}},[a("v-icon",[t._v("mdi-fast-forward")])],1),a("v-spacer"),a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"","x-small":""}},[a("v-icon",{attrs:{color:t.$store.state.playlist.shuffle?"red":"grey darken-1"}},[t._v("mdi-shuffle-variant")])],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:"","x-small":""}},[a("v-icon",[t._v("mdi-repeat")])],1),a("v-spacer"),a("v-menu",{attrs:{top:"","close-on-content-click":!1,"offset-y":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"hidden-sm-and-down",attrs:{icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:t.volumeIcon.color}},[t._v(t._s(t.volumeIcon.name))])],1)]}}],null,!1,3339467886)},[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-slider",{attrs:{vertical:"",min:"0.0",max:"1.0",step:"0.01"},on:{change:function(e){return t.changeAudioCurrentVolume()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{on:{click:function(e){return t.mute()}}},[t._v("mdi-volume-mute")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",[t._v("mdi-volume-high")])]},proxy:!0}],null,!1,2181639092),model:{value:t.slider.audioVolume=t.$store.state.audio.volume,callback:function(e){t.$set(t.slider.audioVolume=t.$store.state.audio,"volume",e)},expression:"slider.audioVolume = $store.state.audio.volume"}})],1)],1)],1)],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:""}},[a("v-icon",[t._v("mdi-heart")])],1)],1)],1):t._e()},K=[],Q={name:"MiniPlayerView",components:{},data(){return{volumeIcon:{color:"grey darken-1",name:"mdi-volume-high"},slider:{audioTime:0,audioVolume:.5}}},methods:{play(){qt.$emit("player-play")},playNext(){this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),qt.$emit("player-load"))},playPrev(){this.$store.getters.hasPrevSong&&(this.$store.commit("setCurrentSongToPrev"),qt.$emit("player-load"))},pause(){qt.$emit("player-set-on-pause")},mute(){this.slider.audioVolume=0,this.volumeIcon.color="red",this.volumeIcon.name="mdi-volume-off",this.changeAudioCurrentVolume()},convertSecondsToMinutesAndSeconds(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)},changeAudioCurrentTime(){qt.$emit("toolbar-player-current-time-changed",this.slider.audioTime)},changeAudioCurrentVolume(){this.slider.audioVolume>0&&(this.volumeIcon.color="grey darken-1",this.volumeIcon.name="mdi-volume-high"),qt.$emit("toolbar-player-current-volume-changed",this.slider.audioVolume)}}},X=Q,Y=(a("8207"),a("ba0d")),Z=Object(S["a"])(X,J,K,!1,null,null,null),tt=Z.exports;$()(Z,{VAppBar:k["a"],VBtn:P["a"],VIcon:L["a"],VImg:E["a"],VList:F["a"],VListItem:N["a"],VListItemContent:D["a"],VMenu:j["a"],VSlider:Y["a"],VSpacer:R["a"],VToolbarItems:G["a"],VToolbarTitle:G["b"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-list",{attrs:{align:"left"}},[a("v-subheader",[a("h1",[t._v("Library")])]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.items,(function(e,i){return a("v-list-item",{key:i,on:{click:function(e){return t.showItem("artists")}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)})),1)],1)],1)],1)},at=[],it=a("94ed"),st={name:"LibraryView",components:{mdiAccountMusic:it["a"],mdiPlaylistPlay:it["g"],mdiPlaylistMusic:it["f"]},data(){return{items:[{title:"Artists",icon:"mdi-account-music",route:""},{title:"Albums",icon:"mdi-playlist-play",route:""},{title:"Songs",icon:"mdi-playlist-music",route:""}]}},methods:{showItem(t){this.$router.push("/library/"+t)}}},rt=st,ot=a("62ad"),nt=a("1baa"),lt=a("34c3"),ut=a("0fd9"),ct=Object(S["a"])(rt,et,at,!1,null,null,null),dt=ct.exports;$()(ct,{VCol:ot["a"],VIcon:L["a"],VList:F["a"],VListItem:N["a"],VListItemContent:D["a"],VListItemGroup:nt["a"],VListItemIcon:lt["a"],VListItemTitle:D["c"],VRow:ut["a"],VSubheader:W["a"]});var mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-item-group",{attrs:{align:"left"}},[a("label",{staticClass:"text-h6",attrs:{for:"searchArtistsInput"}},[t._v("Artists")]),a("v-text-field",{attrs:{id:"searchArtistsInput",placeholder:"Find in artists","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filterArtists()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){return t.clearInput()}},slot:"append"},[t._v("mdi-close")])],1)],1),a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.artists,(function(e,i){return a("v-list-item",{key:i,on:{click:function(a){return t.onArtistSelected(e.id)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1)],1)],1)],1)],1)},pt=[],ht={name:"ArtistsView",components:{mdiArrowLeft:it["b"],mdiMagnify:it["e"],mdiClose:it["d"]},data(){return{searchFilter:"",artists:[]}},methods:{onArtistSelected(t){this.$router.push({name:"AlbumsView",params:{artistId:t}})},filterArtists(){if(""===this.searchFilter)this.artists=this.$store.getters.getArtists;else{let t=this.searchFilter.toLowerCase();this.artists=this.$store.getters.getArtists.filter(e=>e.name.toLowerCase().includes(t))}},clearInput(){this.searchFilter="",this.filterArtists()}},created(){qt.$emit("toolbar-back-route-changed",{toolBarParams:{title:"Library",routeParams:{name:"LibraryView"}}}),0===this.$store.getters.getArtists.length?p.get("/library/artists/").then(t=>{this.$store.commit("setArtists",t.data.artists),this.artists=this.$store.getters.getArtists}).catch(t=>{alert(t.toString())}):this.artists=this.$store.getters.getArtists}},vt=ht,bt=a("604c"),ft=a("8654"),gt=Object(S["a"])(vt,mt,pt,!1,null,null,null),yt=gt.exports;$()(gt,{VCol:ot["a"],VIcon:L["a"],VItemGroup:bt["b"],VList:F["a"],VListItem:N["a"],VListItemContent:D["a"],VListItemGroup:nt["a"],VListItemTitle:D["c"],VRow:ut["a"],VTextField:ft["a"]});var St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-item-group",{attrs:{align:"left"}},[a("label",{staticClass:"text-h6",attrs:{for:"searchAlbumsInput"}},[t._v(t._s(this.artistName))]),a("v-text-field",{attrs:{id:"searchAlbumsInput",placeholder:"Find album","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filterAlbums()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){return t.clearInput()}},slot:"append"},[t._v("mdi-close")])],1)],1)],1)],1),a("v-row",{staticClass:"justify-space-around"},t._l(t.albums,(function(e){return a("v-col",{key:e.id,attrs:{cols:6,align:"center",md:"auto"}},[a("v-card",{attrs:{"max-width":"200px","max-height":"300px",to:{name:"SongsView",params:{albumId:e.id}}}},[a("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getArtWorkBaseUrl+"?albumId="+e.id,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)"}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,r=i.attrs;return[a("v-card-subtitle",t._g(t._b({staticClass:"py-0 text-left text-truncate text-subtitle-2",domProps:{textContent:t._s(e.name)}},"v-card-subtitle",r,!1),s))]}}],null,!0)},[a("span",[t._v(t._s(e.name))])]),a("v-card-subtitle",{staticClass:"py-0 text-left text-truncate text-caption text--disabled",domProps:{textContent:t._s(e.year)}})],1)],1)})),1)],1)},wt=[],xt={name:"AlbumsView",components:{},data(){return{searchFilter:"",originalAlbums:[],albums:[],artistName:""}},methods:{clearInput(){this.searchFilter="",this.filterAlbums()},filterAlbums(){if(""===this.searchFilter)this.albums=this.originalAlbums;else{let t=this.searchFilter.toLowerCase();this.albums=this.originalAlbums.filter(e=>e.name.toLowerCase().includes(t))}},sortAlbums(t){"by-oldest"===t?this.albums.sort((t,e)=>t.year&&e.year?t.year>e.year?1:t.year<e.year?-1:0:0):"by-newest"===t?this.albums.sort((t,e)=>t.year&&e.year?t.year<e.year?1:t.year>e.year?-1:0:0):"by-title"===t&&this.albums.sort((t,e)=>{let a=t.name,i=e.name;return a.localeCompare(i)})}},created(){let t=this.$route.params.artistId;qt.$emit("toolbar-back-route-changed",{toolBarParams:{title:"Artists",routeParams:{name:"ArtistsView"}}}),p.get("/library/artists/"+t+"/albums").then(t=>{this.originalAlbums=Array.from(t.data.albums),this.albums=t.data.albums,this.sortAlbums("by-newest"),this.artistName=t.data.artist.name}),qt.$on("sort-albums",t=>{this.sortAlbums(t)})}},_t=xt,Vt=a("99d9"),At=a("3a2f"),Ct=Object(S["a"])(_t,St,wt,!1,null,null,null),It=Ct.exports;$()(Ct,{VCard:M["a"],VCardSubtitle:Vt["b"],VCol:ot["a"],VIcon:L["a"],VImg:E["a"],VItemGroup:bt["b"],VRow:ut["a"],VTextField:ft["a"],VTooltip:At["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{align:"center",elevation:"0"}},[a("v-img",{staticClass:"scoped-album-img",attrs:{contain:"",src:this.album.artworkSrc}}),a("v-card-title",{staticClass:"text-center text-body-1",staticStyle:{display:"inherit"}},[t._v(t._s(t.album.name))]),a("v-card-subtitle",{staticClass:"py-3"},[t._v(t._s(t.album.artist.name))]),a("v-card-subtitle",{staticClass:"py-0"},[a("small",[t._v(t._s(t.album.genre?t.album.genre+" - ":"")+" "+t._s(t.album.year?t.album.year:""))])]),a("v-card-actions",{staticStyle:{display:"inherit"}},[a("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbum(t.songs[0].id)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),a("span",{staticClass:"text-capitalize"},[t._v("Play")])],1),a("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbumShuffled()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-shuffle-variant")]),a("span",{staticClass:"text-capitalize"},[t._v("Shuffle")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{"hide-default-header":"","hide-default-footer":"","disable-pagination":"","disable-filtering":"",headers:t.headers,items:t.songs,"mobile-breakpoint":"300","item-key":"orderId"},on:{"click:row":t.playSong},scopedSlots:t._u([{key:"item.orderId",fn:function(e){var i=e.item,s=e.index;return[t.isPlayingSongRow(i.id)?a("div",[a("v-icon",{attrs:{color:"blue lighten-2"}},[t._v("mdi-arrow-right-drop-circle-outline")])],1):a("div",{staticClass:"text--disabled",staticStyle:{"min-width":"25px"}},[t._v(" "+t._s(s+1)+" ")])]}},{key:"item.duration",fn:function(e){var i=e.item;return[t.isPlayingSongRow(i.id)?a("div",{staticClass:"subtitle-2 text-no-wrap"},[t._v(" - "+t._s(t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")]):a("div",{staticClass:"body-2"},[t._v(" "+t._s(t.convertSecondsToMinutesAndSeconds(i.duration))+" ")])]}}])},[a("template",{slot:"footer"},[a("p",{staticClass:"pr-4 pb-5 text-right text--secondary font-weight-light"},[t._v(t._s(t.album.totalTime))])])],2)],1)],1)],1)},kt=[],Tt={name:"SongsView",components:{mdiArrowRightDropCircleOutline:it["c"]},data(){return{headers:[{align:"center",value:"orderId",cellClass:"pa-0"},{align:"start",value:"name"},{align:"end",value:"duration"}],album:{id:"",name:"",genre:"",year:"",totalTime:"",artist:{id:"",name:""},artworkSrc:""},songs:[],searchingArtwork:!1}},created(){p.get("/library/songs/album/"+this.$route.params.albumId).then(t=>{this.songs=t.data.songs,this.album=t.data.album,this.album.totalTime=this.songs.length+" songs, "+this.album.totalTime,this.album.artworkSrc=this.$store.getters.getArtWorkBaseUrl+"?albumId="+this.album.id,qt.$emit("toolbar-back-route-changed",{album:t.data.album,toolBarParams:{title:t.data.artist.name,routeParams:{name:"AlbumsView",params:{artistId:t.data.artist.id}}}})})},methods:{isPlayingSongRow(t){return!(!this.$store.state.audio.isPlaying||!this.$store.state.playlist.currentSong)&&this.$store.state.playlist.currentSong.id===t},playAlbum(t){this.$store.commit("setPlaylist",{playlistId:this.album.id,shuffle:!1,startFromSongId:t,songs:this.songs}),qt.$emit("player-load")},playAlbumShuffled(){this.$store.commit("setPlaylist",{playlistId:this.album.id,shuffle:!0,songs:this.songs}),qt.$emit("player-load")},playSong(t){null===this.$store.state.playlist.id||this.$store.state.playlist.id!==this.album.id?this.playAlbum(t.id):(this.$store.commit("setCurrentSongToId",t.id),qt.$emit("player-load"))},convertSecondsToMinutesAndSeconds(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)},showAlbumOptions(){this.searchingArtwork=!0,p.get("/artwork/search/?albumId="+this.album.id).then(t=>{this.album.artworkSrc=t.data.url,this.searchingArtwork=!1}).catch(t=>{this.searchingArtwork=!1})}}},Pt=Tt,Mt=(a("3ff1"),a("8fea")),Ot=Object(S["a"])(Pt,$t,kt,!1,null,"1179d1cb",null),Lt=Ot.exports;$()(Ot,{VBtn:P["a"],VCard:M["a"],VCardActions:Vt["a"],VCardSubtitle:Vt["b"],VCardText:Vt["c"],VCardTitle:Vt["d"],VDataTable:Mt["a"],VIcon:L["a"],VImg:E["a"]});class Et{setPageTitle(t){document.title=t||"Playqd"}}const Ft=new Et,Nt=[{path:"/",alias:["/home","/index.html"],name:"Home",component:dt,meta:{title:"Home"}},{path:"/library",name:"LibraryView",component:dt,meta:{title:"Library"}},{path:"/library/artists",name:"ArtistsView",component:yt,meta:{title:"Artists"}},{path:"/library/artists/:artistId",name:"AlbumsView",component:It,meta:{title:"Albums"}},{path:"/library/artists/albums/:albumId",name:"SongsView",component:Lt,meta:{title:"Songs"}}],Bt=new r["a"]({routes:Nt});Bt.afterEach((t,e)=>{i["a"].nextTick(()=>{Ft.setPageTitle(t.meta.title)})});var Dt={name:"App",store:v,router:Bt,components:{Audio:x,NavToolbarView:H,MiniPlayerView:tt,LibraryView:dt,ArtistsView:yt,AlbumsView:It,SongsView:Lt}},jt=Dt,Ut=a("7496"),Rt=a("a523"),Wt=a("f6c4"),zt=Object(S["a"])(jt,c,d,!1,null,null,null),Gt=zt.exports;$()(zt,{VApp:Ut["a"],VCol:ot["a"],VContainer:Rt["a"],VMain:Wt["a"],VRow:ut["a"]});a("a766");i["a"].use(s["a"]),i["a"].use(r["a"]),i["a"].use(u.a,n.a);const qt=new i["a"];new i["a"]({vuetify:new s["a"]({icons:{iconfont:"mdi"}}),render:t=>t(Gt)}).$mount("#app")},8207:function(t,e,a){"use strict";a("abaf")},a766:function(t,e,a){},abaf:function(t,e,a){},e5f3:function(t,e,a){}});
//# sourceMappingURL=app.8f549ab0.js.map