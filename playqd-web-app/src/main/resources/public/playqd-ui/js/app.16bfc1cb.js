(function(t){function e(e){for(var i,n,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},s={app:0},r=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/playqd/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"35d4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return ue}));var i=a("2b0e"),s=a("f309"),r=a("8c4f"),n=a("bc3a"),o=a.n(n),l=a("2106"),c=a.n(l),u=(a("5363"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"grey lighten-4"},[a("NavToolbarView"),a("v-main",[a("v-container",[a("Audio"),a("v-row",{staticClass:"pt-10"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("router-view")],1)],1)],1)],1),a("MiniPlayerView")],1)}),d=[],m=a("2f62");const p=o.a.create({baseURL:"/playqd/api"});function v(t){for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[a],t[a]=i}}i["a"].use(m["a"]);var h=new m["a"].Store({state:{audio:{isPlaying:!1,volume:.5,currentTime:0,currentTimeAsInt:0,duration:0},artists:[],playlist:{id:null,shuffle:!1,loopAll:!1,loopCurrent:!1,currentSong:null,songs:[]}},getters:{getArtists:t=>t.artists,getArtWorkBaseUrl:t=>p.defaults.baseURL+"/artwork/open/",getCurrentSongArtworkSrc:(t,e)=>t.playlist.currentSong?e.getArtWorkBaseUrl+"?albumId="+t.playlist.currentSong.album.id:null,hasNextSong:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];return e.idx+1<t.playlist.songs.length},hasPrevSong:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];return e.idx-1>=0},getCurrentSongDurationInMinutesAndSeconds:t=>{let e=t.audio.duration;return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},audioIsPlaying:t=>t.audio.isPlaying},mutations:{setAudioCurrentTime:(t,e)=>{t.audio.currentTime=e,t.audio.currentTimeAsInt=parseInt(e,10)},setAudioProperties:(t,e)=>{t.audio.paused=e.paused,t.audio.volume=e.volume,t.audio.currentTime=e.currentTime,t.audio.currentTimeAsInt=parseInt(e.currentTime,10),t.audio.duration=e.duration},setArtists:(t,e)=>{t.artists=e},setPlaylist:(t,e)=>{t.playlist.id=e.playlistId,t.playlist.shuffle=e.shuffle;let a=Array.from(e.songs);t.playlist.shuffle?(v(a),t.playlist.currentSong=a[0]):t.playlist.currentSong=a.filter((t,a)=>t.id===e.startFromSongId)[0],t.playlist.songs=a},setCurrentSongToId:(t,e)=>{t.playlist.currentSong=t.playlist.songs.filter(t=>t.id===e)[0]},setCurrentSongToPrev:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];t.playlist.currentSong=t.playlist.songs[e.idx-1]},setCurrentSongToNext:t=>{let e=t.playlist.songs.map((t,e)=>({id:t.id,idx:e})).filter(e=>e.id===t.playlist.currentSong.id)[0];t.playlist.currentSong=t.playlist.songs[e.idx+1]},setAudioIsPlaying:(t,e)=>{t.audio.isPlaying=e},setAudioVolume:(t,e)=>{t.audio.volume=e}}}),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("audio",{attrs:{id:"audio-player",autoplay:""},on:{loadedmetadata:function(e){return t.updateAudioMetadata()},timeupdate:function(e){return t.timeUpdate()},ended:function(e){return t.playNext()},play:function(e){return t.notifyIsPlaying()},pause:function(e){return t.notifyIsPaused()}}},[a("source",{attrs:{id:"audio-player-source",src:""}})])])},g=[],y={name:"Audio",mounted(){this.audioDOMElement=document.getElementById("audio-player"),this.audioSourceDOMElement=document.getElementById("audio-player-source"),this.audioDOMElement.volume=.5},created(){ue.$on("player-set-on-pause",()=>{this.pause()}),ue.$on("player-load",()=>{this.load()}),ue.$on("player-play",()=>{this.play()}),ue.$on("toolbar-player-current-time-changed",t=>{this.$store.commit("setAudioCurrentTime",t),this.audioDOMElement.currentTime=t}),ue.$on("toolbar-player-current-volume-changed",t=>{this.$store.commit("setAudioVolume",t),this.audioDOMElement.volume=t})},methods:{load(){let t=this.$store.state.playlist.currentSong.id,e=p.defaults.baseURL+"/audio/open/?songId="+t;this.audioSourceDOMElement.src=e,this.audioDOMElement.load()},play(){this.audioDOMElement.play()},notifyIsPlaying(){this.$store.commit("setAudioIsPlaying",!0)},pause(){this.audioDOMElement.pause()},notifyIsPaused(){this.$store.commit("setAudioIsPlaying",!1),ue.$emit("audio-play-paused")},playNext(){console.log("ENDED"),ue.$emit("playback-song-ended",this.$store.state.playlist.currentSong.id),this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),ue.$emit("player-load"))},timeUpdate(){this.$store.commit("setAudioCurrentTime",this.audioDOMElement.currentTime)},updateAudioMetadata(){this.$store.commit("setAudioProperties",this.getMetadata())},getMetadata(){return{paused:this.audioDOMElement.paused,volume:this.audioDOMElement.volume,currentTime:this.audioDOMElement.currentTime,duration:parseInt(this.audioDOMElement.duration,10)}}}},f=y,V=a("2877"),w=Object(V["a"])(f,b,g,!1,null,null,null),x=w.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{dense:"",color:"blue-grey lighten-3",fixed:"",flat:"",elevation:"0"}},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.goHome()}}}),a("v-toolbar-title",[t._v("Playqd")]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-account")])],1)],1)},S=[],C={name:"NavToolbarView",components:{},data(){return{}},created(){ue.$on("playback-song-ended",t=>{p.put("/library/history/"+t)})},methods:{goHome(){this.$router.push({name:"Home"})}}},A=C,I=a("6544"),k=a.n(I),$=a("40dc"),T=a("5bc1"),P=a("8336"),L=a("132d"),M=a("2fa4"),O=a("2a7f"),N=Object(V["a"])(A,_,S,!1,null,null,null),E=N.exports;k()(N,{VAppBar:$["a"],VAppBarNavIcon:T["a"],VBtn:P["a"],VIcon:L["a"],VSpacer:M["a"],VToolbarTitle:O["b"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.$store.state.playlist.currentSong?a("v-app-bar",{attrs:{fixed:"",bottom:"",flat:"",color:"grey lighten-3"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.$store.getters.getCurrentSongArtworkSrc}})],1),a("v-toolbar-title",{staticClass:"hidden-md-and-up"},[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.$store.state.playlist.currentSong.name)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate text--disabled"},[a("small",[t._v(t._s(this.$store.state.playlist.currentSong.artist.name))])])]),a("v-toolbar-title",{staticClass:"hidden-sm-and-down text-left px-5",staticStyle:{width:"90%"}},[a("div",{staticClass:"body-2 px-2 ",on:{click:t.openSongsView}},[t._v(" "+t._s(this.$store.state.playlist.currentSong.artist.name+" - "+this.$store.state.playlist.currentSong.name)+" ")]),a("div",[a("v-slider",{staticClass:"toolbar-player-slider",attrs:{dense:"","inverse-label":"","thumb-color":"black","track-color":"grey","track-fill-color":"black",min:"0","tick-size":"1",step:"0.001",messages:" ",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",{staticClass:"caption text--secondary"},[t._v(" "+t._s(t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.currentTimeAsInt)+" / "+t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration))+" ")])]},proxy:!0},{key:"message",fn:function(){return[a("div",{staticClass:"pl-2 pt-0 pb-2"},[t._v(" "+t._s(t.$store.state.playlist.currentSong.fileExtension)+" | "+t._s(t.$store.state.playlist.currentSong.audioBitRate)+" kbps | "+t._s(t.$store.state.playlist.currentSong.audioSampleRate)+" Hz ")])]},proxy:!0}],null,!1,2336233406),model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)]),a("v-spacer"),a("v-toolbar-items",{staticClass:"pl-5",attrs:{align:"right"}},[a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playPrev()}}},[a("v-icon",[t._v("mdi-rewind")])],1),this.$store.state.audio.isPlaying?a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.pause()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-pause")])],1):a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.play()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-play")])],1),a("v-btn",{staticClass:"px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playNext()}}},[a("v-icon",[t._v("mdi-fast-forward")])],1),a("v-spacer"),a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"","x-small":""}},[a("v-icon",{attrs:{color:t.$store.state.playlist.shuffle?"red":"grey darken-1"}},[t._v("mdi-shuffle-variant")])],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:"","x-small":""}},[a("v-icon",[t._v("mdi-repeat")])],1),a("v-spacer"),a("v-menu",{attrs:{top:"","close-on-content-click":!1,"offset-y":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"hidden-sm-and-down",attrs:{icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:t.volumeIcon.color}},[t._v(t._s(t.volumeIcon.name))])],1)]}}],null,!1,3339467886)},[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-slider",{attrs:{vertical:"",min:"0.0",max:"1.0",step:"0.01"},on:{change:function(e){return t.changeAudioCurrentVolume()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{on:{click:function(e){return t.mute()}}},[t._v("mdi-volume-mute")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",[t._v("mdi-volume-high")])]},proxy:!0}],null,!1,2181639092),model:{value:t.slider.audioVolume=t.$store.state.audio.volume,callback:function(e){t.$set(t.slider.audioVolume=t.$store.state.audio,"volume",e)},expression:"slider.audioVolume = $store.state.audio.volume"}})],1)],1)],1)],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:""}},[a("v-icon",[t._v("mdi-heart")])],1)],1)],1):t._e()},D=[],B={name:"MiniPlayerView",components:{},data(){return{volumeIcon:{color:"grey darken-1",name:"mdi-volume-high"},slider:{audioTime:0,audioVolume:.5}}},methods:{play(){ue.$emit("player-play")},playNext(){this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),ue.$emit("player-load"))},playPrev(){this.$store.getters.hasPrevSong&&(this.$store.commit("setCurrentSongToPrev"),ue.$emit("player-load"))},pause(){ue.$emit("player-set-on-pause")},mute(){this.slider.audioVolume=0,this.volumeIcon.color="red",this.volumeIcon.name="mdi-volume-off",this.changeAudioCurrentVolume()},convertSecondsToMinutesAndSeconds(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)},changeAudioCurrentTime(){ue.$emit("toolbar-player-current-time-changed",this.slider.audioTime)},changeAudioCurrentVolume(){this.slider.audioVolume>0&&(this.volumeIcon.color="grey darken-1",this.volumeIcon.name="mdi-volume-high"),ue.$emit("toolbar-player-current-volume-changed",this.slider.audioVolume)},openSongsView(){}}},j=B,q=(a("8207"),a("adda")),R=a("8860"),G=a("da13"),U=a("5d23"),z=a("e449"),H=a("ba0d"),W=Object(V["a"])(j,F,D,!1,null,null,null),J=W.exports;k()(W,{VAppBar:$["a"],VBtn:P["a"],VIcon:L["a"],VImg:q["a"],VList:R["a"],VListItem:G["a"],VListItemContent:U["a"],VMenu:z["a"],VSlider:H["a"],VSpacer:M["a"],VToolbarItems:O["a"],VToolbarTitle:O["b"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{attrs:{align:"left"}},[a("v-subheader",[a("h1",[t._v("Library")])]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.items,(function(e,i){return a("v-list-item",{key:i,on:{click:function(a){return t.showItem(e.viewName)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1),a("v-list-item-action",[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)})),1)],1)],1)],1)},Y=[],Q={name:"LibraryView",components:{},data(){return{items:[{title:"Artists",icon:"mdi-account-music",viewName:"ArtistsView"},{title:"Albums",icon:"mdi-folder-music-outline",viewName:"AlbumsView"},{title:"Songs",icon:"mdi-music-note",viewName:"SongsView"},{title:"Genres",icon:"mdi-guitar-electric",viewName:"GenresView"}]}},methods:{showItem(t){this.$router.push({name:t})}}},X=Q,Z=a("62ad"),tt=a("1800"),et=a("1baa"),at=a("34c3"),it=a("0fd9"),st=a("e0c7"),rt=Object(V["a"])(X,K,Y,!1,null,null,null),nt=rt.exports;k()(rt,{VCol:Z["a"],VIcon:L["a"],VList:R["a"],VListItem:G["a"],VListItemAction:tt["a"],VListItemContent:U["a"],VListItemGroup:et["a"],VListItemIcon:at["a"],VListItemTitle:U["c"],VRow:it["a"],VSubheader:st["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"pl-0 text-left",attrs:{md:"auto"}},[a("v-btn",{staticClass:"text-capitalize text-subtitle-1",attrs:{depressed:"",plain:"",to:{name:"LibraryView"}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),a("span",[t._v("Library")])],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("v-list-item-title",{staticClass:"text-left text--black display-1 pt-1 pb-0 mb-0"},[t._v("Genres")]),t._l(t.genres,(function(e,i){return a("div",[a("v-list-item",{on:{click:function(a){return t.onGenreSelected(e)}}},[a("v-list-item-content",[t._v(t._s(e))])],1),a("v-divider")],1)}))],2)],1)],1)],1)},lt=[],ct={name:"GenresView",data(){return{genres:null}},created(){ue.$emit("toolbar-back-route-changed",{toolBarParams:{title:"Library",routeParams:{name:"LibraryView"}}}),p.get("/library/genres/").then(t=>{this.genres=t.data.genres})},methods:{onGenreSelected(t){this.$router.push({name:"AlbumsView",query:{genre:t}})}}},ut=ct,dt=a("ce7e"),mt=Object(V["a"])(ut,ot,lt,!1,null,null,null),pt=mt.exports;k()(mt,{VBtn:P["a"],VCol:Z["a"],VDivider:dt["a"],VIcon:L["a"],VList:R["a"],VListItem:G["a"],VListItemContent:U["a"],VListItemTitle:U["c"],VRow:it["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"pl-0 text-left",attrs:{md:"auto"}},[a("v-btn",{staticClass:"text-capitalize text-subtitle-1",attrs:{depressed:"",plain:"",to:{name:"LibraryView"}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),a("span",[t._v("Library")])],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("p",{staticClass:"text-left text--black display-1 pt-1 pb-0 mb-0"},[t._v("Artists")]),a("v-item-group",{staticClass:"py-0",attrs:{align:"left"}},[a("v-text-field",{attrs:{placeholder:"Find in artists",clearable:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filterArtists()},"click:clear":function(e){return t.clearInput()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.artists,(function(e,i){return a("v-list-item",{key:i,on:{click:function(a){return t.onArtistSelected(e.id)}}},[a("v-list-item-icon",{staticClass:"ml-0 mr-2"},[a("v-icon",{attrs:{left:""}},[t._v("mdi-account-music")])],1),a("v-list-item-content",{staticClass:"py-0"},[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1)],1)})),1)],1)],1)],1)],1)},ht=[],bt=a("94ed"),gt={name:"ArtistsView",components:{mdiArrowLeft:bt["a"],mdiMagnify:bt["d"],mdiClose:bt["c"]},data(){return{searchFilter:"",artists:[]}},methods:{onArtistSelected(t){this.$router.push({name:"AlbumsView",query:{artistId:t}})},filterArtists(){if(this.searchFilter&&""!==this.searchFilter){let t=this.searchFilter.toLowerCase();this.artists=this.$store.getters.getArtists.filter(e=>e.name.toLowerCase().includes(t))}else this.artists=this.$store.getters.getArtists},clearInput(){this.searchFilter="",this.filterArtists()}},created(){ue.$emit("toolbar-back-route-changed",{toolBarParams:{title:"Library",routeParams:{name:"LibraryView"}}}),0===this.$store.getters.getArtists.length?p.get("/library/artists/").then(t=>{this.$store.commit("setArtists",t.data.artists),this.artists=this.$store.getters.getArtists}).catch(t=>{alert(t.toString())}):this.artists=this.$store.getters.getArtists}},yt=gt,ft=a("604c"),Vt=a("8654"),wt=Object(V["a"])(yt,vt,ht,!1,null,null,null),xt=wt.exports;k()(wt,{VBtn:P["a"],VCol:Z["a"],VIcon:L["a"],VItemGroup:ft["b"],VList:R["a"],VListItem:G["a"],VListItemContent:U["a"],VListItemGroup:et["a"],VListItemIcon:at["a"],VListItemTitle:U["c"],VRow:it["a"],VTextField:Vt["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"pl-0 text-left",attrs:{md:"auto"}},[a("v-btn",{staticClass:"text-capitalize text-subtitle-1",attrs:{depressed:"",plain:"",to:t.backToView}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),a("span",[t._v(t._s(this.listTitle))])],1)],1),a("v-col",{staticClass:"text-right"},[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{fab:"",small:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}])},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Sort albums")]),t._l(t.sorting.types,(function(e){return a("v-list-item",{on:{click:function(a){return t.applyNewSort(e)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),e.active?a("v-list-item-icon",[a("v-icon",{attrs:{right:""}},[t._v("mdi-check")])],1):t._e()],1)}))],2)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-item-group",{attrs:{align:"left"}},[a("v-text-field",{attrs:{placeholder:"Find album","prepend-inner-icon":"mdi-magnify",clearable:""},on:{input:function(e){return t.filterAlbums()},"click:clear":function(e){return t.clearInput()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1)],1)],1),a("v-row",{staticClass:"justify-space-around"},t._l(t.albums,(function(e){return a("v-col",{key:e.id,attrs:{cols:6,align:"center",md:"auto"}},[a("v-card",{attrs:{"max-width":"200px","max-height":"300px",to:{name:"SongsView",params:{albumId:e.id}}}},[a("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getArtWorkBaseUrl+"?albumId="+e.id,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)"}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,r=i.attrs;return[a("v-card-subtitle",t._g(t._b({staticClass:"py-0 text-left text-truncate text-subtitle-2",domProps:{textContent:t._s(e.name)}},"v-card-subtitle",r,!1),s))]}}],null,!0)},[a("span",[t._v(t._s(e.name))])]),a("v-card-subtitle",{staticClass:"py-0 text-left text-truncate text-caption text--disabled",domProps:{textContent:t._s(e.year?e.year:"----")}})],1)],1)})),1),a("v-row",[a("v-col",[t.paginationRequired()?a("div",{staticClass:"text-center"},[a("v-pagination",{staticClass:"pb-15",attrs:{"total-visible":t.pagination.totalVisible,length:t.pagination.length},on:{input:t.showPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()])],1)],1)},St=[];const Ct=12;var At={name:"AlbumsView",components:{},data(){return{sorting:{types:[{id:"by-title",name:"Title",active:!1},{id:"by-newest",name:"Newest First",active:!0},{id:"by-oldest",name:"Oldest First",active:!1}]},pagination:{page:1,totalVisible:7,length:15},searchFilter:"",originalAlbums:[],albums:[],listTitle:"",backToView:{name:"",params:{}}}},methods:{paginationRequired(){return this.originalAlbums.length>Ct},showNextPage(){this.showPage(this.pagination.page)},showPrevPage(){this.showPage(this.pagination.page)},showPage(t){let e=0,a=Ct;t>1&&(e=(t-1)*Ct,a=e+Ct),this.albums=Array.from(this.originalAlbums.slice(e,a))},clearInput(){this.searchFilter="",this.filterAlbums()},filterAlbums(){if(this.searchFilter&&""!==this.searchFilter){let t=this.searchFilter.toLowerCase();this.albums=this.originalAlbums.filter(e=>e.name.toLowerCase().includes(t))}else this.albums=this.originalAlbums},applyNewSort(t){this.sorting.types.forEach(t=>t.active=!1),t.active=!0,this.sortAlbums(this.originalAlbums),this.albums=this.originalAlbums.slice(0,Ct),this.pagination.page=1},sortAlbums(t){let e=this.sorting.types.filter(t=>t.active)[0].id;"by-oldest"===e?t.sort((t,e)=>t.year&&e.year?t.year>e.year?1:t.year<e.year?-1:0:0):"by-newest"===e?t.sort((t,e)=>t.year&&e.year?t.year<e.year?1:t.year>e.year?-1:0:0):"by-title"===e&&t.sort((t,e)=>{let a=t.name,i=e.name;return a.localeCompare(i)})}},created(){let t="";this.$route.query.artistId?(this.backToView={name:"ArtistsView"},t="?artistId="+this.$route.query.artistId):(t="?genre="+this.$route.query.genre,this.backToView={name:"GenresView"},this.sorting.type="by-title"),p.get("/library/albums/"+t).then(t=>{this.originalAlbums=Array.from(t.data.albums),this.sortAlbums(this.originalAlbums),this.albums=this.originalAlbums.slice(0,Ct),this.listTitle=this.$route.query.artistId?"Artists":"Genres",this.pagination.length=Math.ceil(this.originalAlbums.length/Ct)})}},It=At,kt=a("b0af"),$t=a("99d9"),Tt=a("891e"),Pt=a("3a2f"),Lt=Object(V["a"])(It,_t,St,!1,null,null,null),Mt=Lt.exports;k()(Lt,{VBtn:P["a"],VCard:kt["a"],VCardSubtitle:$t["b"],VCol:Z["a"],VIcon:L["a"],VImg:q["a"],VItemGroup:ft["b"],VList:R["a"],VListItem:G["a"],VListItemIcon:at["a"],VListItemTitle:U["c"],VMenu:z["a"],VPagination:Tt["a"],VRow:it["a"],VSubheader:st["a"],VTextField:Vt["a"],VTooltip:Pt["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"pl-0 pt-2 text-left",attrs:{md:"auto"}},[a("v-btn",{staticClass:"text-capitalize text-subtitle-1",attrs:{depressed:"",plain:"",to:t.backToView}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-left")]),a("span",[t._v(t._s(this.album.artist.name))])],1)],1),a("v-col",{staticClass:"pl-0 pt-2 text-right"},[a("v-bottom-sheet",{attrs:{inset:"",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,s=e.on;return[a("v-btn",t._g(t._b({attrs:{icon:"",fab:"",small:""}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}]),model:{value:t.songMenuOptions.enable,callback:function(e){t.$set(t.songMenuOptions,"enable",e)},expression:"songMenuOptions.enable"}},[a("v-sheet",{staticClass:"text-center"},[a("v-card",{attrs:{elevation:"1"}},[a("v-toolbar",{attrs:{color:"grey lighten-3",elevation:"0"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.album.artworkSrc}})],1),a("v-toolbar-title",[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.album.artist.name)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate"},[a("small",[t._v(t._s(this.album.name))])])]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.songMenuOptions.enable=!t.songMenuOptions.enable}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",subheader:""}},[a("v-list-item",{staticClass:"text-left",attrs:{disabled:"UNKNOWN"!==this.album.artworkStatus},on:{click:function(e){return t.resolveArtworkOnline()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Resolve artwork online")]),a("v-list-item-subtitle",{staticClass:"text-wrap"},[t._v("Search for album artist online and try to resolve the artwork")])],1),this.artworkSearchInProgress?a("v-list-item-action",[a("v-progress-circular",{attrs:{size:"20",indeterminate:"",color:"grey"}})],1):a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-image-search-outline")])],1)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[t._v(" Show song title as file name ")]),a("v-list-item-action",[a("v-switch",{attrs:{color:"info","hide-details":""},model:{value:t.showSongNameAsFileName,callback:function(e){t.showSongNameAsFileName=e},expression:"showSongNameAsFileName"}})],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[t._v("Play prev")])],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"px-0"},[a("v-card",{attrs:{align:"center",elevation:"0"}},[a("v-img",{staticClass:"scoped-album-img elevation-5",attrs:{contain:"",src:this.album.artworkSrc}}),a("v-card-title",{staticClass:"text-center text-body-1",staticStyle:{display:"inherit"}},[t._v(t._s(t.album.name))]),a("v-card-subtitle",{staticClass:"py-0"},[t._v(t._s(t.album.artist.name))]),a("v-card-subtitle",{staticClass:"py-0"},[a("small",[t._v(t._s(t.album.genre?t.album.genre+" - ":"")+" "+t._s(t.album.year?t.album.year:""))])]),a("v-card-actions",{staticStyle:{display:"inherit"}},[a("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbum(t.songs[0].id)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),a("span",{staticClass:"text-capitalize"},[t._v("Play")])],1),a("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbumShuffled()}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-shuffle-variant")]),a("span",{staticClass:"text-capitalize"},[t._v("Shuffle")])],1)],1),a("v-card-text",{staticClass:"px-2"},[a("v-data-table",{attrs:{"hide-default-header":"","hide-default-footer":"","disable-pagination":"","disable-filtering":"",headers:t.headers,items:t.songs,"mobile-breakpoint":"300","item-key":"orderId"},on:{"click:row":t.playSong},scopedSlots:t._u([{key:"item.orderId",fn:function(e){var i=e.item,s=e.index;return[t.isPlayingSongRow(i.id)?a("div",[a("v-icon",{attrs:{color:"blue lighten-2"}},[t._v("mdi-arrow-right-drop-circle-outline")])],1):a("div",{staticClass:"text--disabled",staticStyle:{"min-width":"25px"}},[t._v(" "+t._s(s+1)+" ")])]}},{key:"item.name",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.showSongNameAsFileName?a.fileName:a.name)+" ")]}},{key:"item.duration",fn:function(e){var i=e.item;return[t.isPlayingSongRow(i.id)?a("div",{staticClass:"subtitle-2 text-no-wrap"},[t._v(" - "+t._s(t.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")]):a("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.convertSecondsToMinutesAndSeconds(i.duration))+" ")])]}}])},[a("template",{slot:"footer"},[a("p",{staticClass:"pr-4 pb-5 text-right text--secondary font-weight-light"},[t._v(t._s(t.album.totalTime))])])],2)],1)],1)],1)],1)],1)},Nt=[],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",fab:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-square-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit album")])]),a("v-card-text",[a("p",{staticClass:"text-left text-h6"},[t._v("Artist")]),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",label:"Name",required:""},on:{change:t.artistUpdated},model:{value:t.album.artist.name,callback:function(e){t.$set(t.album.artist,"name",e)},expression:"album.artist.name"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",label:"Country code",required:""},on:{change:t.artistUpdated},model:{value:t.album.artist.country,callback:function(e){t.$set(t.album.artist,"country",e)},expression:"album.artist.country"}})],1)],1),a("p",{staticClass:"text-left text-h6"},[t._v("Album")]),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",label:"Name",required:""},model:{value:t.album.name,callback:function(e){t.$set(t.album,"name",e)},expression:"album.name"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{type:"number",dense:"",label:"Year"},model:{value:t.album.year,callback:function(e){t.$set(t.album,"year",e)},expression:"album.year"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.active=!1}}},[t._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.active=!1}}},[t._v(" Save ")])],1)],1)],1)},Ft=[],Dt={name:"SongsViewEditAlbum",props:["albumId"],data(){return{title:"asdsadas",active:!1,album:{id:"",name:"",genre:"",year:"",totalTime:"",artist:{id:"",name:"",country:""},artworkSrc:""}}},created(){p.get("/library/albums/"+this.albumId).then(t=>{this.album=t.data})},methods:{artistUpdated(t){}}},Bt=Dt,jt=a("169a"),qt=Object(V["a"])(Bt,Et,Ft,!1,null,null,null),Rt=qt.exports;k()(qt,{VBtn:P["a"],VCard:kt["a"],VCardActions:$t["a"],VCardText:$t["c"],VCardTitle:$t["d"],VCol:Z["a"],VDialog:jt["a"],VIcon:L["a"],VRow:it["a"],VSpacer:M["a"],VTextField:Vt["a"]});var Gt={name:"SongsView",components:{SongsViewEditAlbum:Rt,mdiArrowRightDropCircleOutline:bt["b"]},data(){return{songMenuOptions:{enable:!1},headers:[{align:"center",value:"orderId",cellClass:"pa-0"},{align:"start",value:"name"},{align:"end",value:"duration"}],album:{id:"",name:"",genre:"",year:"",totalTime:"",artist:{id:"",name:"",country:""},artworkSrc:""},songs:[],showSongNameAsFileName:!1,artworkSearchInProgress:!1,backToView:{name:"AlbumsView",query:{artistId:""}}}},mounted(){p.get("/library/songs/album/"+this.$route.params.albumId).then(t=>{this.songs=t.data.songs,this.album=t.data.album,this.album.totalTime=this.songs.length+" songs, "+this.album.totalTime,this.album.artworkSrc=this.$store.getters.getArtWorkBaseUrl+"?albumId="+this.album.id,this.backToView.query.artistId=this.album.artist.id})},methods:{isPlayingSongRow(t){return!(!this.$store.state.audio.isPlaying||!this.$store.state.playlist.currentSong)&&this.$store.state.playlist.currentSong.id===t},playAlbum(t){this.$store.commit("setPlaylist",{playlistId:this.album.id,shuffle:!1,startFromSongId:t,songs:this.songs}),ue.$emit("player-load")},playAlbumShuffled(){this.$store.commit("setPlaylist",{playlistId:this.album.id,shuffle:!0,songs:this.songs}),ue.$emit("player-load")},playSong(t){null===this.$store.state.playlist.id||this.$store.state.playlist.id!==this.album.id?this.playAlbum(t.id):(this.$store.commit("setCurrentSongToId",t.id),ue.$emit("player-load"))},convertSecondsToMinutesAndSeconds(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)},resolveArtworkOnline(){"UNKNOWN"===this.album.artworkStatus&&(this.artworkSearchInProgress=!0,p.get("/artwork/search/?albumId="+this.album.id).then(t=>{this.artworkSearchInProgress=!1,this.album.artworkSrc=t.data.url}).catch(t=>{alert("Failed to resolve artwork"),this.artworkSearchInProgress=!1}))}}},Ut=Gt,zt=(a("b884"),a("288c")),Ht=a("8fea"),Wt=a("490a"),Jt=a("8dd9"),Kt=a("b73d"),Yt=a("71d9"),Qt=Object(V["a"])(Ut,Ot,Nt,!1,null,"33db3aee",null),Xt=Qt.exports;k()(Qt,{VBottomSheet:zt["a"],VBtn:P["a"],VCard:kt["a"],VCardActions:$t["a"],VCardSubtitle:$t["b"],VCardText:$t["c"],VCardTitle:$t["d"],VCol:Z["a"],VDataTable:Ht["a"],VDivider:dt["a"],VIcon:L["a"],VImg:q["a"],VList:R["a"],VListItem:G["a"],VListItemAction:tt["a"],VListItemContent:U["a"],VListItemSubtitle:U["b"],VListItemTitle:U["c"],VProgressCircular:Wt["a"],VRow:it["a"],VSheet:Jt["a"],VSpacer:M["a"],VSwitch:Kt["a"],VToolbar:Yt["a"],VToolbarTitle:O["b"]});class Zt{setPageTitle(t){document.title=t||"Playqd"}}const te=new Zt,ee=[{path:"/",alias:["/home","/index.html"],name:"Home",component:nt,meta:{title:"Home"}},{path:"/library",name:"LibraryView",component:nt,meta:{title:"Library"}},{path:"/library/artists",name:"ArtistsView",component:xt,meta:{title:"Artists"}},{path:"/library/genres",name:"GenresView",component:pt,meta:{title:"Genres"}},{path:"/library/albums",name:"AlbumsView",component:Mt,props:t=>({artistId:t.query.artistId,genre:t.query.genre}),meta:{title:"Albums"}},{path:"/library/artists/albums/:albumId",name:"SongsView",component:Xt,meta:{title:"Songs"}}],ae=new r["a"]({routes:ee});ae.afterEach((t,e)=>{i["a"].nextTick(()=>{te.setPageTitle(t.meta.title)})});var ie={name:"App",store:h,router:ae,components:{Audio:x,NavToolbarView:E,MiniPlayerView:J,LibraryView:nt,GenresView:pt,ArtistsView:xt,AlbumsView:Mt,SongsView:Xt}},se=ie,re=a("7496"),ne=a("a523"),oe=a("f6c4"),le=Object(V["a"])(se,u,d,!1,null,null,null),ce=le.exports;k()(le,{VApp:re["a"],VCol:Z["a"],VContainer:ne["a"],VMain:oe["a"],VRow:it["a"]});a("a766");i["a"].use(s["a"]),i["a"].use(r["a"]),i["a"].use(c.a,o.a);const ue=new i["a"];new i["a"]({vuetify:new s["a"]({icons:{iconfont:"mdi"}}),render:t=>t(ce)}).$mount("#app")},8207:function(t,e,a){"use strict";a("abaf")},a766:function(t,e,a){},abaf:function(t,e,a){},b884:function(t,e,a){"use strict";a("35d4")}});
//# sourceMappingURL=app.16bfc1cb.js.map