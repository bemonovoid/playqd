(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],m=0,d=[];m<o.length;m++)n=o[m],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/playqd/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1e0b":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return ia}));var s=a("2b0e"),i=a("f309"),r=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{attrs:{align:"left"}},[a("v-subheader",[a("h1",[t._v("Library")])]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.items,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.showItem(e.viewName)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1)})),1)],1)],1)],1)},o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.songs?a("div",[a("v-row",[a("v-col",{staticClass:"py-0 pl-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"display-1"},[t._v("Songs")])],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}],null,!1,4104699283)},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Filter songs")]),t._l(t.sorting.types,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.getSongsFiltered(10,e.id)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-icon",[a("v-icon",{attrs:{right:""}},[t._v(t._s(e.icon))])],1)],1)}))],2)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"}},[t._l(t.songs,(function(e,s){return[a("v-list-item",{key:s,staticClass:"pl-0",attrs:{"three-line":""},on:{click:function(e){return t.playLibrarySongs(s)}}},[a("v-list-item-avatar",{staticClass:"text-left",attrs:{tile:""}},[a("v-img",{attrs:{src:t.$store.state.albumsBaseUrl+e.album.id+"/image"}})],1),a("v-list-item-content",{staticClass:"py-0"},[a("v-list-item-title",{staticClass:"text-body-2"},[t._v(t._s(e.name))]),a("v-list-item-subtitle",[t._v(" "+t._s(e.artist.name)+" ")]),a("v-list-item-subtitle",{staticClass:"text-caption"},[a("i",[t._v("play count: "+t._s(e.playbackHistory?e.playbackHistory.playCount:0)+", last: "+t._s(e.playbackHistory?e.playbackHistory.lastTimePlayed:""))])])],1),a("v-list-item-action",[a("v-list-item-action-text",[a("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(e.duration))+" ")])]),e.favorite?a("v-icon",{attrs:{color:"yellow darken-3"}},[t._v("mdi-star")]):t._e()],1)],1),a("v-divider")]}))],2)],1)],1)],1),a("v-row",[a("v-col",[a("div",{staticClass:"text-center"},[a("v-pagination",{staticClass:"pt-0",attrs:{"total-visible":t.pagination.totalVisible,length:t.pagination.length},on:{input:t.showPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)])],1)],1):t._e()},c=[],u=a("bc3a"),m=a.n(u);const d=m.a.create({baseURL:"/playqd/api"});var p={getBaseUrl(){return d.defaults.baseURL},getArtists(){return this.executeGet("/library/artists/")},getArtistImageSrc(t){return this.executeGet("/library/artists/"+t+"/image/src")},getAlbumImageSrc(t){return this.executeGet("/library/albums/"+t+"/image/src")},getGenres(){return this.executeGet("/library/genres/")},getArtistAlbums(t){return this.executeGet("/library/albums/?artistId="+t)},getAlbums(t){return this.executeGet("/library/albums/"+t)},getGenreAlbums(t){return this.executeGet("/library/albums/?genre="+t)},getSongsFiltered(t,e){return this.executeGet("/library/songs/?pageSize="+t+"&filter="+e)},getAlbumSongs(t){return this.executeGet("/library/songs/album/"+t)},getSong(t){return this.executeGet("/library/songs/"+t)},updateArtist(t){return this.executePut("/library/artists/",t)},updateAlbum(t){return this.executePut("/library/albums",t)},setSongFavoriteStatus(t){return this.executePost("/library/songs/"+t)},updateSong(t){return this.executePut("/library/songs/",t)},updateSongHistory(t){return this.executePut("/library/history/"+t)},createAccount(t){return this.executePost("/accounts",t)},login(t){return d.post("/accounts/login",{},{auth:t})},executeGet(t){return d.get(t).catch(t=>{t.response&&401===t.response.status&&_e.push({name:"LoginView"})})},executePut(t,e){return d.put(t,e).catch(t=>{t.response&&401===t.response.status&&_e.push({name:"LoginView"})})},executePost(t,e){return d.post(t,e).catch(t=>{t.response&&401===t.response.status&&_e.push({name:"LoginView"})})}};class v{shufflePlaylist(t){for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[a],t[a]=s}}convertSecondsToMinutesAndSeconds(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)}}const g=new v;var h={name:"LibrarySongsView",data(){return{SONG_DURATION:g,sorting:{types:[{id:"FAVORITES",name:"Favorites",icon:"mdi-star-outline"},{id:"RECENTLY_ADDED",name:"Recently Added",icon:"mdi-sort-clock-ascending-outline"},{id:"RECENTLY_PLAYED",name:"Recently Played",icon:"mdi-sort-clock-ascending-outline"},{id:"PLAY_COUNT",name:"Top played",icon:"mdi-sort-ascending"}]},pagination:{page:1,totalVisible:7,length:15},songs:null}},mounted(){this.getSongsFiltered(10,"RECENTLY_ADDED")},methods:{playLibrarySongs(t){ia.$emit("play-playlist",{songs:this.songs,startSongIdx:t,shuffle:!1})},getSongsFiltered(t,e){p.getSongsFiltered(t,e).then(t=>{this.songs=t.data})},applyNewFilter(t){},showPage(t){}}},b=h,y=a("2877"),f=a("6544"),x=a.n(f),S=a("8336"),w=a("62ad"),C=a("ce7e"),V=a("132d"),A=a("adda"),_=a("8860"),I=a("da13"),$=a("1800"),k=a("5d23"),T=a("8270"),P=a("1baa"),N=a("34c3"),F=a("e449"),L=a("891e"),O=a("0fd9"),E=a("e0c7"),D=Object(y["a"])(b,l,c,!1,null,"0a0b50de",null),M=D.exports;x()(D,{VBtn:S["a"],VCol:w["a"],VDivider:C["a"],VIcon:V["a"],VImg:A["a"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemActionText:k["a"],VListItemAvatar:T["a"],VListItemContent:k["b"],VListItemGroup:P["a"],VListItemIcon:N["a"],VListItemSubtitle:k["c"],VListItemTitle:k["d"],VMenu:F["a"],VPagination:L["a"],VRow:O["a"],VSubheader:E["a"]});var R={name:"LibraryView",components:{LibrarySongsView:M},data(){return{items:[{title:"Artists",icon:"mdi-account-music",viewName:"ArtistsView"},{title:"Playlists",icon:"mdi-playlist-music-outline",viewName:"AlbumsView"},{title:"Songs",icon:"mdi-music-note",viewName:"LibrarySongsView"},{title:"Genres",icon:"mdi-guitar-electric",viewName:"GenresView"}]}},methods:{showItem(t){this.$router.push({name:t})}}},G=R,B=Object(y["a"])(G,n,o,!1,null,null,null),U=B.exports;x()(B,{VCol:w["a"],VIcon:V["a"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemContent:k["b"],VListItemGroup:P["a"],VListItemIcon:N["a"],VListItemTitle:k["d"],VRow:O["a"],VSubheader:E["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",{attrs:{elevation:"2"}},[a("v-card-title",[t._v("Login")]),a("v-card-text",[a("v-item-group",[a("v-text-field",{attrs:{label:"Account name",placeholder:"Account name",required:""},model:{value:t.account.username,callback:function(e){t.$set(t.account,"username",e)},expression:"account.username"}}),a("v-text-field",{attrs:{label:"Password",placeholder:"Password",required:"",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}})],1)],1),a("v-card-actions",{staticClass:"justify-space-between"},[a("v-btn",{staticClass:"text-capitalize",attrs:{text:""},on:{click:function(e){return t.createAccount()}}},[t._v("Create new account")]),a("v-btn",{staticClass:"text-capitalize",attrs:{color:"blue-grey lighten-3"},on:{click:function(e){return t.login()}}},[t._v(" Login ")])],1)],1)],1)],1)},j=[],H={name:"LoginView",data(){return{showPassword:!1,account:{username:"",password:""}}},methods:{login(){p.login(this.account).then(t=>{this.$store.commit("setLoginSuccess",this.account),this.$router.push({name:"Home"})})},createAccount(){this.$router.push({name:"SignInView"})}}},z=H,W=a("b0af"),Y=a("99d9"),J=a("604c"),K=a("8654"),Q=Object(y["a"])(z,q,j,!1,null,null,null),X=Q.exports;x()(Q,{VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardText:Y["c"],VCardTitle:Y["d"],VCol:w["a"],VItemGroup:J["b"],VRow:O["a"],VTextField:K["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",{attrs:{elevation:"2"}},[a("v-card-title",[t._v("Create account")]),a("v-card-text",[a("v-item-group",[a("v-text-field",{attrs:{label:"Account name",placeholder:"Account name",required:""},model:{value:t.account.username,callback:function(e){t.$set(t.account,"username",e)},expression:"account.username"}}),a("v-text-field",{attrs:{label:"Password",placeholder:"Password",required:"",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{block:"",color:"blue-grey lighten-3"},on:{click:function(e){return t.createAccount()}}},[t._v(" Create ")])],1)],1)],1)],1)},tt=[],et={name:"SignInView",data(){return{showPassword:!1,account:{username:"",password:""}}},methods:{createAccount(){p.createAccount(this.account).then(t=>{this.$router.push({name:"Home"})})}}},at=et,st=Object(y["a"])(at,Z,tt,!1,null,null,null),it=st.exports;x()(st,{VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardText:Y["c"],VCardTitle:Y["d"],VCol:w["a"],VItemGroup:J["b"],VRow:O["a"],VTextField:K["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0 pl-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"display-1"},[t._v("Artists")]),a("v-list-item-subtitle",{staticClass:"text-caption text--disabled"},[t._v(" Total: "+t._s(t.artists.length)+", songs: "+t._s(this.totalSongsCount)+" ")])],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{fab:"",small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}])},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Sort artists")]),t._l(t.sorting.types,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.sortArtists(e.id)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-icon",[a("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(e.icon))])],1)],1)}))],2)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("v-item-group",{staticClass:"py-0",attrs:{align:"left"}},[a("v-text-field",{attrs:{placeholder:"Find in artists",clearable:"","prepend-inner-icon":"mdi-magnify"},on:{input:function(e){return t.filterArtists()},"click:clear":function(e){return t.clearInput()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.artists,(function(e,s){return a("v-list-item",{key:s,staticClass:"pl-0",attrs:{to:{name:"AlbumsView",query:{artistId:e.id}}}},[a("v-list-item-avatar",{staticClass:"ml-0 mr-2"},[a("v-img",{attrs:{src:t.$store.state.artistsBaseUrl+e.id+"/image",alt:"alt"}})],1),a("v-list-item-content",{staticClass:"py-0"},[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{staticClass:"text-caption"},[t._v(" "+t._s(t.albumsCountString(e)+", "+t.albumSongsCountString(e))+" ")])],1),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1)})),1)],1)],1)],1)],1)},nt=[],ot={name:"ArtistsView",components:{},data(){return{searchFilter:"",artists:[],totalSongsCount:0,sorting:{types:[{id:"name",name:"By Name",icon:"mdi-sort-alphabetical-ascending"},{id:"play-last-date",name:"Recently Played",icon:"mdi-sort-clock-ascending-outline"},{id:"play-count",name:"Most Played",icon:"mdi-sort-ascending"},{id:"album-count",name:"Total Albums",icon:"mdi-folder-music-outline"},{id:"song-count",name:"Total Songs",icon:"mdi-music-box-multiple-outline"}]}}},mounted(){0===this.$store.getters.getArtists.length?p.getArtists().then(t=>{this.$store.commit("setArtists",t.data.artists),this.artists=this.$store.getters.getArtists,this.totalSongsCount=this.$store.getters.getArtists.map(t=>t.songCount).reduce((t,e)=>t+e,0),this.sortArtists("play-last-date")}):(this.artists=this.$store.getters.getArtists,this.totalSongsCount=this.$store.getters.getArtists.map(t=>t.songCount).reduce((t,e)=>t+e,0))},methods:{albumsCountString(t){return t.albumCount>1?t.albumCount+" albums":t.albumCount+" album"},albumSongsCountString(t){return t.songCount>1?t.songCount+" songs":t.songCount+" song"},filterArtists(){if(this.searchFilter&&""!==this.searchFilter){let t=this.searchFilter.toLowerCase();this.artists=this.$store.getters.getArtists.filter(e=>e.name.toLowerCase().includes(t))}else this.artists=this.$store.getters.getArtists},clearInput(){this.searchFilter="",this.filterArtists()},sortArtists(t){"name"===t&&this.artists.sort((t,e)=>{let a=t.name,s=e.name;return a.localeCompare(s)}),"play-last-date"===t&&this.artists.sort((t,e)=>t.playbackHistory.lastTimePlayed<e.playbackHistory.lastTimePlayed?1:t.playbackHistory.lastTimePlayed>e.playbackHistory.lastTimePlayed?-1:0),"play-count"===t&&this.artists.sort((t,e)=>e.playbackHistory.playCount-t.playbackHistory.playCount),"album-count"===t&&this.artists.sort((t,e)=>e.albumCount-t.albumCount),"song-count"===t&&this.artists.sort((t,e)=>e.songCount-t.songCount)}}},lt=ot,ct=Object(y["a"])(lt,rt,nt,!1,null,null,null),ut=ct.exports;x()(ct,{VBtn:S["a"],VCol:w["a"],VIcon:V["a"],VImg:A["a"],VItemGroup:J["b"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemAvatar:T["a"],VListItemContent:k["b"],VListItemGroup:P["a"],VListItemIcon:N["a"],VListItemSubtitle:k["c"],VListItemTitle:k["d"],VMenu:F["a"],VRow:O["a"],VSubheader:E["a"],VTextField:K["a"]});var mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0 pl-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-content",{staticClass:"display-1"},[t._v("Genres")])],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},t._l(t.genres,(function(e,s){return a("div",[a("v-list-item",{on:{click:function(a){return t.openGenreAlbums(e)}}},[a("v-list-item-content",[t._v(t._s(e))]),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1),a("v-divider")],1)})),0)],1)],1)],1)},dt=[],pt={name:"GenresView",data(){return{genres:null}},mounted(){p.getGenres().then(t=>{this.genres=t.data.genres})},methods:{openGenreAlbums(t){this.$router.push({name:"AlbumsView",query:{genre:t}})}}},vt=pt,gt=Object(y["a"])(vt,mt,dt,!1,null,null,null),ht=gt.exports;x()(gt,{VCol:w["a"],VDivider:C["a"],VIcon:V["a"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemContent:k["b"],VRow:O["a"]});var bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.originalAlbums.length>0?s("div",[s("v-row",[s("v-col",{staticClass:"pl-0 py-0 text-left"},[s("v-list-item",[t.$route.query.artistId?s("div",[t.showArtistImage?s("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-list-item-avatar",t._g(t._b({staticClass:"ml-0 mr-2 mb-5"},"v-list-item-avatar",i,!1),a),[s("v-img",{attrs:{src:t.$store.state.artistsBaseUrl+t.$route.query.artistId+"/image"},on:{error:function(e){return t.imageError()}}})],1)]}}],null,!1,2480118495)},[s("v-card",{attrs:{align:"center",elevation:"5"}},[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.state.artistsBaseUrl+t.$route.query.artistId+"/image?size=LARGE"}},[s("v-card-title",[t._v(t._s(this.albums[0].artist.name))])],1)],1)],1):t._e()],1):t._e(),s("v-list-item-content",[s("v-list-item-title",{staticClass:"display-1"},[t._v(t._s(this.$route.query.artistId?this.albums[0].artist.name:this.$route.query.genre))]),s("v-list-item-subtitle",[t._v(t._s(this.$route.query.artistId?"(artist albums)":"(genre albums)"))])],1),t.$route.query.artistId?s("v-list-item-action",{staticClass:"mx-0"},[s("EditAlbumsArtistView",{attrs:{"artist-data":t.originalAlbums[0].artist,"artist-image-found":t.showArtistImage},on:{close:function(t){},"update:artistImageFound":function(e){t.showArtistImage=e},"update:artist-image-found":function(e){t.showArtistImage=e}}})],1):t._e(),s("v-list-item-action",{staticClass:"mx-0"},[s("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.attrs,i=e.on;return[s("v-btn",t._g(t._b({attrs:{fab:"",small:"",icon:""}},"v-btn",a,!1),i),[s("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}],null,!1,1122849984)},[s("v-list",{staticClass:"text-left",attrs:{dense:""}},[s("v-subheader",[t._v("Sort albums")]),t._l(t.sorting.types,(function(e,a){return s("v-list-item",{key:a,on:{click:function(a){return t.applyNewSort(e)}}},[s("v-list-item-title",[t._v(t._s(e.name))]),e.active?s("v-list-item-icon",[s("v-icon",{attrs:{right:""}},[t._v("mdi-check")])],1):t._e()],1)}))],2)],1)],1)],1)],1)],1),s("v-row",[s("v-col",{staticClass:"py-0"},[s("v-item-group",{attrs:{align:"left"}},[s("v-text-field",{staticClass:"py-0",attrs:{placeholder:"Find album","prepend-inner-icon":"mdi-magnify",clearable:""},on:{input:function(e){return t.filterAlbums()},"click:clear":function(e){return t.clearInput()}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}})],1)],1)],1),s("v-row",{staticClass:"justify-space-around pb-15"},t._l(t.albums,(function(e){return s("v-col",{key:e.id,attrs:{cols:6,align:"center",md:"auto"}},[s("v-card",{attrs:{"max-width":"200px","max-height":"300px"},on:{click:function(a){return t.openAlbum(e)}}},[t.albumsWithoutImage.includes(e.id)?s("div",[s("v-img",{attrs:{src:a("5eef"),gradient:"to bottom, rgba(0, 0, 0, .1), rgba(0, 0, 0 ,.5)"}})],1):s("div",[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.state.albumsBaseUrl+e.id+"/image"},on:{error:function(a){return t.imageError(e.id)}}})],1),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,r=a.attrs;return[s("v-card-subtitle",t._g(t._b({staticClass:"py-0 text-left text-truncate text-subtitle-2",domProps:{textContent:t._s(e.name)}},"v-card-subtitle",r,!1),i))]}}],null,!0)},[s("span",[t._v(t._s(e.name))])]),s("v-card-subtitle",{staticClass:"py-0 text-left text-truncate text-caption text--disabled",domProps:{textContent:t._s(e.date?e.date:"----")}})],1)],1)})),1),s("v-row",[s("v-col",[t.paginationRequired()?s("div",{staticClass:"text-center"},[s("v-pagination",{staticClass:"pb-15",attrs:{"total-visible":t.pagination.totalVisible,length:t.pagination.length},on:{input:t.showPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()])],1)],1):t._e()},yt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Artist")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.active=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-text-field",{attrs:{dense:"",label:"Name","persistent-hint":"",disabled:t.moveToExistingArtist,hint:t.artistData.name},model:{value:t.artist.name,callback:function(e){t.$set(t.artist,"name",e)},expression:"artist.name"}}),a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Country code","persistent-hint":"",disabled:t.moveToExistingArtist,hint:t.artistData.country,rules:t.editForm.artistCountryRules},model:{value:t.artist.country,callback:function(e){t.$set(t.artist,"country",e)},expression:"artist.country"}}),a("v-row",{staticClass:"pl-3 pt-5",attrs:{align:"center"}},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":""},model:{value:t.moveToExistingArtist,callback:function(e){t.moveToExistingArtist=e},expression:"moveToExistingArtist"}}),a("v-autocomplete",{staticClass:"pt-5 pr-3",attrs:{dense:"",label:"Move to existing artist",clearable:"","persistent-hint":"",disabled:!t.moveToExistingArtist,hint:t.artistData.name,"item-text":"name","item-value":"id",items:this.$store.state.artists},model:{value:t.artist.moveToArtistId,callback:function(e){t.$set(t.artist,"moveToArtistId",e)},expression:"artist.moveToArtistId"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.saveChanges()}}},[t._v(" Save ")]),a("v-spacer"),t.artistImageFound?t._e():a("div",[a("v-btn",{staticClass:"text-capitalize",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.findArtistImage()}}},[t._v(" Find artist image ")])],1)],1)],1)],1)},xt=[],St=a("9e0b"),wt=a.n(St),Ct={name:"EditAlbumsArtistView",props:["artistData","artistImageFound"],components:{countryCodes:wt.a},data(){return{active:!1,moveToExistingArtist:!1,editForm:{valid:!1,artistNameRules:[t=>!!t||"Name is required"],artistCountryRules:[t=>t.length<3||"Country code length must be equal 2"]},artist:{id:this.artistData.id,moveToArtistId:null,name:this.artistData.name,country:this.artistData.country}}},mounted(){this.$store.state.artists>0||p.getArtists().then(t=>{this.$store.commit("setArtists",t.data.artists)})},methods:{saveChanges(){this.editForm.valid&&p.updateArtist(this.artist).then(t=>{this.active=!1,this.artist.moveToArtistId&&this.$router.push({name:"ArtistsView"})})},findArtistImage(){p.getArtistImageSrc(this.artistData.id).then(t=>{this.$emit("update:artistImageFound",!0),this.active=!1})}}},Vt=Ct,At=a("c6a6"),_t=a("ac7c"),It=a("169a"),$t=a("4bd4"),kt=a("2fa4"),Tt=Object(y["a"])(Vt,ft,xt,!1,null,null,null),Pt=Tt.exports;x()(Tt,{VAutocomplete:At["a"],VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardText:Y["c"],VCardTitle:Y["d"],VCheckbox:_t["a"],VDialog:It["a"],VForm:$t["a"],VIcon:V["a"],VRow:O["a"],VSpacer:kt["a"],VTextField:K["a"]});const Nt=12;var Ft={name:"AlbumsView",components:{EditAlbumsArtistView:Pt},data(){return{showArtistImage:!0,albumsWithoutImage:[],sorting:{types:[{id:"by-title",name:"Title",active:!1},{id:"by-newest",name:"Newest First",active:!0},{id:"by-oldest",name:"Oldest First",active:!1}]},pagination:{page:1,totalVisible:7,length:15},searchFilter:"",originalAlbums:[],albums:[]}},mounted(){let t="";this.$route.query.artistId?t="?artistId="+this.$route.query.artistId:(t="?genre="+this.$route.query.genre,this.sorting.type="by-title"),p.getAlbums(t).then(t=>{this.originalAlbums=Array.from(t.data.albums),this.sortAlbums(this.originalAlbums),this.albums=this.originalAlbums.slice(0,Nt),this.pagination.length=Math.ceil(this.originalAlbums.length/Nt)})},methods:{imageError(t){t?this.albumsWithoutImage.push(t):this.showArtistImage=!1},paginationRequired(){return this.originalAlbums.length>Nt},showPage(t){let e=0,a=Nt;t>1&&(e=(t-1)*Nt,a=e+Nt),this.albums=Array.from(this.originalAlbums.slice(e,a))},clearInput(){this.searchFilter="",this.filterAlbums()},filterAlbums(){if(this.searchFilter&&""!==this.searchFilter){let t=this.searchFilter.toLowerCase();this.albums=this.originalAlbums.filter(e=>e.name.toLowerCase().includes(t))}else this.albums=this.originalAlbums},applyNewSort(t){this.sorting.types.forEach(t=>t.active=!1),t.active=!0,this.sortAlbums(this.originalAlbums),this.albums=this.originalAlbums.slice(0,Nt),this.pagination.page=1},sortAlbums(t){let e=this.sorting.types.filter(t=>t.active)[0].id;"by-oldest"===e?t.sort((t,e)=>t.date&&e.date?t.date>e.date?1:t.date<e.date?-1:0:0):"by-newest"===e?t.sort((t,e)=>t.date&&e.date?t.date<e.date?1:t.date>e.date?-1:0:0):"by-title"===e&&t.sort((t,e)=>{let a=t.name,s=e.name;return a.localeCompare(s)})},openAlbum(t){this.$router.push({name:"AlbumSongsView",params:{albumId:t.id,albumData:t,albumFrom:this.$route.query.artistId?"artist":"genre"}})}}},Lt=Ft,Ot=a("3a2f"),Et=Object(y["a"])(Lt,bt,yt,!1,null,null,null),Dt=Et.exports;x()(Et,{VBtn:S["a"],VCard:W["a"],VCardSubtitle:Y["b"],VCardTitle:Y["d"],VCol:w["a"],VDialog:It["a"],VIcon:V["a"],VImg:A["a"],VItemGroup:J["b"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemAvatar:T["a"],VListItemContent:k["b"],VListItemIcon:N["a"],VListItemSubtitle:k["c"],VListItemTitle:k["d"],VMenu:F["a"],VPagination:L["a"],VRow:O["a"],VSubheader:E["a"],VTextField:K["a"],VTooltip:Ot["a"]});var Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.songs.length>0?s("div",[s("v-row",[s("v-col",{staticClass:"px-0"},[s("v-card",{attrs:{align:"center",elevation:"0"}},[t.showAlbumImage?s("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-img",t._g(t._b({staticClass:"scoped-album-img elevation-5",attrs:{contain:"",src:t.$store.state.artwork.ofOpenedAlbum},on:{error:t.imageError}},"v-img",i,!1),a))]}}],null,!1,125454553)},[s("v-card",{attrs:{align:"center",elevation:"5"}},[s("v-img",{staticClass:"white--text align-end",attrs:{src:this.$store.state.artwork.ofOpenedAlbum}},[s("v-card-title",[t._v(t._s(this.album.name))])],1)],1)],1):s("div",[s("v-img",{staticClass:"scoped-album-img elevation-5",attrs:{src:a("5eef")},on:{click:function(e){return t.findAlbumImage()}}})],1),s("v-card-title",{staticClass:"text-center text-body-1",staticStyle:{display:"inherit"}},[t._v(t._s(t.album.name))]),s("v-card-subtitle",{staticClass:"py-0"},[s("v-btn",{staticClass:"text-capitalize red--text",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{artistId:t.album.artist.id}}}},[t._v(t._s(t.album.artist.name)+" ")])],1),s("v-card-subtitle",{staticClass:"py-0"},[s("v-btn",{staticClass:"text-capitalize",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{genre:t.album.genre}}}},[s("small",[t._v(t._s(t.album.genre?t.album.genre:"")+" "+t._s(t.album.date?" - "+t.album.date:""))])])],1),s("v-card-actions",{staticStyle:{display:"inherit"}},[s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbum(0)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),s("span",{staticClass:"text-capitalize"},[t._v("Play")])],1),s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbumShuffled()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-shuffle-variant")]),s("span",{staticClass:"text-capitalize"},[t._v("Shuffle")])],1)],1),s("v-row",[s("v-col",{staticClass:"pl-6 pt-5 text-left",attrs:{md:"auto"}},[s("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.album.totalTime)+" ")])]),s("v-col",{staticClass:"text-right"},[s("EditAlbumView",{attrs:{"album-data":t.album}})],1)],1),s("v-card-text",{staticClass:"px-2 pt-0"},[s("v-list",[s("v-list-item-group",{attrs:{color:"error"},model:{value:t.selectedSongIdx,callback:function(e){t.selectedSongIdx=e},expression:"selectedSongIdx"}},[t._l(t.songs,(function(e,a){return[s("v-list-item",{key:a,on:{click:function(e){return t.playSong(a)}}},[s("v-list-item-icon",{staticClass:"py-0 mr-1"},[t.isPlayingSongRow(a)?s("div",[s("v-icon",{attrs:{small:""}},[t._v("mdi-music-circle-outline mdi-spin")])],1):s("div",{staticClass:"text--disabled text-right"},[s("span",[t._v(t._s(a+1))])])]),s("v-list-item-content",{staticClass:"text-left"},[s("v-list-item-title",[t._v(" "+t._s(t.replaceSongNameWithFileName?e.fileName:e.name)+" ")])],1),s("v-list-item-action",[t.isPlayingSongRow(a)?s("div",{staticClass:"subtitle-2 text-no-wrap"},[t._v(" - "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")]):s("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(e.duration))+" ")])])],1),s("v-divider")]}))],2)],1)],1)],1)],1)],1)],1):t._e()},Rt=[],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{attrs:{inset:"",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{fab:"",icon:"",small:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}]),model:{value:t.songMenuOptions.enable,callback:function(e){t.$set(t.songMenuOptions,"enable",e)},expression:"songMenuOptions.enable"}},[a("v-sheet",{staticClass:"text-center"},[a("v-card",{attrs:{elevation:"1"}},[a("v-toolbar",{attrs:{color:"grey lighten-3",elevation:"0"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.$store.state.artwork.ofOpenedAlbum}})],1),a("v-toolbar-title",[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.album.artist.name)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate"},[a("small",[t._v(t._s(this.album.name))])])]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.songMenuOptions.enable=!t.songMenuOptions.enable}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",subheader:""}},[a("v-list-item",{staticClass:"text-left",attrs:{disabled:t.artworkNotFound},on:{click:function(e){return t.resolveArtworkOnline()}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Resolve artwork online")]),t.artworkNotFound?a("v-list-item-subtitle",[a("span",{staticClass:"red--text"},[t._v("Not available")])]):a("v-list-item-subtitle",{staticClass:"text-wrap"},[t._v(" Search for album artist online and try to resolve the artwork ")])],1),this.artworkSearchInProgress?a("v-list-item-action",[a("v-progress-circular",{attrs:{size:"20",indeterminate:"",color:"grey"}})],1):a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:t.artworkNotFound?"red":"grey lighten-1"}},[t._v("mdi-image-search-outline")])],1)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[t._v(" Show song title as file name ")]),a("v-list-item-action",[a("v-switch",{attrs:{color:"info","hide-details":""},on:{change:function(e){return t.$emit("update:showSongNameAsFileName",t.songNameViewSwitch)}},model:{value:t.songNameViewSwitch,callback:function(e){t.songNameViewSwitch=e},expression:"songNameViewSwitch"}})],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[t._v("Play prev")])],1)],1)],1)],1)],1)},Bt=[],Ut={name:"AlbumSongsDropdownOptionsView",props:["album","showSongNameAsFileName"],data(){return{songMenuOptions:{enable:!1},songNameViewSwitch:this.showSongNameAsFileName,artworkSearchInProgress:!1,artworkNotFound:!1}},methods:{resolveArtworkOnline(){this.artworkNotFound||(this.artworkSearchInProgress=!0)}}},qt=Ut,jt=a("288c"),Ht=a("490a"),zt=a("8dd9"),Wt=a("b73d"),Yt=a("71d9"),Jt=a("2a7f"),Kt=Object(y["a"])(qt,Gt,Bt,!1,null,null,null),Qt=Kt.exports;x()(Kt,{VBottomSheet:jt["a"],VBtn:S["a"],VCard:W["a"],VDivider:C["a"],VIcon:V["a"],VImg:A["a"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemContent:k["b"],VListItemSubtitle:k["c"],VListItemTitle:k["d"],VProgressCircular:Ht["a"],VSheet:zt["a"],VSpacer:kt["a"],VSwitch:Wt["a"],VToolbar:Yt["a"],VToolbarTitle:Jt["b"]});var Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Album")])]),a("v-card-text",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-text-field",{attrs:{dense:"",label:"Album Name","persistent-hint":"",disabled:t.moveToExistingAlbum,hint:t.albumData.name},model:{value:t.album.name,callback:function(e){t.$set(t.album,"name",e)},expression:"album.name"}}),a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Genre","persistent-hint":"",disabled:t.moveToExistingAlbum,hint:t.albumData.genre},model:{value:t.album.genre,callback:function(e){t.$set(t.album,"genre",e)},expression:"album.genre"}}),a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Year","persistent-hint":"",disabled:t.moveToExistingAlbum,hint:t.albumData.date},model:{value:t.album.date,callback:function(e){t.$set(t.album,"date",e)},expression:"album.date"}}),a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Artwork url","persistent-hint":"",disabled:t.moveToExistingAlbum,hint:"URL"},model:{value:t.album.artworkSrc,callback:function(e){t.$set(t.album,"artworkSrc",e)},expression:"album.artworkSrc"}}),a("v-checkbox",{attrs:{label:"Override song name with file name",color:"red",disabled:t.moveToExistingAlbum},model:{value:t.album.overrideSongNameWithFileName,callback:function(e){t.$set(t.album,"overrideSongNameWithFileName",e)},expression:"album.overrideSongNameWithFileName"}}),a("v-row",{staticClass:"pt-5",attrs:{align:"center"}},[a("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":""},model:{value:t.moveToExistingAlbum,callback:function(e){t.moveToExistingAlbum=e},expression:"moveToExistingAlbum"}}),a("v-autocomplete",{staticClass:"pt-5 pr-3 text-left",attrs:{dense:"",label:"Move to existing album",clearable:"","persistent-hint":"",disabled:!t.moveToExistingAlbum,hint:t.albumData.name,"item-text":"name","item-value":"id",items:t.artistAlbums},model:{value:t.album.id,callback:function(e){t.$set(t.album,"id",e)},expression:"album.id"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.active=!1}}},[t._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.saveChanges()}}},[t._v(" Save ")])],1)],1)],1)},Zt=[],te={name:"EditAlbumView",props:["albumData"],data(){return{active:!1,moveToExistingAlbum:!1,editForm:{valid:!1},artistAlbums:[],album:{id:this.albumData.id,moveToAlbumId:null,name:this.albumData.name,genre:this.albumData.genre,date:this.albumData.date,overrideSongNameWithFileName:!1,artworkSrc:""}}},mounted(){p.getArtistAlbums(this.albumData.artist.id).then(t=>{this.artistAlbums=t.data.albums.filter(t=>t.id!==this.albumData.id)})},methods:{saveChanges(){this.editForm.valid&&p.updateAlbum(this.album).then(t=>{ia.$emit("album-data-updated",this.album),this.active=!1,this.album.moveToAlbumId&&this.$router.push({name:"AlbumsView",query:{artistId:this.albumData.artist.id}})})}}},ee=te,ae=Object(y["a"])(ee,Xt,Zt,!1,null,null,null),se=ae.exports;x()(ae,{VAutocomplete:At["a"],VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardText:Y["c"],VCardTitle:Y["d"],VCheckbox:_t["a"],VDialog:It["a"],VForm:$t["a"],VIcon:V["a"],VRow:O["a"],VSpacer:kt["a"],VTextField:K["a"]});var ie={name:"AlbumSongsView",components:{EditAlbumView:se,AlbumSongsDropdownOptionsView:Qt},props:["albumData","albumFrom"],data(){return{selectedSongIdx:null,SONG_DURATION:g,showAlbumImage:!0,headers:[{align:"center",value:"orderId",cellClass:"pa-0"},{align:"start",value:"name"},{align:"end",value:"duration"}],album:this.albumData,songs:[],replaceSongNameWithFileName:!1}},computed:{playingSongId:function(){return this.$store.state.playlist.currentSong&&this.$store.state.audio.isPlaying?this.$store.state.playlist.currentSong.id:null}},mounted(){p.getAlbumSongs(this.$route.params.albumId).then(t=>{this.songs=t.data.songs,this.album||(this.album=t.data.album),this.album.totalTime=this.songs.length+" songs, "+this.album.totalTimeHumanReadable,this.$store.commit("setArtworkOfOpenedAlbum",{albumId:this.album.id,src:this.$store.state.albumsBaseUrl+this.album.id+"/image"})}),ia.$on("album-data-updated",t=>{this.album.name=t.name,this.album.genre=t.genre,this.album.date=t.date,t.artworkSrc.length>0&&this.$store.commit("setArtworkOfOpenedAlbum",{albumId:this.album.id,src:t.artworkSrc})}),ia.$on("audio-is-playing",()=>{this.album.id===this.$store.state.playlist.currentSong.album.id&&(this.selectedSongIdx=this.$store.state.playlist.currentSongIdx)})},methods:{imageError(t){this.showAlbumImage=!1},findAlbumImage(){p.getAlbumImageSrc(this.album.id).then(t=>{this.$store.commit("setArtworkOfOpenedAlbum",{albumId:this.album.id,src:t.data}),this.showAlbumImage=!0})},isPlayingSongRow(t){return t===this.selectedSongIdx&&this.album.id===this.$store.state.playlist.currentSong.album.id},playAlbum(t){ia.$emit("play-playlist",{songs:this.songs,startSongIdx:t,shuffle:!1})},playAlbumShuffled(){g.shufflePlaylist(this.songs),ia.$emit("play-playlist",{songs:this.songs,startSongIdx:0,shuffle:!0})},playSong(t){null===this.$store.state.playlist.id||this.$store.state.playlist.id!==this.album.id||this.$store.state.playlist.songs.length!==this.songs.length?this.playAlbum(t):ia.$emit("play-song",t)}}},re=ie,ne=(a("6045"),Object(y["a"])(re,Mt,Rt,!1,null,"41b8bbfa",null)),oe=ne.exports;x()(ne,{VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardSubtitle:Y["b"],VCardText:Y["c"],VCardTitle:Y["d"],VCol:w["a"],VDialog:It["a"],VDivider:C["a"],VIcon:V["a"],VImg:A["a"],VList:_["a"],VListItem:I["a"],VListItemAction:$["a"],VListItemContent:k["b"],VListItemGroup:P["a"],VListItemIcon:N["a"],VListItemTitle:k["d"],VRow:O["a"]});var le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.$store.state.playlist.currentSong?a("div",[a("v-row",[a("v-col",[a("v-card",{attrs:{align:"center",elevation:"0"}},[a("router-link",{attrs:{to:{name:"AlbumSongsView",params:{albumId:this.$store.state.playlist.currentSong.album.id}}}},[a("v-img",{staticClass:"elevation-5",attrs:{"max-width":"200px","max-height":"200px",contain:"",src:this.$store.state.artwork.ofCurrentSong}})],1),a("v-card-title",{staticClass:"pt-2 text-h5",staticStyle:{display:"inherit"}},[a("v-row",[a("v-col",{staticClass:"text-left",attrs:{cols:"1"}},[a("v-btn",{attrs:{small:"",icon:"",elevation:"1"},on:{click:function(e){return t.updateFavoriteStatus()}}},[this.$store.state.playlist.currentSong.favorite?a("v-icon",{attrs:{color:"yellow darken-3"}},[t._v("mdi-star")]):a("v-icon",[t._v("mdi-star-outline")])],1)],1),a("v-col",{on:{click:function(e){t.replaceSongNameWithFileName=!t.replaceSongNameWithFileName}}},[t._v(" "+t._s(this.replaceSongNameWithFileName?this.$store.state.playlist.currentSong.fileName:this.$store.state.playlist.currentSong.name)+" ")]),a("v-col",{staticClass:"text-right",attrs:{cols:"1"}},[a("EditPlayerSongView",{attrs:{"song-data":this.$store.state.playlist.currentSong}})],1)],1)],1),a("v-card-subtitle",{staticClass:"pt-0 pb-1"},[a("v-btn",{staticClass:"text-capitalize text-body-1 red--text",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{artistId:this.$store.state.playlist.currentSong.artist.id}}}},[t._v(" "+t._s(this.$store.state.playlist.currentSong.artist.name)+" ")]),a("v-row",[a("v-col",{staticClass:"pt-3 pb-0 text-left"},[a("small",[t._v("Played: "+t._s(t.$store.state.playlist.currentSong.playbackHistory?t.$store.state.playlist.currentSong.playbackHistory.playCount:0))])]),a("v-col",{staticClass:"text-right"},[a("small",[t._v(t._s(t.$store.state.playlist.currentSong.fileExtension)+" | "+t._s(t.$store.state.playlist.currentSong.audioBitRate)+" kbps | "+t._s(t.$store.state.playlist.currentSong.audioSampleRate)+" Hz")])])],1)],1),a("v-card-text",{staticClass:"px-2"},[a("v-row",{staticClass:"no-gutters"},[a("v-col",{staticClass:"px-0 no-gutters",attrs:{cols:"12"}},[a("v-slider",{attrs:{dense:"","inverse-label":"",hint:" ","persistent-hint":"","thumb-color":"black","track-color":"grey","track-fill-color":"black",min:"0","tick-size":"1",step:"0.001",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},scopedSlots:t._u([{key:"message",fn:function(){return[a("v-row",{staticClass:"no-gutters"},[a("v-col",{staticClass:"py-0 px-1 red--text text-left",attrs:{cols:"6"}},[t._v(" "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(t.$store.state.audio.currentTimeAsInt))+" ")]),a("v-col",{staticClass:"py-0 px-1 red--text text-right",attrs:{cols:"6"}},[t._v(" - "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")])],1)]},proxy:!0}],null,!1,1825754340),model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)],1)],1),a("v-card-actions",{staticClass:"pt-0",staticStyle:{display:"inherit"}},[a("v-row",[a("v-col",{staticClass:"pt-0"},[a("v-btn",{staticClass:"mr-10",attrs:{"x-small":"",fab:"",elevation:"3"},on:{click:function(e){return t.setRepeat()}}},[a("v-icon",{attrs:{color:t.repeatIcon.color}},[t._v(t._s(t.repeatIcon.name))])],1),a("v-btn",{attrs:{small:"",fab:"",elevation:"3",disabled:!this.$store.getters.hasPrevSong},on:{click:function(e){return t.playPrev()}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-skip-backward-outline")])],1),this.$store.state.audio.isPlaying?a("v-btn",{staticClass:"mx-5",attrs:{fab:""},on:{click:function(e){return t.pause()}}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-pause")])],1):a("v-btn",{staticClass:"mx-5",attrs:{fab:""},on:{click:t.resumePlay}},[a("v-icon",{staticClass:"pl-1",attrs:{large:""}},[t._v("mdi-play-outline")])],1),a("v-btn",{attrs:{fab:"",small:"",elevation:"3",disabled:!this.$store.getters.hasNextSong},on:{click:t.playNext}},[a("v-icon",{attrs:{large:""}},[t._v("mdi-fast-forward-outline")])],1),a("v-btn",{staticClass:"ml-10",attrs:{"x-small":"",fab:"",elevation:"3"},on:{click:function(e){return t.fastForward()}}},[a("v-icon",[t._v("mdi-fast-forward-10")])],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"pb-2 text-left text-caption text-truncate"},[a("small",[a("i",[t._v("Just played: ")])]),this.$store.getters.getPrevSong?a("p",{staticClass:"grey--text"},[t._v(t._s(this.$store.getters.getPrevSong.name))]):a("p",{staticClass:"grey--text"},[t._v(" - - - ")])]),a("v-col",{staticClass:"pb-2 text-right text-caption"},[a("small",[a("i",[t._v("Playing next: ")])]),this.$store.getters.getNextSong?a("p",{staticClass:"grey--text"},[t._v(t._s(this.$store.getters.getNextSong.name))]):a("p",{staticClass:"grey--text"},[t._v(" - - - ")])])],1),a("v-divider")],1)],1)],1)],1):t._e()},ce=[],ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"pr-5",attrs:{small:"",fab:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Song")])]),a("v-card-text",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-text-field",{attrs:{dense:"",label:"Name","persistent-hint":"",hint:t.songData.name},model:{value:t.song.name,callback:function(e){t.$set(t.song,"name",e)},expression:"song.name"}}),a("v-textarea",{attrs:{clearable:"",rows:"1","clear-icon":"mdi-close-circle",label:"Comment"},model:{value:t.song.comment,callback:function(e){t.$set(t.song,"comment",e)},expression:"song.comment"}}),a("v-textarea",{attrs:{clearable:"",rows:"3","clear-icon":"mdi-close-circle",label:"Lyrics"},model:{value:t.song.lyrics,callback:function(e){t.$set(t.song,"lyrics",e)},expression:"song.lyrics"}}),a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Artwork url","persistent-hint":"",hint:"URL"},model:{value:t.song.artworkSrc,callback:function(e){t.$set(t.song,"artworkSrc",e)},expression:"song.artworkSrc"}}),a("v-checkbox",{attrs:{label:"Override song name with file name",color:"red"},model:{value:t.song.overrideSongNameWithFileName,callback:function(e){t.$set(t.song,"overrideSongNameWithFileName",e)},expression:"song.overrideSongNameWithFileName"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.active=!1}}},[t._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.saveChanges()}}},[t._v(" Save ")])],1)],1)],1)},me=[],de={name:"EditPlayerSongView",props:["songData"],data(){return{active:!1,editForm:{valid:!1},song:{id:this.songData.id,name:this.songData.name,comment:this.songData.comment,lyrics:this.songData.lyrics,overrideSongNameWithFileName:this.songData.showFileNameAsSongName,artworkSrc:""}}},methods:{saveChanges(){this.editForm.valid&&p.updateSong(this.song).then(t=>{this.active=!1})}}},pe=de,ve=a("a844"),ge=Object(y["a"])(pe,ue,me,!1,null,null,null),he=ge.exports;x()(ge,{VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardText:Y["c"],VCardTitle:Y["d"],VCheckbox:_t["a"],VDialog:It["a"],VForm:$t["a"],VIcon:V["a"],VSpacer:kt["a"],VTextField:K["a"],VTextarea:ve["a"]});var be={name:"PlayerView",components:{EditPlayerSongView:he},props:["playerSong"],data(){return{SONG_DURATION:g,slider:{audioTime:0,audioVolume:.5},repeatIcon:{name:"mdi-repeat",color:""},replaceSongNameWithFileName:!1}},mounted(){this.$store.commit("setShowMiniPlayer",!1),this.playerSong||p.getSong(this.$route.params.songId).then(t=>{let e=[t.data];ia.$emit("play-playlist",{songs:e,startSongIdx:0,shuffle:!1})})},destroyed(){this.$store.commit("setShowMiniPlayer",!0)},methods:{changeAudioCurrentTime(t){ia.$emit("toolbar-player-current-time-changed",t||this.slider.audioTime)},playNext(){ia.$emit("play-next-song")},playPrev(){ia.$emit("play-prev-song")},resumePlay(){ia.$emit("player-resume-play")},pause(){ia.$emit("player-pause")},rewind(){this.changeAudioCurrentTime(this.slider.audioTime-10)},fastForward(){this.changeAudioCurrentTime(this.slider.audioTime+10)},setRepeat(){"none"===this.$store.state.playlist.repeat?(this.$store.commit("setRepeatMode","all"),this.repeatIcon={name:"mdi-repeat",color:"red"}):"all"===this.$store.state.playlist.repeat?(this.$store.commit("setRepeatMode","once"),this.repeatIcon={name:"mdi-repeat-once",color:"red"}):(this.$store.commit("setRepeatMode","none"),this.repeatIcon={name:"mdi-repeat",color:""})},updateFavoriteStatus(){p.setSongFavoriteStatus(this.$store.state.playlist.currentSong.id).then(t=>{this.$store.commit("setCurrentSongFavoriteStatus")})},openAlbum(){this.$router.push({name:"AlbumSongsView",params:{albumId:this.$store.state.playlist.currentSong.album.id}})}}},ye=be,fe=a("ba0d"),xe=Object(y["a"])(ye,le,ce,!1,null,null,null),Se=xe.exports;x()(xe,{VBtn:S["a"],VCard:W["a"],VCardActions:Y["a"],VCardSubtitle:Y["b"],VCardText:Y["c"],VCardTitle:Y["d"],VCol:w["a"],VDivider:C["a"],VIcon:V["a"],VImg:A["a"],VRow:O["a"],VSlider:fe["a"]});var we=a("2f62");s["a"].use(we["a"]);var Ce=new we["a"].Store({state:{loginSuccess:!1,principal:{username:null,password:null},audio:{isPlaying:!1,volume:.5,currentTime:0,currentTimeAsInt:0,duration:0},artists:[],artistsBaseUrl:p.getBaseUrl()+"/library/artists/",albumsBaseUrl:p.getBaseUrl()+"/library/albums/",artwork:{ofCurrentSong:"",ofOpenedAlbum:""},playlist:{id:null,shuffle:!1,repeat:"none",loopAll:!1,loopCurrent:!1,currentSong:null,currentSongIdx:-1,songs:[]},miniPlayer:{show:!0}},getters:{isLoggedIn:t=>t.loginSuccess,getArtists:t=>t.artists,repeatAll:t=>"all"===t.playlist.repeat,hasNextSong:(t,e)=>e.repeatAll||t.playlist.currentSongIdx+1<t.playlist.songs.length,hasPrevSong:t=>t.playlist.currentSongIdx-1>=0,getNextSong:(t,e)=>e.hasNextSong?t.playlist.currentSongIdx+1===t.playlist.songs.length&&e.repeatAll?t.playlist.songs[0]:t.playlist.songs[t.playlist.currentSongIdx+1]:null,getPrevSong:(t,e)=>e.hasPrevSong?t.playlist.songs[t.playlist.currentSongIdx-1]:null,getCurrentSongDurationInMinutesAndSeconds:t=>{let e=t.audio.duration;return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},audioIsPlaying:t=>t.audio.isPlaying},mutations:{setLoginSuccess:(t,e)=>{t.loginSuccess=!0,t.principal={username:e.username,password:e.password}},setAudioCurrentTime:(t,e)=>{t.audio.currentTime=e,t.audio.currentTimeAsInt=parseInt(e,10)},setAudioProperties:(t,e)=>{t.audio.paused=e.paused,t.audio.volume=e.volume,t.audio.currentTime=e.currentTime,t.audio.currentTimeAsInt=parseInt(e.currentTime,10),t.audio.duration=e.duration},setAudioIsPlaying:(t,e)=>{t.audio.isPlaying=e},setAudioVolume:(t,e)=>{t.audio.volume=e},setArtists:(t,e)=>{t.artists=e},setArtworkOfCurrentSong:(t,e)=>{t.artwork.ofCurrentSong=e},setArtworkOfOpenedAlbum:(t,e)=>{t.playlist.currentSong&&t.playlist.currentSong.album.id===e.albumId&&(t.artwork.ofCurrentSong=e.src),t.artwork.ofOpenedAlbum=e.src},setPlaylist:(t,e)=>{t.playlist.id=e.playlistId,t.playlist.shuffle=e.shuffle,t.playlist.currentSong=e.songs[e.startSongIdx],t.playlist.currentSongIdx=e.startSongIdx,t.playlist.songs=e.songs,t.artwork.ofCurrentSong=t.albumsBaseUrl+t.playlist.currentSong.album.id+"/image"},setCurrentSongToPrev:t=>{if(t.playlist.currentSongIdx-1>=0){let e=t.playlist.songs[--t.playlist.currentSongIdx];e.album.id!==t.playlist.currentSong.album.id&&(t.artwork.ofCurrentSong=t.albumsBaseUrl+t.playlist.currentSong.album.id+"/image"),t.playlist.currentSong=e}},setCurrentSongToNext:t=>{let e=null;if(t.playlist.currentSongIdx+1<t.playlist.songs.length)e=t.playlist.songs[++t.playlist.currentSongIdx];else{if("all"!==t.playlist.repeat)return;e=t.playlist.songs[0]}e.album.id!==t.playlist.currentSong.album.id&&(t.artwork.ofCurrentSong=t.albumsBaseUrl+t.playlist.currentSong.album.id+"/image"),t.playlist.currentSong=e},setCurrentSong:(t,e)=>{let a=t.playlist.songs[e];t.playlist.currentSong?a.album.id!==t.playlist.currentSong.album.id&&(t.artwork.ofCurrentSong=t.albumsBaseUrl+a.album.id+"/image"):t.artwork.ofCurrentSong=t.albumsBaseUrl+a.album.id+"/image",t.playlist.currentSong=a,t.playlist.currentSongIdx=e,0===t.playlist.songs.length&&(t.playlist.songs[0]=t.playlist.currentSong)},setCurrentSongFavoriteStatus:t=>{t.playlist.currentSong.favorite=!t.playlist.currentSong.favorite},setShowMiniPlayer:(t,e)=>{t.miniPlayer.show=e},setRepeatMode:(t,e)=>{t.playlist.repeat=e}}});s["a"].use(r["a"]);const Ve=[{path:"/",alias:["/home","/index.html"],name:"Home",component:U,meta:{title:"Home"}},{path:"/account/login",name:"LoginView",component:X,meta:{title:"Login"}},{path:"/account/create",name:"SignInView",component:it,meta:{title:"SignIn"}},{path:"/library",name:"LibraryView",component:U,meta:{title:"Library"}},{path:"/library/artists",name:"ArtistsView",component:ut,meta:{title:"Artists"}},{path:"/library/genres",name:"GenresView",component:ht,meta:{title:"Genres"}},{path:"/library/songs",name:"LibrarySongsView",component:M,meta:{title:"Library songs"}},{path:"/library/albums",name:"AlbumsView",component:Dt,props:t=>({artistId:t.query.artistId,genre:t.query.genre}),meta:{title:"Albums"}},{path:"/library/artists/albums/:albumId",name:"AlbumSongsView",component:oe,meta:{title:"Album songs"},props:!0},{path:"/library/player/:songId",name:"PlayerView",component:Se,meta:{title:"Player"},props:!0}],Ae=new r["a"]({routes:Ve});var _e=Ae,Ie=a("342d"),$e=a.n(Ie),ke=(a("5363"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"grey lighten-4"},[a("NavToolbarView"),a("v-main",[a("v-container",[a("Audio"),a("v-row",{staticClass:"pt-10"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("router-view")],1)],1)],1)],1),a("transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.miniPlayer.show,expression:"this.$store.state.miniPlayer.show"}]},[a("MiniPlayerView")],1)])],1)}),Te=[],Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("audio",{attrs:{id:"audio-player",autoplay:""},on:{loadedmetadata:function(e){return t.onAudioLoadedMetadata()},timeupdate:function(e){return t.onAudioTimeUpdate()},ended:function(e){return t.onAudioEnded()},play:function(e){return t.onAudioPlay()},pause:function(e){return t.onAudioPause()}}},[a("source",{attrs:{id:"audio-player-source",src:""}})])])},Ne=[],Fe={name:"Audio",mounted(){this.audioDOMElement=document.getElementById("audio-player"),this.audioSourceDOMElement=document.getElementById("audio-player-source"),this.audioDOMElement.volume=.5},created(){ia.$on("toolbar-player-current-time-changed",t=>{this.$store.commit("setAudioCurrentTime",t),this.audioDOMElement.currentTime=t}),ia.$on("toolbar-player-current-volume-changed",t=>{this.$store.commit("setAudioVolume",t),this.audioDOMElement.volume=t}),ia.$on("player-pause",()=>{this.pause()}),ia.$on("player-resume-play",()=>{this.play()}),ia.$on("play-next-song",()=>{this.loadNextSong()}),ia.$on("play-prev-song",()=>{this.loadPrevSong()}),ia.$on("play-song",t=>{this.loadSingleSong(t)}),ia.$on("play-playlist",t=>{this.loadPlaylist(t.songs,t.startSongIdx,t.shuffle)})},methods:{onAudioPlay(){this.$store.commit("setAudioIsPlaying",!0),ia.$emit("audio-is-playing")},onAudioPause(){this.$store.commit("setAudioIsPlaying",!1)},onAudioEnded(){ia.$emit("playback-song-ended",this.$store.state.playlist.currentSong.id),this.loadNextSong()},onAudioTimeUpdate(){this.$store.commit("setAudioCurrentTime",this.audioDOMElement.currentTime)},onAudioLoadedMetadata(){this.$store.commit("setAudioProperties",this.getMetadata())},loadPlaylist(t,e,a){this.$store.commit("setPlaylist",{playlistId:t[e].album.id,shuffle:a,songs:t,startSongIdx:e}),this.loadAudio()},loadSingleSong(t){this.$store.commit("setCurrentSong",t),this.loadAudio()},loadNextSong(){this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),this.loadAudio())},loadPrevSong(){this.$store.getters.hasPrevSong&&(this.$store.commit("setCurrentSongToPrev"),this.loadAudio())},loadAudio(){let t=this.$store.state.playlist.currentSong;this.audioSourceDOMElement.src=p.getBaseUrl()+"/audio/open/?songId="+t.id,this.audioDOMElement.load(),ia.$emit("song-is-ready-to-play")},play(){this.audioDOMElement.play()},pause(){this.audioDOMElement.pause()},getMetadata(){return{paused:this.audioDOMElement.paused,volume:this.audioDOMElement.volume,currentTime:this.audioDOMElement.currentTime,duration:parseInt(this.audioDOMElement.duration,10)}}}},Le=Fe,Oe=Object(y["a"])(Le,Pe,Ne,!1,null,null,null),Ee=Oe.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{dense:"",color:"blue-grey lighten-3",fixed:"",flat:"",elevation:"0"}},["LibraryView"===this.$route.name?a("v-app-bar-nav-icon",{on:{click:function(e){return t.routerGoHome()}}}):a("div",{staticClass:"pl-0 text-left"},[a("v-btn",{attrs:{plain:""},on:{click:function(e){return t.routerGoBack()}}},[a("v-icon",[t._v("mdi-arrow-left")])],1)],1),a("v-toolbar-title",[a("v-btn",{staticClass:"text-capitalize",attrs:{plain:"",color:"white",disabled:"LibraryView"===this.$route.name},on:{click:function(e){return t.routerGoHome()}}},[t._v("Playqd")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-account")])],1)],1)},Me=[],Re={name:"NavToolbarView",mounted(){ia.$on("playback-song-ended",t=>{p.updateSongHistory(t)})},methods:{routerGoHome(){"LibraryView"!==this.$route.name&&this.$router.push({name:"LibraryView"})},routerGoBack(){this.$router.back()}}},Ge=Re,Be=a("40dc"),Ue=a("5bc1"),qe=Object(y["a"])(Ge,De,Me,!1,null,null,null),je=qe.exports;x()(qe,{VAppBar:Be["a"],VAppBarNavIcon:Ue["a"],VBtn:S["a"],VIcon:V["a"],VSpacer:kt["a"],VToolbarTitle:Jt["b"]});var He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.$store.state.playlist.currentSong?a("v-app-bar",{attrs:{fixed:"",bottom:"",flat:"",color:"grey lighten-3"}},[a("div",{staticClass:"py-2 pr-3"},[a("v-img",{attrs:{"max-height":"50px","max-width":"50px",src:this.$store.state.artwork.ofCurrentSong}})],1),a("v-toolbar-title",{staticClass:"hidden-md-and-up",on:{click:function(e){return t.openPlayerView()}}},[a("div",{staticClass:"caption px-2 text-left text-truncate"},[t._v(" "+t._s(this.$store.state.playlist.currentSong.name)+" ")]),a("div",{staticClass:"caption px-2 text-left text-truncate text--disabled"},[a("small",[t._v(t._s(this.$store.state.playlist.currentSong.artist.name))])])]),a("v-toolbar-title",{staticClass:"hidden-sm-and-down text-left px-5",staticStyle:{width:"90%"}},[a("div",{staticClass:"px-2"},[a("v-btn",{staticClass:"pl-0 pt-2 text-capitalize",attrs:{link:"",plain:""},on:{click:function(e){return t.openPlayerView()}}},[t._v(" "+t._s(this.$store.state.playlist.currentSong.artist.name+" - "+this.$store.state.playlist.currentSong.name)+" ")])],1),a("div",[a("v-slider",{staticClass:"toolbar-player-slider",attrs:{dense:"","inverse-label":"","thumb-color":"black","track-color":"grey","track-fill-color":"black",min:"0","tick-size":"1",step:"0.001",messages:" ",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",{staticClass:"caption text--secondary"},[t._v(" "+t._s(t.SONG_DURATION.convertSecondsToMinutesAndSeconds(t.$store.state.audio.currentTimeAsInt)+" / "+t.SONG_DURATION.convertSecondsToMinutesAndSeconds(t.$store.state.audio.duration))+" ")])]},proxy:!0},{key:"message",fn:function(){return[a("div",{staticClass:"pl-2 pt-0 pb-2"},[t._v(" "+t._s(t.$store.state.playlist.currentSong.fileExtension)+" | "+t._s(t.$store.state.playlist.currentSong.audioBitRate)+" kbps | "+t._s(t.$store.state.playlist.currentSong.audioSampleRate)+" Hz ")])]},proxy:!0}],null,!1,721997374),model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)]),a("v-spacer"),a("v-toolbar-items",{staticClass:"pl-5",attrs:{align:"right"}},[a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playPrev()}}},[a("v-icon",[t._v("mdi-rewind")])],1),this.$store.state.audio.isPlaying?a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.pause()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-pause")])],1):a("v-btn",{staticClass:"px-5",attrs:{icon:""},on:{click:function(e){return t.resumePlay()}}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-play")])],1),a("v-btn",{staticClass:"px-5",attrs:{icon:"",small:""},on:{click:function(e){return t.playNext()}}},[a("v-icon",[t._v("mdi-fast-forward")])],1),a("v-spacer"),a("v-btn",{staticClass:"hidden-sm-and-down px-5",attrs:{icon:"","x-small":""}},[a("v-icon",{attrs:{color:t.$store.state.playlist.shuffle?"red":"grey darken-1"}},[t._v("mdi-shuffle-variant")])],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:"","x-small":""}},[a("v-icon",[t._v("mdi-repeat")])],1),a("v-spacer"),a("v-menu",{attrs:{top:"","close-on-content-click":!1,"offset-y":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"hidden-sm-and-down",attrs:{icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{color:t.volumeIcon.color}},[t._v(t._s(t.volumeIcon.name))])],1)]}}],null,!1,3339467886)},[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-slider",{attrs:{vertical:"",min:"0.0",max:"1.0",step:"0.01"},on:{change:function(e){return t.changeAudioCurrentVolume()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-icon",{on:{click:function(e){return t.mute()}}},[t._v("mdi-volume-mute")])]},proxy:!0},{key:"append",fn:function(){return[a("v-icon",[t._v("mdi-volume-high")])]},proxy:!0}],null,!1,2181639092),model:{value:t.slider.audioVolume=t.$store.state.audio.volume,callback:function(e){t.$set(t.slider.audioVolume=t.$store.state.audio,"volume",e)},expression:"slider.audioVolume = $store.state.audio.volume"}})],1)],1)],1)],1),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:""},on:{click:function(e){return t.updateFavoriteStatus()}}},[this.$store.state.playlist.currentSong.favorite?a("v-icon",{attrs:{color:"yellow darken-3"}},[t._v("mdi-star")]):a("v-icon",[t._v("mdi-star-outline")])],1)],1)],1):t._e()},ze=[],We={name:"MiniPlayerView",components:{},data(){return{SONG_DURATION:g,volumeIcon:{color:"grey darken-1",name:"mdi-volume-high"},slider:{audioTime:0,audioVolume:.5}}},methods:{playNext(){ia.$emit("play-next-song")},playPrev(){ia.$emit("play-prev-song")},resumePlay(){ia.$emit("player-resume-play")},pause(){ia.$emit("player-pause")},mute(){this.slider.audioVolume=0,this.volumeIcon.color="red",this.volumeIcon.name="mdi-volume-off",this.changeAudioCurrentVolume()},changeAudioCurrentTime(){ia.$emit("toolbar-player-current-time-changed",this.slider.audioTime)},changeAudioCurrentVolume(){this.slider.audioVolume>0&&(this.volumeIcon.color="grey darken-1",this.volumeIcon.name="mdi-volume-high"),ia.$emit("toolbar-player-current-volume-changed",this.slider.audioVolume)},updateFavoriteStatus(){p.setSongFavoriteStatus(this.$store.state.playlist.currentSong.id).then(t=>{this.$store.commit("setCurrentSongFavoriteStatus")})},openPlayerView(){this.$router.push({name:"PlayerView",params:{songId:this.$store.state.playlist.currentSong.id,playerSong:this.$store.state.playlist.currentSong}})}}},Ye=We,Je=(a("cd3d"),Object(y["a"])(Ye,He,ze,!1,null,null,null)),Ke=Je.exports;x()(Je,{VAppBar:Be["a"],VBtn:S["a"],VIcon:V["a"],VImg:A["a"],VList:_["a"],VListItem:I["a"],VListItemContent:k["b"],VMenu:F["a"],VSlider:fe["a"],VSpacer:kt["a"],VToolbarItems:Jt["a"],VToolbarTitle:Jt["b"]});var Qe={name:"App",store:Ce,components:{Audio:Ee,NavToolbarView:je,MiniPlayerView:Ke},created(){ia.$on("song-is-ready-to-play",()=>{this.appTitle.inner=this.$store.state.playlist.currentSong.artist.name,this.appTitle.complement=this.$store.state.playlist.currentSong.name,this.$emit("updateHead");let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=this.$store.state.artwork.ofCurrentSong})},data(){return{appTitle:{inner:"Playqd",complement:"local music player"}}},head:{title(){return{complement:this.appTitle.complement,inner:this.appTitle.inner,separator:" - "}}}},Xe=Qe,Ze=a("7496"),ta=a("a523"),ea=a("f6c4"),aa=Object(y["a"])(Xe,ke,Te,!1,null,null,null),sa=aa.exports;x()(aa,{VApp:Ze["a"],VCol:w["a"],VContainer:ta["a"],VMain:ea["a"],VRow:O["a"]});a("a766");s["a"].config.productionTip=!1,s["a"].use($e.a),s["a"].use(i["a"]);const ia=new s["a"];new s["a"]({router:_e,vuetify:new i["a"]({icons:{iconfont:"mdi"}}),render:t=>t(sa)}).$mount("#app")},"5eef":function(t,e,a){t.exports=a.p+"img/default-album-cover.ba53da3b.png"},6045:function(t,e,a){"use strict";a("ab9c")},a766:function(t,e,a){},ab9c:function(t,e,a){},cd3d:function(t,e,a){"use strict";a("1e0b")}});
//# sourceMappingURL=app.dd218ab8.js.map