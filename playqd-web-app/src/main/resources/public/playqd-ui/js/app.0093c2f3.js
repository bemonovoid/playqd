(function(t){function e(e){for(var s,r,o=e[0],l=e[1],u=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/playqd/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return ha}));var s=a("2b0e"),i=a("f309"),n=a("8c4f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{attrs:{align:"left"}},[a("v-subheader",[a("h1",[t._v("Library")])]),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.items,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.showItem(e.viewName)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1)})),1)],1)],1)],1)},o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0 px-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"display-1"},[t._v("Songs")]),a("v-list-item-subtitle",{staticClass:"text-caption text--disabled"},[t._v(" Total: "+t._s(t.pagination.totalElements)+" ")])],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}])},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Sort songs")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedSortType.idx,callback:function(e){t.$set(t.selectedSortType,"idx",e)},expression:"selectedSortType.idx"}},t._l(t.sorting.types,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.sortSongs(e)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-icon",[a("v-icon",{attrs:{right:""}},[t._v(t._s(e.icon))])],1)],1)})),1)],1)],1)],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:""}},[t._v("mdi-filter-menu-outline")])],1)]}}])},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Filter songs")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedSortType.idx,callback:function(e){t.$set(t.selectedSortType,"idx",e)},expression:"selectedSortType.idx"}},t._l(t.filters.general,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.sortSongs(e)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-icon",[a("v-icon",{attrs:{right:""}},[t._v(t._s(e.icon))])],1)],1)})),1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0 px-0 text-left"},[a("v-list-item",[a("v-list-item-content",{staticClass:"py-0"},[a("v-text-field",{attrs:{flat:"",dense:"",clearable:"",placeholder:"Find in songs","prepend-inner-icon":"mdi-text-short","append-outer-icon":"mdi-magnify"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findSongsByName()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearInput()}],"click:clear":function(e){return t.clearInput()},"click:append-outer":function(e){return t.findSongsByName()}},model:{value:t.songsNameQuery,callback:function(e){t.songsNameQuery=e},expression:"songsNameQuery"}})],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("SongsListView",{attrs:{"songs-data":this.songs,"library-list":!0},on:{"update:songsData":function(e){return t.$set(this,"songs",e)},"update:songs-data":function(e){return t.$set(this,"songs",e)}}})],1)],1),a("v-row",[a("v-col",[a("v-pagination",{attrs:{"total-visible":5,length:t.pagination.totalPages},on:{next:t.nextPage,previous:t.prevPage,input:t.selectPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},u=[],c=a("bc3a"),d=a.n(c),m=a("2f62");s["a"].use(m["a"]);var p=new m["a"].Store({state:{loginSuccess:!1,authToken:null,audio:{isPlaying:!1,volume:.5,currentTime:0,currentTimeAsInt:0,duration:0},playlist:{id:null,shuffle:!1,repeat:"none",loopAll:!1,loopCurrent:!1,currentSong:null,currentSongIdx:-1,songs:[]},miniPlayer:{show:!0}},getters:{getResourceBaseUrl:t=>"/playqd/resource/",isLoggedIn:t=>t.loginSuccess,repeatAll:t=>"all"===t.playlist.repeat,hasNextSong:(t,e)=>e.repeatAll||t.playlist.currentSongIdx+1<t.playlist.songs.length,hasPrevSong:t=>t.playlist.currentSongIdx-1>=0,getNextSong:(t,e)=>e.hasNextSong?t.playlist.currentSongIdx+1===t.playlist.songs.length&&e.repeatAll?t.playlist.songs[0]:t.playlist.songs[t.playlist.currentSongIdx+1]:null,getPrevSong:(t,e)=>e.hasPrevSong?t.playlist.songs[t.playlist.currentSongIdx-1]:null,getCurrentSongDurationInMinutesAndSeconds:t=>{let e=t.audio.duration;return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},audioIsPlaying:t=>t.audio.isPlaying},mutations:{setUserAuthToken:(t,e)=>{t.loginSuccess=!0,t.authToken=e},setAudioCurrentTime:(t,e)=>{t.audio.currentTime=e,t.audio.currentTimeAsInt=parseInt(e,10)},setAudioProperties:(t,e)=>{t.audio.paused=e.paused,t.audio.volume=e.volume,t.audio.currentTime=e.currentTime,t.audio.currentTimeAsInt=parseInt(e.currentTime,10),t.audio.duration=e.duration},setAudioIsPlaying:(t,e)=>{t.audio.isPlaying=e},setAudioVolume:(t,e)=>{t.audio.volume=e},setPlaylist:(t,e)=>{t.playlist.id=e.playlistId,t.playlist.shuffle=e.shuffle,t.playlist.currentSong=e.songs[e.startSongIdx],t.playlist.currentSongIdx=e.startSongIdx,t.playlist.songs=e.songs},setCurrentSongToPrev:t=>{if(t.playlist.currentSongIdx-1>=0){let e=t.playlist.songs[--t.playlist.currentSongIdx];t.playlist.currentSong=e}},setCurrentSongToNext:t=>{let e=null;if(t.playlist.currentSongIdx+1<t.playlist.songs.length)e=t.playlist.songs[++t.playlist.currentSongIdx];else{if("all"!==t.playlist.repeat)return;e=t.playlist.songs[0]}t.playlist.currentSong=e},updateCurrentSong:(t,e)=>{t.playlist.currentSong=e},setCurrentSongFavoriteStatus:t=>{t.playlist.currentSong.favorite=!t.playlist.currentSong.favorite},setShowMiniPlayer:(t,e)=>{t.miniPlayer.show=e},setRepeatMode:(t,e)=>{t.playlist.repeat=e}}});const g=d.a.create({baseURL:"/playqd"});var v={getBaseUrl(){return g.defaults.baseURL},getResourceApiUrl(){return this.getBaseUrl()+"/resource/"},getAlbumsApiUrl(){return this.getBaseUrl()+"/api/library/albums/"},getSongSrcUrl(t){return this.getResourceApiUrl()+"audio/"+t},getArtistImageSrc(t){return this.executeGet("/api/library/artists/"+t+"/image/src")},getAlbumImageSrc(t){return this.executeGet("/api/library/albums/"+t+"/image/src")},getAllBasicArtists(){return this.executeGet("/api/library/artists/view/basic")},getArtists(t){let e="/api/library/artists/?page="+(0===t.page?0:t.page-1)+"&size="+t.pageSize+"&sortBy="+t.sort.id+"&direction="+t.sort.direction;return t.name&&t.name.length>0&&(e+="&name="+t.name),this.executeGet(e)},getAlbums(t){let e="/api/library/albums/?page="+(0===t.page?0:t.page-1)+"&size="+t.pageSize;return t.sort&&(e+="&sortBy="+t.sort.id+"&direction="+t.sort.direction),t.artistId&&(e+="&artistId="+t.artistId),t.name&&t.name.length>0?e+="&name="+t.name:t.genre&&t.genre.length>0&&(e+="&genre="+t.genre),this.executeGet(e)},getGenres(t){let e="/api/library/genres/?page="+(0===t.page?0:t.page-1)+"&size=10&direction=ASC";return t.name&&t.name.length>0&&(e+="&name="+t.name),this.executeGet(e)},getSongs(t){let e="/api/library/songs/?page="+(0===t.page?0:t.page-1)+"&size="+t.pageSize;return t.sort&&(e+="&sortBy="+t.sort.id+"&direction="+t.sort.direction),t.name&&t.name.length>0&&(e+="&name="+t.name),t.albumId&&(e+="&albumId="+t.albumId),t.format&&(e+="&format="+t.format),this.executeGet(e)},getAlbumSongs(t,e){let a="/api/library/songs/album/"+t+"/?sortBy=TRACK_ID";return e&&(a+="&format="+e),this.executeGet(a)},getArtistSongs(t){return this.executeGet("/api/library/songs/artist/"+t)},getAlbumSongsFormats(t){return this.executeGet("/api/library/songs/album/"+t+"/formats")},getSong(t){return this.executeGet("/api/library/songs/"+t)},getLibrarySettings(){return this.executeGet("/api/settings/library")},updateArtist(t){return this.executePut("/api/library/artists/"+t.id,t)},moveArtist(t){return this.executePut("/api/library/artists/moved",t)},updateAlbumProperties(t){return this.executePut("/api/library/albums/"+t.id,t)},moveAlbum(t){return this.executePut("/api/library/albums/moved",t)},setSongFavoriteStatus(t){return t.favorite?this.unsetFavorite(t.id):this.setFavorite(t.id)},setFavorite(t){return this.executePut("/api/library/songs/"+t+"/favorite")},unsetFavorite(t){return this.executeDelete("/api/library/songs/"+t+"/favorite")},updateSong(t){return this.executePut("/api/library/songs/"+t.id,t)},moveSong(t){return this.executePut("/api/library/songs/"+t.songId+"/moved",t)},updatePlayedSongCount(t){return this.executePut("/api/library/songs/"+t+"/played")},createAccount(t){return this.executePost("/api/accounts",t)},login(t){return g.post("/login",{},{auth:t})},saveLibrarySettings(t){return this.executePut("/api/settings/library",t)},rescanLibrary(t){return this.executePatch("/api/settings/library",t)},executeGet(t){return g.get(t,this.authTokenHeader()).catch(t=>{this.handlerUnauthorizedResponse(t)})},executePatch(t,e){return g.patch(t,e,this.authTokenHeader()).catch(t=>{this.handlerUnauthorizedResponse(t)})},executePut(t,e){return g.put(t,e,this.authTokenHeader()).catch(t=>{this.handlerUnauthorizedResponse(t)})},executePost(t,e){return g.post(t,e,this.authTokenHeader()).catch(t=>{this.handlerUnauthorizedResponse(t)})},executeDelete(t){return g.delete(t,this.authTokenHeader()).catch(t=>{this.handlerUnauthorizedResponse(t)})},handlerUnauthorizedResponse(t){t.response&&401===t.response.status&&De.push({name:"LoginView"})},authTokenHeader(){return p.state.authToken?{headers:{Authorization:"Bearer "+p.state.authToken}}:null}},h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-list",{staticClass:"py-0",attrs:{dense:"","two-line":""}},[s("v-list-item-group",{attrs:{color:"error"},model:{value:t.selectedSongIdx,callback:function(e){t.selectedSongIdx=e},expression:"selectedSongIdx"}},[t._l(t.songsData,(function(e,i){return[s("v-list-item",{staticClass:"px-1",on:{click:function(e){return t.playSong(i)}}},[t.libraryList?s("v-list-item-avatar",{staticClass:"ml-0 mr-2"},[t.songAlbumsWithImageNotFound.includes(e.album.id)?s("v-img",{attrs:{src:a("5eef")}}):s("v-img",{attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+e.album.id+"?target=ALBUM",alt:"alt"},on:{error:function(a){return t.imageError(e.album.id)}}})],1):s("v-list-item-icon",{staticClass:"py-0 mr-1"},[t.isPlayingSongRow(i,e.id)?s("div",[s("v-icon",[t._v("mdi-music-circle-outline mdi-spin")])],1):s("div",{staticClass:"pt-2 text--disabled text-right"},[s("span",[t._v(t._s(i+1))])])]),s("v-list-item-content",{staticClass:"text-left"},[s("v-list-item-title",{staticClass:"text-body-1"},[t._v(" "+t._s(e.name)+" ")]),s("v-list-item-subtitle",{staticClass:"text--secondary"},[t._v(t._s(e.artist.name))]),s("v-list-item-subtitle",[s("small",[t._v(" "+t._s(e.fileExtension)+" | "+t._s(e.audioBitRate)+" kbps | "+t._s(e.audioSampleRate)+" Hz ")])])],1),s("v-list-item-action",[s("v-list-item-action-text",[t.isPlayingSongRow(i,e.id)?s("div",{staticClass:"subtitle-2 text-no-wrap"},[t._v(" - "+t._s(t.playlistUtils.secondsToHHmmss(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")]):s("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.playlistUtils.secondsToHHmmss(e.duration))+" ")])]),s("v-icon",{attrs:{small:"",color:!0===e.favorite?"yellow darken-3":""},domProps:{textContent:t._s(!0===e.favorite?"mdi-star":"mdi-star-outline")}})],1)],1),s("v-divider")]}))],2)],1)},b=[],f={shufflePlaylist(t){for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[a],t[a]=s}},secondsToHHmmss(t){let e=~~(t/3600),a=~~(t%3600/60),s=~~t%60,i="";return e>0&&(i+=e+":"+(a<10?"0":"")),i+=a+":"+(s<10?"0":""),i+=""+s,i},secondsToHHmmText(t){let e=~~(t/3600),a=~~(t%3600/60),s=a>1?"minutes":"minute",i=a+" "+s;if(e>0){let t=e>1?"hours":"hour";i=e+" "+t+" "+i}return i}},y={name:"SongsListView",props:["songsData","libraryList","artistList","albumList"],data(){return{playlistUtils:f,songAlbumsWithImageNotFound:[],selectedSongIdx:null}},mounted(){ha.$on("audio-is-playing",()=>{this.setPlayingSongSelected()})},methods:{isPlayingSongRow(t,e){return this.$store.state.playlist.currentSong&&this.$store.state.playlist.currentSong.id===e&&t===this.selectedSongIdx},setPlayingSongSelected(){this.selectedSongIdx=this.songsData.findIndex(t=>t.id===this.$store.state.playlist.currentSong.id)},playSong(t){ha.$emit("play-playlist",{songs:this.songsData,startSongIdx:t,shuffle:!1})},imageError(t){this.songAlbumsWithImageNotFound.push(t)}}},x=y,S=a("2877"),A=a("6544"),V=a.n(A),_=a("ce7e"),I=a("132d"),w=a("adda"),C=a("8860"),T=a("da13"),k=a("1800"),P=a("5d23"),$=a("8270"),L=a("1baa"),E=a("34c3"),R=Object(S["a"])(x,h,b,!1,null,"252c1ab4",null),N=R.exports;V()(R,{VDivider:_["a"],VIcon:I["a"],VImg:w["a"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemActionText:P["a"],VListItemAvatar:$["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemIcon:E["a"],VListItemSubtitle:P["c"],VListItemTitle:P["d"]});var D={name:"LibrarySongsView",components:{SongsListView:N},data(){return{filters:{general:[{id:"FAVORITES",idx:1,name:"Favorites",direction:"ASC",icon:"mdi-star-outline"},{id:"RECENTLY_ADDED",idx:2,name:"Recently Added",direction:"ASC",icon:"mdi-sort-clock-ascending-outline"},{id:"RECENTLY_PLAYED",idx:3,name:"Recently Played",direction:"DESC",icon:"mdi-sort-clock-ascending-outline"}],format:["flac","m4a","mp3","ogg","wav","wma"],formatSelected:null},sorting:{types:[{id:"NAME",idx:0,name:"Name",direction:"ASC",icon:"mdi-sort-alphabetical-ascending"},{id:"MOST_PLAYED",idx:4,name:"Most played",direction:"DESC",icon:"mdi-sort-ascending"}]},songsNameQuery:null,songs:[],pagination:{page:1,pageSize:6,totalElements:0,totalPages:0},selectedSortType:{},defaultPageRequest:{}}},mounted(){this.selectedSortType=this.sorting.types[0],this.defaultPageRequest={page:0,sort:this.sorting.types[0]},this.findSongs(this.createPageRequest(this.defaultPageRequest.page,this.defaultPageRequest.sort))},methods:{findSongs(t){v.getSongs(t).then(t=>{this.songs=t.data.songs,this.pagination={page:t.data.page+1,pageSize:t.data.pageSize,totalElements:t.data.totalElements,totalPages:t.data.totalPages}})},findSongsByName(){this.songsNameQuery&&this.songsNameQuery.length>0&&(this.selectedSortType=this.sorting.types[0],this.findSongs(this.createPageRequest(1)))},clearInput(){this.songsNameQuery=null,this.findSongs(this.createPageRequest(this.defaultPageRequest.page,this.defaultPageRequest.sort))},sortSongs(t){this.selectedSortType=t,this.findSongs(this.createPageRequest(1))},nextPage(){this.findSongs(this.createPageRequest(this.pagination.page))},prevPage(){this.findSongs(this.createPageRequest(this.pagination.page))},selectPage(t){this.findSongs(this.createPageRequest(t))},createPageRequest(t,e){return{page:t,pageSize:6,sort:e||this.selectedSortType,name:this.songsNameQuery}}}},B=D,F=a("8336"),q=a("62ad"),M=a("e449"),U=a("891e"),O=a("0fd9"),z=a("e0c7"),G=a("8654"),H=Object(S["a"])(B,l,u,!1,null,"5c56f08c",null),Q=H.exports;V()(H,{VBtn:F["a"],VCol:q["a"],VIcon:I["a"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemIcon:E["a"],VListItemSubtitle:P["c"],VListItemTitle:P["d"],VMenu:M["a"],VPagination:U["a"],VRow:O["a"],VSubheader:z["a"],VTextField:G["a"]});var j={name:"LibraryView",components:{LibrarySongsView:Q},data(){return{items:[{title:"Artists",icon:"mdi-account-music",viewName:"ArtistsView"},{title:"Albums",icon:"mdi-playlist-music-outline",viewName:"AlbumsView"},{title:"Songs",icon:"mdi-music-note",viewName:"LibrarySongsView"},{title:"Genres",icon:"mdi-guitar-electric",viewName:"GenresView"}]}},methods:{showItem(t){this.$router.push({name:t})}}},W=j,Y=Object(S["a"])(W,r,o,!1,null,null,null),J=Y.exports;V()(Y,{VCol:q["a"],VIcon:I["a"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemIcon:E["a"],VListItemTitle:P["d"],VRow:O["a"],VSubheader:z["a"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",{attrs:{elevation:"2"}},[a("v-card-title",[t._v("Login")]),a("v-card-text",[a("v-form",[a("v-item-group",[a("v-text-field",{attrs:{label:"Account name",placeholder:"Account name",required:""},model:{value:t.account.username,callback:function(e){t.$set(t.account,"username",e)},expression:"account.username"}}),a("v-text-field",{attrs:{label:"Password",placeholder:"Password",required:"",autocomplete:"off",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()},"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password",e)},expression:"account.password"}})],1)],1)],1),a("v-card-actions",{staticClass:"justify-space-between"},[a("v-btn",{staticClass:"text-capitalize",attrs:{color:"blue-grey lighten-3"},on:{click:function(e){return t.login()}}},[t._v(" Login ")])],1)],1)],1)],1)},X=[],Z={name:"LoginView",data(){return{showPassword:!1,account:{username:"",password:""}}},methods:{login(){v.login(this.account).then(t=>{this.$store.commit("setUserAuthToken",t.data.authToken),this.$router.push({name:"LibraryView"})})}}},tt=Z,et=a("b0af"),at=a("99d9"),st=a("4bd4"),it=a("604c"),nt=Object(S["a"])(tt,K,X,!1,null,null,null),rt=nt.exports;V()(nt,{VBtn:F["a"],VCard:et["a"],VCardActions:at["a"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VForm:st["a"],VItemGroup:it["b"],VRow:O["a"],VTextField:G["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0 px-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"display-1"},[t._v("Artists")]),a("v-list-item-subtitle",{staticClass:"text-caption text--disabled"},[t._v(" Total: "+t._s(t.pagination.totalElements)+" ")])],1),a("v-list-item-action",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.attrs,i=e.on;return[a("v-btn",t._g(t._b({attrs:{fab:"",small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}])},[a("v-list",{staticClass:"text-left",attrs:{dense:""}},[a("v-subheader",[t._v("Sort artists")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedSortType.idx,callback:function(e){t.$set(t.selectedSortType,"idx",e)},expression:"selectedSortType.idx"}},t._l(t.sorting.types,(function(e,s){return a("v-list-item",{key:s,on:{click:function(a){return t.sortArtists(e)}}},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-icon",[a("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(e.icon))])],1)],1)})),1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("v-item-group",{staticClass:"py-0",attrs:{align:"left"}},[a("v-text-field",{attrs:{flat:"",dense:"",clearable:"",placeholder:"Find in artists","prepend-inner-icon":"mdi-text-short","append-outer-icon":"mdi-magnify"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findArtistsByName()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearInput()}],"click:clear":function(e){return t.clearInput()},"click:append-outer":function(e){return t.findArtistsByName()}},model:{value:t.artistNameQuery,callback:function(e){t.artistNameQuery=e},expression:"artistNameQuery"}})],1),a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.artists,(function(e,s){return a("v-list-item",{key:s,staticClass:"px-0",attrs:{to:{name:"AlbumsView",query:{artistId:e.id}}}},[t.artistsWithImageNotFound.includes(e.id)?a("v-list-item-avatar",{staticClass:"ml-0 mr-2"},[a("v-icon",[t._v("mdi-account-music")])],1):a("v-list-item-avatar",{staticClass:"ml-0 mr-2"},[a("v-img",{attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+e.id+"?target=ARTIST",alt:"alt"},on:{error:function(a){return t.imageError(e.id)}}})],1),a("v-list-item-content",{staticClass:"py-0"},[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),a("v-list-item-subtitle",{staticClass:"text-caption"},[t._v(" "+t._s(t.albumsCountString(e)+", "+t.albumSongsCountString(e))+" ")])],1),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1)})),1)],1)],1)],1),a("v-row",[a("v-col",[a("v-pagination",{attrs:{"total-visible":5,length:t.pagination.totalPages},on:{next:t.nextPage,previous:t.prevPage,input:t.selectPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},lt=[],ut={name:"ArtistsView",components:{},data(){return{artistsWithImageNotFound:[],artistNameQuery:null,artists:[],sorting:{types:[{id:"NAME",idx:0,name:"By Name",direction:"ASC",icon:"mdi-sort-alphabetical-ascending"},{id:"RECENTLY_PLAYED",idx:1,name:"Recently Played",direction:"DESC",icon:"mdi-sort-clock-ascending-outline"},{id:"MOST_PLAYED",idx:2,name:"Most Played",direction:"DESC",icon:"mdi-sort-ascending"},{id:"ALBUM_COUNT",idx:3,name:"Total Albums",direction:"DESC",icon:"mdi-folder-music-outline"},{id:"SONG_COUNT",idx:4,name:"Total Songs",direction:"DESC",icon:"mdi-music-box-multiple-outline"}]},pagination:{page:1,pageSize:9,totalElements:0,totalPages:0},selectedSortType:{},defaultPageRequest:{}}},mounted(){this.selectedSortType=this.sorting.types[0],this.defaultPageRequest={page:0,sort:this.sorting.types[0]},this.findArtists(this.createPageRequest(this.defaultPageRequest.page,this.defaultPageRequest.sort))},methods:{findArtists(t){v.getArtists(t).then(t=>{this.artists=t.data.artists,this.pagination={page:t.data.page+1,pageSize:t.data.pageSize,totalElements:t.data.totalElements,totalPages:t.data.totalPages}})},findArtistsByName(){this.artistNameQuery&&this.artistNameQuery.length>0&&(this.selectedSortType=this.sorting.types[0],this.findArtists(this.createPageRequest(1)))},clearInput(){this.artistNameQuery=null,this.findArtists(this.createPageRequest(this.defaultPageRequest.page,this.defaultPageRequest.sort))},sortArtists(t){this.selectedSortType=t,this.findArtists(this.createPageRequest(1))},nextPage(){this.findArtists(this.createPageRequest(this.pagination.page))},prevPage(){this.findArtists(this.createPageRequest(this.pagination.page))},selectPage(t){this.findArtists(this.createPageRequest(t))},createPageRequest(t,e){return{page:t,pageSize:9,sort:e||this.selectedSortType,name:this.artistNameQuery}},albumsCountString(t){return t.albumCount>1?t.albumCount+" albums":t.albumCount+" album"},albumSongsCountString(t){return t.songCount>1?t.songCount+" songs":t.songCount+" song"},imageError(t){this.artistsWithImageNotFound.push(t)}}},ct=ut,dt=Object(S["a"])(ct,ot,lt,!1,null,null,null),mt=dt.exports;V()(dt,{VBtn:F["a"],VCol:q["a"],VIcon:I["a"],VImg:w["a"],VItemGroup:it["b"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemAvatar:$["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemIcon:E["a"],VListItemSubtitle:P["c"],VListItemTitle:P["d"],VMenu:M["a"],VPagination:U["a"],VRow:O["a"],VSubheader:z["a"],VTextField:G["a"]});var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{staticClass:"py-0 pl-0 text-left"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-content",{staticClass:"display-1"},[t._v("Genres")])],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-0"},[a("v-list",{staticClass:"py-0",attrs:{align:"left"}},[a("v-item-group",{staticClass:"py-0",attrs:{align:"left"}},[a("v-text-field",{attrs:{flat:"",dense:"",clearable:"",placeholder:"Find in genres","prepend-inner-icon":"mdi-text-short","append-outer-icon":"mdi-magnify"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findGenreByName()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearInput()}],"click:clear":function(e){return t.clearInput()},"click:append-outer":function(e){return t.findGenreByName()}},model:{value:t.genreNameQuery,callback:function(e){t.genreNameQuery=e},expression:"genreNameQuery"}})],1),t._l(t.genres,(function(e,s){return a("div",[a("v-list-item",{staticClass:"px-0",on:{click:function(a){return t.showAlbumsByGenre(e)}}},[a("v-list-item-content",[t._v(t._s(e))]),a("v-list-item-action",[a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-right")])],1)],1),a("v-divider")],1)}))],2)],1)],1),a("v-row",[a("v-col",[a("v-pagination",{attrs:{"total-visible":5,length:t.pagination.totalPages},on:{next:t.nextPage,previous:t.prevPage,input:t.selectPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},gt=[],vt={name:"GenresView",data(){return{genreNameQuery:null,genres:null,pagination:{page:1,pageSize:10,totalElements:0,totalPages:0},defaultPageRequest:{page:1}}},mounted(){this.findGenres(this.defaultPageRequest)},methods:{findGenres(t){v.getGenres(t).then(t=>{this.genres=t.data.genres,this.pagination={page:t.data.page+1,pageSize:t.data.pageSize,totalElements:t.data.totalElements,totalPages:t.data.totalPages}})},findGenreByName(){this.genreNameQuery&&this.genreNameQuery.length>0&&this.findGenres({page:1,name:this.genreNameQuery})},clearInput(){this.genreNameQuery=null,this.findGenres(this.defaultPageRequest)},nextPage(){this.findGenres({page:this.pagination.page})},prevPage(){this.findGenres({page:this.pagination.page})},selectPage(t){this.findGenres({page:t})},showAlbumsByGenre(t){this.$router.push({name:"AlbumsView",query:{genre:t}})}}},ht=vt,bt=Object(S["a"])(ht,pt,gt,!1,null,null,null),ft=bt.exports;V()(bt,{VCol:q["a"],VDivider:_["a"],VIcon:I["a"],VItemGroup:it["b"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemContent:P["b"],VPagination:U["a"],VRow:O["a"],VTextField:G["a"]});var yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.albums.length>0?s("v-row",[s("v-col",{staticClass:"px-0 py-0 text-left"},[s("v-list-item",[t.$route.query.artistId?s("div",[t.showArtistImage?s("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-list-item-avatar",t._g(t._b({staticClass:"ml-0 mr-2 mb-5"},"v-list-item-avatar",i,!1),a),[s("v-img",{attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.albums[0].artist.id+"?target=ARTIST"},on:{error:function(e){return t.imageError()}}})],1)]}}],null,!1,3586309500)},[s("v-card",{attrs:{align:"center",elevation:"5"}},[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.albums[0].artist.id+"?target=ARTIST&size=LARGE"}},[s("v-card-title",[t._v(t._s(this.albums[0].artist.name))])],1)],1)],1):t._e()],1):t._e(),s("v-list-item-content",[s("v-list-item-title",{staticClass:"display-1"},[t._v(t._s(this.$route.query.artistId?this.albums[0].artist.name:this.$route.query.genre))]),s("v-list-item-subtitle",[t._v("Total "+t._s((this.$route.query.artistId?" artist ":" genre ")+"albums: "+this.pagination.totalElements))])],1),t.$route.query.artistId?s("v-list-item-action",[s("v-btn",{attrs:{fab:"",icon:"",small:""},on:{click:t.openAllAlbums}},[s("v-icon",{attrs:{small:""}},[t._v("mdi-motion-play-outline")])],1)],1):t._e(),s("v-list-item-action",[s("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.attrs,i=e.on;return[s("v-btn",t._g(t._b({attrs:{fab:"",small:"",icon:""}},"v-btn",a,!1),i),[s("v-icon",{attrs:{small:""}},[t._v("mdi-sort")])],1)]}}],null,!1,2741714134)},[s("v-list",{staticClass:"text-left",attrs:{dense:""}},[s("v-subheader",[t._v("Sort albums")]),s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedSortType.idx,callback:function(e){t.$set(t.selectedSortType,"idx",e)},expression:"selectedSortType.idx"}},t._l(t.sorting.types,(function(e,a){return s("v-list-item",{key:a,on:{click:function(a){return t.sortAlbums(e)}}},[s("v-list-item-title",[t._v(t._s(e.name))]),s("v-list-item-icon",[s("v-icon",{attrs:{right:"",small:""}},[t._v(t._s(e.icon))])],1)],1)})),1),s("v-subheader",[t._v("Compare albums")]),s("v-list-item",[s("v-list-item-title",[t._v("Compare all")])],1),s("v-list-item",[s("v-list-item-title",[t._v("Compare missing")])],1)],1)],1)],1),t.$route.query.artistId?s("v-list-item-action",{staticClass:"mx-0"},[s("EditArtistView",{attrs:{"artist-data":t.albums[0].artist,"artist-image-found":t.showArtistImage},on:{close:function(t){},"update:artistImageFound":function(e){t.showArtistImage=e},"update:artist-image-found":function(e){t.showArtistImage=e}}})],1):t._e()],1)],1)],1):t._e(),s("v-row",[s("v-col",{staticClass:"py-0"},[s("v-item-group",{attrs:{align:"left"}},[s("v-text-field",{staticClass:"py-0",attrs:{flat:"",dense:"",clearable:"",placeholder:"Find album","prepend-inner-icon":"mdi-text-short","append-outer-icon":"mdi-magnify"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findAlbumsByName()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearInput()}],"click:clear":function(e){return t.clearInput()},"click:append-outer":function(e){return t.findAlbumsByName()}},model:{value:t.albumNameQuery,callback:function(e){t.albumNameQuery=e},expression:"albumNameQuery"}})],1)],1)],1),s("v-row",{staticClass:"justify-space-around"},t._l(t.albums,(function(e){return s("v-col",{key:e.id,attrs:{cols:6,align:"center",md:"auto"}},[s("v-card",{attrs:{"max-width":"200","max-height":"300"},on:{click:function(a){return t.openAlbum(e)}}},[t.albumsWithoutImage.includes(e.id)?s("div",[s("v-img",{attrs:{src:a("5eef"),gradient:"to bottom, rgba(0, 0, 0, .1), rgba(0, 0, 0 ,.5)"}})],1):s("div",[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+e.id+"?target=ALBUM"},on:{error:function(a){return t.imageError(e.id)}}})],1),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[s("v-card-subtitle",t._g(t._b({staticClass:"py-0 text-left text-truncate text-subtitle-2",domProps:{textContent:t._s(e.name)}},"v-card-subtitle",n,!1),i))]}}],null,!0)},[s("span",[t._v(t._s(e.name))])]),s("v-card-subtitle",{staticClass:"py-0 text-left text-truncate text-caption text--disabled",domProps:{textContent:t._s(e.date?e.date:"----")}})],1)],1)})),1),s("v-row",[s("v-col",[s("v-pagination",{attrs:{"total-visible":5,length:t.pagination.totalPages},on:{next:t.nextPage,previous:t.prevPage,input:t.selectPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},xt=[],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("v-list-item-avatar",[a("v-img",{attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.artist.id+"?target=ARTIST"},on:{error:t.imageError}})],1),a("span",{staticClass:"headline"},[t._v("Edit Artist")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.active=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[a("v-expansion-panels",{attrs:{focusable:"",accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v(" Properties ")]),a("v-expansion-panel-content",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-row",[a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Name","persistent-hint":"",hint:t.artistData.name},model:{value:t.artist.name,callback:function(e){t.$set(t.artist,"name",e)},expression:"artist.name"}})],1),a("v-row",[a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Country code","persistent-hint":"",hint:t.artistData.country,rules:t.editForm.artistCountryRules},model:{value:t.artist.country,callback:function(e){t.$set(t.artist,"country",e)},expression:"artist.country"}})],1),a("v-row",[a("v-list-item",[a("v-list-item-title",{staticClass:"text-left"},[t._v("Update audio file tags")]),a("v-list-item-action",[a("v-switch",{attrs:{dense:"",color:"info","hide-details":""},model:{value:t.artist.updateAudioTags,callback:function(e){t.$set(t.artist,"updateAudioTags",e)},expression:"artist.updateAudioTags"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary"},on:{click:function(e){return t.updateArtistProperties()}}},[t._v(" Save properties ")])],1)],1)],1)],1)],1),a("v-expansion-panel",{on:{change:function(e){return t.getArtists()}}},[a("v-expansion-panel-header",[t._v(" Miscellaneous ")]),a("v-expansion-panel-content",[a("v-row",{staticClass:"pl-3 pt-5",attrs:{align:"center"}},[a("v-autocomplete",{staticClass:"pt-5 pr-3",attrs:{dense:"",label:"Move to existing artist",clearable:"","persistent-hint":"",hint:t.artistData.name,"item-text":"name","item-value":"id",items:this.artists},model:{value:t.moveToArtistId,callback:function(e){t.moveToArtistId=e},expression:"moveToArtistId"}})],1),a("v-row",[a("v-list-item",[a("v-list-item-title",{staticClass:"text-left"},[t._v("Update audio file tags")]),a("v-list-item-action",[a("v-switch",{attrs:{dense:"",color:"info","hide-details":""},model:{value:t.artist.updateAudioTags,callback:function(e){t.$set(t.artist,"updateAudioTags",e)},expression:"artist.updateAudioTags"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary",disabled:!t.moveToArtistId},on:{click:function(e){return t.moveArtist()}}},[t._v("Move")])],1)],1)],1)],1),t.showArtistImage?t._e():a("v-expansion-panel",[a("v-expansion-panel-header",[t._v(" Image ")]),a("v-expansion-panel-content",[a("v-row",[a("v-col",{staticClass:"pt-5"},[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary"},on:{click:function(e){return t.findArtistImage()}}},[t._v("Find artist image")])],1)],1)],1)],1)],1)],1)],1)],1)},At=[],Vt=a("9e0b"),_t=a.n(Vt),It={name:"EditArtistView",props:["artistData","artistImageFound"],components:{countryCodes:_t.a},data(){return{active:!1,editForm:{valid:!1,artistNameRules:[t=>!!t||"Name is required"],artistCountryRules:[t=>t.length<3||"Country code length must be equal 2"]},showArtistImage:!0,artists:[],artist:{id:this.artistData.id,name:this.artistData.name,country:this.artistData.country,updateAudioTags:!0},moveToArtistId:null}},methods:{imageError(){this.showArtistImage=!1},getArtists(){v.getAllBasicArtists().then(t=>{this.artists=t.data.artists.filter(t=>t.id!==this.artistData.id)})},updateArtistProperties(){this.editForm.valid&&v.updateArtist(this.artist).then(t=>{this.active=!1})},moveArtist(){let t={artistIdFrom:this.artistData.id,artistIdTo:this.moveToArtistId,updateAudioTags:this.artist.updateAudioTags};v.moveArtist(t).then(t=>{this.active=!1,this.$router.push({name:"ArtistsView"})})},findArtistImage(){v.getArtistImageSrc(this.artistData.id).then(t=>{this.$emit("update:artistImageFound",!0),this.active=!1})}}},wt=It,Ct=a("c6a6"),Tt=a("169a"),kt=a("cd55"),Pt=a("49e2"),$t=a("c865"),Lt=a("0393"),Et=a("2fa4"),Rt=a("b73d"),Nt=Object(S["a"])(wt,St,At,!1,null,null,null),Dt=Nt.exports;V()(Nt,{VAutocomplete:Ct["a"],VBtn:F["a"],VCard:et["a"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VExpansionPanel:kt["a"],VExpansionPanelContent:Pt["a"],VExpansionPanelHeader:$t["a"],VExpansionPanels:Lt["a"],VForm:st["a"],VIcon:I["a"],VImg:w["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemAvatar:$["a"],VListItemTitle:P["d"],VRow:O["a"],VSpacer:Et["a"],VSwitch:Rt["a"],VTextField:G["a"]});var Bt={name:"AlbumsView",components:{EditArtistView:Dt},data(){return{albumNameQuery:null,showArtistImage:!0,albumsWithoutImage:[],sorting:{types:[{id:"NAME",idx:0,direction:"ASC",name:"Title",icon:"mdi-sort-alphabetical-ascending"},{id:"DATE",idx:1,direction:"DESC",name:"Newest First",icon:"mdi-sort-clock-ascending-outline"},{id:"DATE",idx:2,direction:"ASC",name:"Oldest First",icon:"mdi-sort-ascending"}]},albums:[],pagination:{page:1,pageSize:6,totalElements:0,totalPages:0},selectedSortType:{},defaultPageRequest:{}}},mounted(){this.selectedSortType=this.sorting.types[0],this.defaultPageRequest=this.createPageRequest(1,this.sorting.types[0]),this.findAlbums(this.defaultPageRequest)},methods:{findAlbums(t){v.getAlbums(t).then(t=>{this.albums=t.data.albums,this.pagination={page:t.data.page+1,pageSize:t.data.pageSize,totalElements:t.data.totalElements,totalPages:t.data.totalPages}})},findAlbumsByName(){this.albumNameQuery&&this.albumNameQuery.length>0&&(this.selectedSortType=this.sorting.types[0],this.findAlbums(this.createPageRequest(1)))},clearInput(){this.albumNameQuery=null,this.findAlbums(this.defaultPageRequest)},sortAlbums(t){this.selectedSortType=t,this.findAlbums(this.createPageRequest(1))},nextPage(){this.findAlbums(this.createPageRequest(this.pagination.page))},prevPage(){this.findAlbums(this.createPageRequest(this.pagination.page))},selectPage(t){this.findAlbums(this.createPageRequest(t))},createPageRequest(t,e){return{page:t,pageSize:6,sort:e||this.selectedSortType,name:this.albumNameQuery,artistId:this.$route.query.artistId,genre:this.$route.query.genre}},openAlbum(t){this.$router.push({name:"AlbumSongsView",params:{albumId:t.id,albumData:t,albumFrom:this.$route.query.artistId?"artist":"genre"}})},openAllAlbums(){this.$router.push({name:"ArtistSongsView",params:{artistId:this.$route.query.artistId,artistData:this.albums[0].artist}})},imageError(t){t?this.albumsWithoutImage.push(t):this.showArtistImage=!1}}},Ft=Bt,qt=a("3a2f"),Mt=Object(S["a"])(Ft,yt,xt,!1,null,null,null),Ut=Mt.exports;V()(Mt,{VBtn:F["a"],VCard:et["a"],VCardSubtitle:at["b"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VIcon:I["a"],VImg:w["a"],VItemGroup:it["b"],VList:C["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemAvatar:$["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemIcon:E["a"],VListItemSubtitle:P["c"],VListItemTitle:P["d"],VMenu:M["a"],VPagination:U["a"],VRow:O["a"],VSubheader:z["a"],VTextField:G["a"],VTooltip:qt["a"]});var Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.songs.length>0?s("div",[s("v-row",[s("v-col",{staticClass:"px-0"},[s("v-card",{attrs:{align:"center",elevation:"0"}},[t.showAlbumImage?s("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-img",t._g(t._b({staticClass:"scoped-album-img elevation-5",attrs:{contain:"",src:t.$store.getters.getResourceBaseUrl+"image/"+t.album.id+"?target=ALBUM"},on:{error:t.imageError}},"v-img",i,!1),a))]}}],null,!1,1307613882)},[s("v-card",{attrs:{align:"center",elevation:"5"}},[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.album.id+"?target=ALBUM"}},[s("v-card-title",[t._v(t._s(this.album.name))])],1)],1)],1):s("div",[s("v-img",{staticClass:"scoped-album-img elevation-5",attrs:{src:a("5eef")}})],1),s("v-card-title",{staticClass:"text-center text-body-1",staticStyle:{display:"inherit"}},[t._v(t._s(t.album.name))]),s("v-card-subtitle",{staticClass:"py-0"},[s("v-btn",{staticClass:"text-capitalize red--text",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{artistId:t.album.artist.id}}}},[t._v(t._s(t.album.artist.name)+" ")])],1),s("v-card-subtitle",{staticClass:"py-0"},[s("v-btn",{staticClass:"text-capitalize",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{genre:t.album.genre}}}},[s("small",[t._v(t._s(t.album.genre?t.album.genre:"")+" "+t._s(t.album.date?" - "+t.album.date:""))])])],1),s("v-card-actions",{staticStyle:{display:"inherit"}},[s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbum(0)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),s("span",{staticClass:"text-capitalize"},[t._v("Play")])],1),s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playAlbumShuffled()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-shuffle-variant")]),s("span",{staticClass:"text-capitalize"},[t._v("Shuffle")])],1)],1),s("v-row",[s("v-col",{staticClass:"pl-6 pt-5 text-left",attrs:{md:"auto"}},[s("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.album.totalTime)+" ")])]),s("v-spacer"),s("v-btn-toggle",{model:{value:t.formatToggleBtn,callback:function(e){t.formatToggleBtn=e},expression:"formatToggleBtn"}},t._l(t.formats,(function(e){return t.formats.length>1?s("v-col",{key:e.index,staticClass:"text-right px-1 pt-5",attrs:{md:"auto"}},[s("v-btn",{staticStyle:{"text-transform":"none"},attrs:{small:"",text:""},on:{click:function(a){return t.filterByFormat(e)}}},[t._v(t._s(e))])],1):t._e()})),1),s("v-col",{staticClass:"text-right",attrs:{md:"auto"}},[s("EditAlbumView",{attrs:{"album-data":t.album,"album-image-found":t.showAlbumImage},on:{"update:albumImageFound":function(e){t.showAlbumImage=e},"update:album-image-found":function(e){t.showAlbumImage=e}}})],1)],1),s("v-card-text",{staticClass:"px-2 pt-0"},[s("v-list",[s("SongsListView",{attrs:{"songs-data":this.songs}})],1)],1)],1)],1)],1)],1):t._e()},zt=[],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("v-list-item-avatar",[a("v-img",{attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.albumData.id+"?target=ALBUM"},on:{error:t.imageError}})],1),a("span",{staticClass:"headline"},[t._v("Edit Album")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.active=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[a("v-expansion-panels",{attrs:{focusable:"",accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v(" Properties ")]),a("v-expansion-panel-content",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{dense:"",label:"Album Name","persistent-hint":"",hint:t.albumData.name},model:{value:t.album.name,callback:function(e){t.$set(t.album,"name",e)},expression:"album.name"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Genre","persistent-hint":"",hint:t.albumData.genre},model:{value:t.album.genre,callback:function(e){t.$set(t.album,"genre",e)},expression:"album.genre"}})],1),a("v-col",[a("v-text-field",{staticClass:"pt-5",attrs:{dense:"",label:"Year","persistent-hint":"",hint:t.albumData.date},model:{value:t.album.date,callback:function(e){t.$set(t.album,"date",e)},expression:"album.date"}})],1)],1),a("v-row",[a("v-list-item",[a("v-list-item-title",{staticClass:"text-left"},[t._v("Update audio file tags")]),a("v-list-item-action",[a("v-switch",{attrs:{dense:"",color:"info","hide-details":""},model:{value:t.album.updateAudioTags,callback:function(e){t.$set(t.album,"updateAudioTags",e)},expression:"album.updateAudioTags"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary"},on:{click:function(e){return t.updateAlbumProperties()}}},[t._v(" Save properties ")])],1)],1)],1)],1)],1),a("v-expansion-panel",{on:{change:function(e){return t.getArtistAlbums()}}},[a("v-expansion-panel-header",[t._v(" Miscellaneous ")]),a("v-expansion-panel-content",[a("v-row",{staticClass:"pt-5",attrs:{align:"center"}},[a("v-autocomplete",{staticClass:"pt-5 pr-3 text-left",attrs:{dense:"",label:"Move to existing album",clearable:"","persistent-hint":"",hint:t.albumData.name,"item-text":"name","item-value":"id",items:t.artistAlbums},model:{value:t.moveToAlbumId,callback:function(e){t.moveToAlbumId=e},expression:"moveToAlbumId"}})],1),a("v-row",[a("v-list-item",[a("v-list-item-title",{staticClass:"text-left"},[t._v("Update audio file tags")]),a("v-list-item-action",[a("v-switch",{attrs:{dense:"",color:"info","hide-details":""},model:{value:t.album.updateAudioTags,callback:function(e){t.$set(t.album,"updateAudioTags",e)},expression:"album.updateAudioTags"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary",disabled:!t.moveToAlbumId},on:{click:function(e){return t.moveAlbum()}}},[t._v("Move")])],1)],1)],1)],1),t.showAlbumImage?t._e():a("v-expansion-panel",[a("v-expansion-panel-header",[t._v(" Image ")]),a("v-expansion-panel-content",[a("v-row",[a("v-col",{staticClass:"pt-5"},[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary"},on:{click:function(e){return t.findAlbumImage()}}},[t._v("Find album image")])],1)],1)],1)],1)],1)],1)],1)],1)},Ht=[],Qt={name:"EditAlbumView",props:["albumData","albumImageFound"],data(){return{active:!1,editForm:{valid:!1},artistAlbums:[],showAlbumImage:!0,album:{id:this.albumData.id,name:this.albumData.name,genre:this.albumData.genre,date:this.albumData.date,updateAudioTags:!0,artworkSrc:null},moveToAlbumId:null}},mounted(){},methods:{imageError(){this.showAlbumImage=!1},getArtistAlbums(){v.getAlbums({page:1,pageSize:100,name:this.albumNameQuery,artistId:this.albumData.artist.id}).then(t=>{this.artistAlbums=t.data.albums.filter(t=>t.id!==this.albumData.id)})},updateAlbumProperties(){this.editForm.valid&&v.updateAlbumProperties(this.album).then(t=>{ha.$emit("album-data-updated",this.album),this.active=!1})},moveAlbum(){let t={albumIdFrom:this.albumData.id,albumIdTo:this.moveToAlbumId,updateAudioTags:this.album.updateAudioTags};v.moveAlbum(t).then(t=>{this.active=!1,this.$router.push({name:"AlbumsView",query:{artistId:this.albumData.artist.id}})})},findAlbumImage(){v.getAlbumImageSrc(this.albumData.id).then(t=>{this.$emit("update:albumImageFound",!0),this.active=!1})}}},jt=Qt,Wt=Object(S["a"])(jt,Gt,Ht,!1,null,null,null),Yt=Wt.exports;V()(Wt,{VAutocomplete:Ct["a"],VBtn:F["a"],VCard:et["a"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VExpansionPanel:kt["a"],VExpansionPanelContent:Pt["a"],VExpansionPanelHeader:$t["a"],VExpansionPanels:Lt["a"],VForm:st["a"],VIcon:I["a"],VImg:w["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemAvatar:$["a"],VListItemTitle:P["d"],VRow:O["a"],VSpacer:Et["a"],VSwitch:Rt["a"],VTextField:G["a"]});var Jt={name:"AlbumSongsView",components:{SongsListView:N,EditAlbumView:Yt},props:["albumData","albumFrom"],data(){return{showAlbumImage:!0,formats:[],formatToggleBtn:null,selectedFormatIdx:null,album:this.albumData,songs:[]}},mounted(){this.findAlbumSongs(),ha.$on("album-data-updated",t=>{this.album.name=t.name,this.album.genre=t.genre,this.album.date=t.date})},methods:{findAlbumSongs(t){v.getAlbumSongs(this.$route.params.albumId,t).then(t=>{this.songs=t.data.songs,this.album||(this.album=this.songs[0].album),this.album.totalTime=this.songs.length+" songs, "+f.secondsToHHmmText(this.album.totalTimeInSeconds),0===this.formats.length&&(this.formats=[...new Set(this.songs.map(t=>t.fileExtension))])})},filterByFormat(t){this.findAlbumSongs(t)},imageError(){this.showAlbumImage=!1},findAlbumImage(){v.getAlbumImageSrc(this.album.id).then(t=>{this.showAlbumImage=!0})},playAlbum(t){ha.$emit("play-playlist",{songs:this.songs,startSongIdx:t,shuffle:!1})},playAlbumShuffled(){f.shufflePlaylist(this.songs),ha.$emit("play-playlist",{songs:this.songs,startSongIdx:0,shuffle:!0})}}},Kt=Jt,Xt=(a("c3fd"),a("a609")),Zt=Object(S["a"])(Kt,Ot,zt,!1,null,"113d663d",null),te=Zt.exports;V()(Zt,{VBtn:F["a"],VBtnToggle:Xt["a"],VCard:et["a"],VCardActions:at["a"],VCardSubtitle:at["b"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VIcon:I["a"],VImg:w["a"],VList:C["a"],VRow:O["a"],VSpacer:Et["a"]});var ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.songs.length>0?s("div",[s("v-row",[s("v-col",{staticClass:"px-0"},[s("v-card",{attrs:{align:"center",elevation:"0"}},[t.showArtistImage?s("v-dialog",{attrs:{"max-width":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-img",t._g(t._b({staticClass:"scoped-artist-img elevation-5",attrs:{contain:"",src:t.$store.getters.getResourceBaseUrl+"image/"+t.artistData.id+"?target=ARTIST"},on:{error:t.imageError}},"v-img",i,!1),a))]}}],null,!1,3645050964)},[s("v-card",{attrs:{align:"center",elevation:"5"}},[s("v-img",{staticClass:"white--text align-end",attrs:{src:t.$store.getters.getResourceBaseUrl+"image/"+t.artistData.id+"?target=ARTIST&size=LARGE"}},[s("v-card-title",[t._v(t._s(this.artistData.name))])],1)],1)],1):s("div",[s("v-img",{staticClass:"scoped-artist-img elevation-5",attrs:{src:a("5eef")}})],1),s("v-card-title",{staticClass:"text-center text-body-1",staticStyle:{display:"inherit"}},[s("v-btn",{staticClass:"text-capitalize red--text",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{artistId:t.artistData.id}}}},[t._v(t._s(t.artistData.name)+" ")])],1),s("v-card-actions",{staticStyle:{display:"inherit"}},[s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playArtist(0)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),s("span",{staticClass:"text-capitalize"},[t._v("Play")])],1),s("v-btn",{attrs:{width:"160",depressed:"",rounded:""},on:{click:function(e){return t.playArtistShuffled()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-shuffle-variant")]),s("span",{staticClass:"text-capitalize"},[t._v("Shuffle")])],1)],1),s("v-row",[s("v-col",{staticClass:"pl-6 pt-5 text-left",attrs:{md:"auto"}},[s("div",{staticClass:"text--secondary"},[t._v(" "+t._s(t.totalTime)+" ")])]),s("v-spacer"),s("v-col",{staticClass:"text-right",attrs:{md:"auto"}},[s("EditArtistView",{attrs:{"artist-data":t.artistData,"artist-image-found":t.showArtistImage},on:{close:function(t){},"update:artistImageFound":function(e){t.showArtistImage=e},"update:artist-image-found":function(e){t.showArtistImage=e}}})],1)],1),s("v-card-text",{staticClass:"px-2 pt-0"},[s("v-list",[s("SongsListView",{attrs:{"songs-data":this.songs}})],1)],1)],1)],1)],1)],1):t._e()},ae=[],se={name:"ArtistSongsView",components:{EditArtistView:Dt,SongsListView:N},props:["artistData"],data(){return{showArtistImage:!0,totalTime:"",songs:[]}},mounted(){v.getArtistSongs(this.artistData.id).then(t=>{this.songs=t.data.songs;let e=this.songs.map(t=>t.duration).reduce((t,e)=>t+e,0);this.totalTime=this.songs.length+" songs, "+f.secondsToHHmmText(e)})},methods:{imageError(){this.showArtistImage=!1}}},ie=se,ne=(a("eaeb"),Object(S["a"])(ie,ee,ae,!1,null,"cebf1736",null)),re=ne.exports;V()(ne,{VBtn:F["a"],VCard:et["a"],VCardActions:at["a"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VIcon:I["a"],VImg:w["a"],VList:C["a"],VRow:O["a"],VSpacer:Et["a"]});var oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.$store.state.playlist.currentSong?s("div",[s("v-row",[s("v-col",[s("v-card",{attrs:{align:"center",elevation:"0"}},[s("router-link",{attrs:{to:{name:"AlbumSongsView",params:{albumId:this.$store.state.playlist.currentSong.album.id}}}},[t.showAlbumImage?s("v-img",{staticClass:"elevation-5",attrs:{"max-width":"200px","max-height":"200px",contain:"",src:t.$store.getters.getResourceBaseUrl+"image/"+t.$store.state.playlist.currentSong.album.id+"?target=ALBUM"},on:{error:t.imageError}}):s("v-img",{staticClass:"elevation-5",attrs:{src:a("5eef"),"max-width":"200px","max-height":"200px"}})],1),s("v-card-title",{staticClass:"pt-2 text-h5",staticStyle:{display:"inherit"}},[s("v-row",[s("v-col",{staticClass:"text-left",attrs:{cols:"1"}},[s("v-btn",{attrs:{small:"",icon:"",elevation:"1"},on:{click:function(e){return t.updateFavoriteStatus()}}},[this.$store.state.playlist.currentSong.favorite?s("v-icon",{attrs:{color:"yellow darken-3"}},[t._v("mdi-star")]):s("v-icon",[t._v("mdi-star-outline")])],1)],1),s("v-col",{on:{click:function(e){t.replaceSongNameWithFileName=!t.replaceSongNameWithFileName}}},[t._v(" "+t._s(this.replaceSongNameWithFileName?this.$store.state.playlist.currentSong.fileName:this.$store.state.playlist.currentSong.name)+" ")]),s("v-col",{staticClass:"text-right",attrs:{cols:"1"}},[s("EditSongView",{attrs:{"song-data":this.$store.state.playlist.currentSong}})],1)],1)],1),s("v-card-subtitle",{staticClass:"pt-0 pb-1"},[s("v-btn",{staticClass:"text-capitalize text-body-1 red--text",attrs:{plain:"",height:"0",to:{name:"AlbumsView",query:{artistId:this.$store.state.playlist.currentSong.artist.id}}}},[t._v(" "+t._s(this.$store.state.playlist.currentSong.artist.name)+" ")]),s("v-row",[s("v-col",{staticClass:"pt-3 pb-0 text-left"},[s("small",[t._v("Played: "+t._s(t.$store.state.playlist.currentSong.playCount))])]),s("v-col",{staticClass:"text-right"},[s("small",[t._v(t._s(t.$store.state.playlist.currentSong.fileExtension)+" | "+t._s(t.$store.state.playlist.currentSong.audioBitRate)+" kbps | "+t._s(t.$store.state.playlist.currentSong.audioSampleRate)+" Hz")])])],1)],1),s("v-card-text",{staticClass:"px-2"},[s("v-row",{staticClass:"no-gutters"},[s("v-col",{staticClass:"px-0 no-gutters",attrs:{cols:"12"}},[s("v-slider",{attrs:{dense:"","inverse-label":"",hint:" ","persistent-hint":"","thumb-color":"black","track-color":"grey","track-fill-color":"black",min:"0","tick-size":"1",step:"0.001",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},scopedSlots:t._u([{key:"message",fn:function(){return[s("v-row",{staticClass:"no-gutters"},[s("v-col",{staticClass:"py-0 px-1 red--text text-left",attrs:{cols:"6"}},[t._v(" "+t._s(t.playlistUtils.secondsToHHmmss(t.$store.state.audio.currentTimeAsInt))+" ")]),s("v-col",{staticClass:"py-0 px-1 red--text text-right",attrs:{cols:"6"}},[t._v(" - "+t._s(t.playlistUtils.secondsToHHmmss(t.$store.state.audio.duration-t.$store.state.audio.currentTimeAsInt))+" ")])],1)]},proxy:!0}],null,!1,3221125380),model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)],1)],1),s("v-card-actions",{staticClass:"pt-0",staticStyle:{display:"inherit"}},[s("v-row",[s("v-col",{staticClass:"pt-0"},[s("v-btn",{staticClass:"mr-10",attrs:{"x-small":"",fab:"",elevation:"3"},on:{click:function(e){return t.setRepeat()}}},[s("v-icon",{attrs:{color:t.repeatIcon.color}},[t._v(t._s(t.repeatIcon.name))])],1),s("v-btn",{attrs:{small:"",fab:"",elevation:"3",disabled:!this.$store.getters.hasPrevSong},on:{click:function(e){return t.playPrev()}}},[s("v-icon",{attrs:{large:""}},[t._v("mdi-skip-backward-outline")])],1),this.$store.state.audio.isPlaying?s("v-btn",{staticClass:"mx-5",attrs:{fab:""},on:{click:function(e){return t.pause()}}},[s("v-icon",{attrs:{large:""}},[t._v("mdi-pause")])],1):s("v-btn",{staticClass:"mx-5",attrs:{fab:""},on:{click:t.resumePlay}},[s("v-icon",{staticClass:"pl-1",attrs:{large:""}},[t._v("mdi-play-outline")])],1),s("v-btn",{attrs:{fab:"",small:"",elevation:"3",disabled:!this.$store.getters.hasNextSong},on:{click:t.playNext}},[s("v-icon",{attrs:{large:""}},[t._v("mdi-fast-forward-outline")])],1),s("v-btn",{staticClass:"ml-10",attrs:{"x-small":"",fab:"",elevation:"3"},on:{click:function(e){return t.fastForward()}}},[s("v-icon",[t._v("mdi-fast-forward-10")])],1)],1)],1)],1),s("v-row",[s("v-col",{staticClass:"pb-2 text-left text-caption text-truncate"},[s("small",[s("i",[t._v("Just played: ")])]),this.$store.getters.getPrevSong?s("p",{staticClass:"grey--text"},[t._v(t._s(this.$store.getters.getPrevSong.name))]):s("p",{staticClass:"grey--text"},[t._v(" - - - ")])]),s("v-col",{staticClass:"pb-2 text-right text-caption"},[s("small",[s("i",[t._v("Playing next: ")])]),this.$store.getters.getNextSong?s("p",{staticClass:"grey--text"},[t._v(t._s(this.$store.getters.getNextSong.name))]):s("p",{staticClass:"grey--text"},[t._v(" - - - ")])])],1),s("v-divider")],1)],1)],1)],1):t._e()},le=[],ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:""}},[t._v("mdi-file-document-edit-outline")])],1)]}}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Edit Song")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.active=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[a("v-expansion-panels",{attrs:{focusable:"",accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v(" Properties ")]),a("v-expansion-panel-content",[a("v-form",{staticClass:"pt-5",model:{value:t.editForm.valid,callback:function(e){t.$set(t.editForm,"valid",e)},expression:"editForm.valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{dense:"",label:"Name","persistent-hint":"",hint:t.songData.name},model:{value:t.song.name,callback:function(e){t.$set(t.song,"name",e)},expression:"song.name"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{dense:"",label:"Track ID","persistent-hint":"",hint:t.songData.trackId},model:{value:t.song.trackId,callback:function(e){t.$set(t.song,"trackId",e)},expression:"song.trackId"}})],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{clearable:"",rows:"1","clear-icon":"mdi-close-circle",label:"Comment"},model:{value:t.song.comment,callback:function(e){t.$set(t.song,"comment",e)},expression:"song.comment"}})],1)],1),a("v-row",[a("v-col",[a("v-textarea",{attrs:{clearable:"",rows:"3","clear-icon":"mdi-close-circle",label:"Lyrics"},model:{value:t.song.lyrics,callback:function(e){t.$set(t.song,"lyrics",e)},expression:"song.lyrics"}})],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary"},on:{click:function(e){return t.updateSongProperties()}}},[t._v(" Save properties ")])],1)],1)],1)],1)],1),a("v-expansion-panel",{on:{change:function(e){return t.getArtists()}}},[a("v-expansion-panel-header",[t._v(" Miscellaneous ")]),a("v-expansion-panel-content",[a("v-row",{staticClass:"pl-3 pt-5",attrs:{align:"center"}},[a("v-autocomplete",{staticClass:"pt-5 pr-3",attrs:{dense:"",label:"Move to existing artist",clearable:"","persistent-hint":"",hint:t.songData.artist.name,"item-text":"name","item-value":"id",items:this.artists},on:{change:t.getArtistAlbums},model:{value:t.moveToArtistId,callback:function(e){t.moveToArtistId=e},expression:"moveToArtistId"}})],1),this.moveToArtistId?a("v-row",{staticClass:"pt-5",attrs:{align:"center"}},[a("v-autocomplete",{staticClass:"pt-5 pr-3 text-left",attrs:{dense:"",label:"Move to existing album",clearable:"","item-text":"name","item-value":"id",items:t.artistAlbums},model:{value:t.moveToAlbumId,callback:function(e){t.moveToAlbumId=e},expression:"moveToAlbumId"}})],1):t._e(),a("v-row",[a("v-list-item",[a("v-list-item-title",{staticClass:"text-left"},[t._v("Update audio file tags")]),a("v-list-item-action",[a("v-switch",{attrs:{dense:"",color:"info","hide-details":""},model:{value:t.song.updateAudioTags,callback:function(e){t.$set(t.song,"updateAudioTags",e)},expression:"song.updateAudioTags"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticClass:"text-capitalize",attrs:{small:"",depressed:"",block:"",color:"primary",disabled:!t.moveToAlbumId},on:{click:function(e){return t.moveSong()}}},[t._v("Move")])],1)],1)],1)],1)],1)],1)],1)],1)},ce=[],de={name:"EditPlayerSongView",props:["songData"],data(){return{active:!1,editForm:{valid:!1},artists:[],artistAlbums:[],moveToArtistId:null,moveToAlbumId:null,song:{id:this.songData.id,name:this.songData.name,comment:this.songData.comment,lyrics:this.songData.lyrics,trackId:this.songData.trackId,updateAudioTags:!0}}},methods:{getArtists(){v.getAllBasicArtists().then(t=>{this.artists=t.data.artists.filter(t=>t.id!==this.songData.artist.id)})},getArtistAlbums(){v.getAlbums({page:1,pageSize:100,name:this.albumNameQuery,artistId:this.moveToArtistId}).then(t=>{this.artistAlbums=t.data.albums})},updateSongProperties(){this.editForm.valid&&v.updateSong(this.song).then(t=>{this.$store.commit("updateCurrentSong",t.data),this.active=!1})},moveSong(){let t={songId:this.songData.id,albumIdTo:this.moveToAlbumId,updateAudioTags:this.song.updateAudioTags};v.moveSong(t).then(t=>{this.active=!1,this.$router.push({name:"AlbumSongsView",params:{albumId:this.moveToAlbumId}})})}}},me=de,pe=a("a844"),ge=Object(S["a"])(me,ue,ce,!1,null,null,null),ve=ge.exports;V()(ge,{VAutocomplete:Ct["a"],VBtn:F["a"],VCard:et["a"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDialog:Tt["a"],VExpansionPanel:kt["a"],VExpansionPanelContent:Pt["a"],VExpansionPanelHeader:$t["a"],VExpansionPanels:Lt["a"],VForm:st["a"],VIcon:I["a"],VListItem:T["a"],VListItemAction:k["a"],VListItemTitle:P["d"],VRow:O["a"],VSpacer:Et["a"],VSwitch:Rt["a"],VTextField:G["a"],VTextarea:pe["a"]});var he={name:"PlayerView",components:{EditSongView:ve},props:["playerSong"],data(){return{playlistUtils:f,showAlbumImage:!0,slider:{audioTime:0,audioVolume:.5},repeatIcon:{name:"mdi-repeat",color:""},replaceSongNameWithFileName:!1}},mounted(){this.$store.commit("setShowMiniPlayer",!1),this.$store.state.playlist.currentSong||this.playerSong||v.getSong(this.$route.params.songId).then(t=>{let e=[t.data];ha.$emit("play-playlist",{songs:e,startSongIdx:0,shuffle:!1})})},destroyed(){this.$store.commit("setShowMiniPlayer",!0)},methods:{changeAudioCurrentTime(t){ha.$emit("toolbar-player-current-time-changed",t||this.slider.audioTime)},playNext(){ha.$emit("play-next-song")},playPrev(){ha.$emit("play-prev-song")},resumePlay(){ha.$emit("player-resume-play")},pause(){ha.$emit("player-pause")},rewind(){this.changeAudioCurrentTime(this.slider.audioTime-10)},fastForward(){this.changeAudioCurrentTime(this.slider.audioTime+10)},setRepeat(){"none"===this.$store.state.playlist.repeat?(this.$store.commit("setRepeatMode","all"),this.repeatIcon={name:"mdi-repeat",color:"red"}):"all"===this.$store.state.playlist.repeat?(this.$store.commit("setRepeatMode","once"),this.repeatIcon={name:"mdi-repeat-once",color:"red"}):(this.$store.commit("setRepeatMode","none"),this.repeatIcon={name:"mdi-repeat",color:""})},updateFavoriteStatus(){v.setSongFavoriteStatus(this.$store.state.playlist.currentSong).then(t=>{this.$store.commit("setCurrentSongFavoriteStatus")})},openAlbum(){this.$router.push({name:"AlbumSongsView",params:{albumId:this.$store.state.playlist.currentSong.album.id}})},imageError(){this.showAlbumImage=!1}}},be=he,fe=a("ba0d"),ye=Object(S["a"])(be,oe,le,!1,null,null,null),xe=ye.exports;V()(ye,{VBtn:F["a"],VCard:et["a"],VCardActions:at["a"],VCardSubtitle:at["b"],VCardText:at["c"],VCardTitle:at["d"],VCol:q["a"],VDivider:_["a"],VIcon:I["a"],VImg:w["a"],VRow:O["a"],VSlider:fe["a"]});var Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",[a("v-row",[a("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[a("v-navigation-drawer",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h5"},[t._v(" Preferences ")]),a("v-list-item-subtitle",[t._v(" Manage playqd settings ")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedSettingsIdx,callback:function(e){t.selectedSettingsIdx=e},expression:"selectedSettingsIdx"}},t._l(t.items,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.openSettingsView(e.id)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1)],1)],1),a("v-col",[a("router-view")],1),a("v-col",{attrs:{cols:"1",md:"auto"}},[a("v-btn",{attrs:{icon:"",to:{name:"LibraryView"}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1)],1)],1)},Ae=[],Ve={name:"PreferencesView",data(){return{selectedSettingsIdx:0,items:[{id:"LibrarySettingsView",title:"Library"}]}},methods:{openSettingsView(t){this.$router.push({name:t})}}},_e=Ve,Ie=a("f774"),we=Object(S["a"])(_e,Se,Ae,!1,null,"29d8dff5",null),Ce=we.exports;V()(we,{VBtn:F["a"],VCard:et["a"],VCardText:at["c"],VCol:q["a"],VDivider:_["a"],VIcon:I["a"],VList:C["a"],VListItem:T["a"],VListItemContent:P["b"],VListItemGroup:L["a"],VListItemSubtitle:P["c"],VListItemTitle:P["d"],VNavigationDrawer:Ie["a"],VRow:O["a"]});var Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"text-left",attrs:{elevation:"0"}},[a("v-card-title",[t._v("Library settings")]),a("v-card-subtitle",[t._v("Manage library settings here")]),a("v-divider"),a("v-card-text",[a("v-list",[a("v-list-item",[a("v-list-item-content",{staticClass:"pl-2"},[a("v-switch",{attrs:{dense:"",color:"info","hide-details":"",label:"Rescan folders at startup"},model:{value:t.settings.rescanAtStartup,callback:function(e){t.$set(t.settings,"rescanAtStartup",e)},expression:"settings.rescanAtStartup"}})],1)],1),a("v-list-item",[a("v-list-item-content",{staticClass:"pl-2"},[a("v-switch",{attrs:{dense:"",color:"info","hide-details":"",label:"Drop database before scan"},model:{value:t.settings.deleteBeforeScan,callback:function(e){t.$set(t.settings,"deleteBeforeScan",e)},expression:"settings.deleteBeforeScan"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",text:"",outlined:""},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-content-save-outline")]),t._v(" Save ")],1),a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",text:"",outlined:""},on:{click:t.rescan}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-refresh")]),t._v(" Rescan ")],1)],1)],1)},ke=[],Pe={name:"LibrarySettingsView",data(){return{settings:{rescanAtStartup:!1,deleteBeforeScan:!1}}},mounted(){v.getLibrarySettings().then(t=>{this.settings=t.data})},methods:{save(){v.saveLibrarySettings(this.settings).then(t=>{})},rescan(){v.rescanLibrary(this.settings).then(t=>{})}}},$e=Pe,Le=Object(S["a"])($e,Te,ke,!1,null,"446aa736",null),Ee=Le.exports;V()(Le,{VBtn:F["a"],VCard:et["a"],VCardActions:at["a"],VCardSubtitle:at["b"],VCardText:at["c"],VCardTitle:at["d"],VDivider:_["a"],VIcon:I["a"],VList:C["a"],VListItem:T["a"],VListItemContent:P["b"],VSwitch:Rt["a"]}),s["a"].use(n["a"]);const Re=[{path:"/",alias:["/home","/index.html"],name:"Home",component:J,meta:{title:"Home"}},{path:"/account/login",name:"LoginView",component:rt,meta:{title:"Login"}},{path:"/library",name:"LibraryView",component:J,meta:{title:"Library"}},{path:"/library/artists",name:"ArtistsView",component:mt,meta:{title:"Artists"}},{path:"/library/genres",name:"GenresView",component:ft,meta:{title:"Genres"}},{path:"/library/songs",name:"LibrarySongsView",component:Q,meta:{title:"Library songs"}},{path:"/library/albums",name:"AlbumsView",component:Ut,props:t=>({artistId:t.query.artistId,genre:t.query.genre}),meta:{title:"Albums"}},{path:"/library/artists/albums/:albumId",name:"AlbumSongsView",component:te,meta:{title:"Album songs"},props:!0},{path:"/library/artists/:artistId",name:"ArtistSongsView",component:re,meta:{title:"Album songs"},props:!0},{path:"/library/player/:songId",name:"PlayerView",component:xe,meta:{title:"Player"},props:!0},{path:"/preferences",name:"PreferencesView",components:{preferencesRoute:Ce},meta:{title:"Preferences"},children:[{path:"library",name:"LibrarySettingsView",component:Ee}]}],Ne=new n["a"]({routes:Re});var De=Ne,Be=a("342d"),Fe=a.n(Be),qe=(a("5363"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"grey lighten-4"},[a("NavToolbarView"),a("v-main",[a("router-view",{attrs:{name:"preferencesRoute"}}),a("v-container",[a("Audio"),a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{md:"6","offset-md":"3"}},[a("router-view")],1)],1)],1)],1),a("transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.miniPlayer.show,expression:"this.$store.state.miniPlayer.show"}]},[a("MiniPlayerView")],1)])],1)}),Me=[],Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("audio",{attrs:{id:"audio-player",autoplay:""},on:{loadedmetadata:function(e){return t.onAudioLoadedMetadata()},timeupdate:function(e){return t.onAudioTimeUpdate()},ended:function(e){return t.onAudioEnded()},play:function(e){return t.onAudioPlay()},pause:function(e){return t.onAudioPause()}}},[a("source",{attrs:{id:"audio-player-source",src:""}})])])},Oe=[],ze={name:"Audio",mounted(){this.audioDOMElement=document.getElementById("audio-player"),this.audioSourceDOMElement=document.getElementById("audio-player-source"),this.audioDOMElement.volume=.5},created(){ha.$on("toolbar-player-current-time-changed",t=>{this.$store.commit("setAudioCurrentTime",t),this.audioDOMElement.currentTime=t}),ha.$on("toolbar-player-current-volume-changed",t=>{this.$store.commit("setAudioVolume",t),this.audioDOMElement.volume=t}),ha.$on("player-pause",()=>{this.pause()}),ha.$on("player-resume-play",()=>{this.play()}),ha.$on("play-next-song",()=>{this.loadNextSong()}),ha.$on("play-prev-song",()=>{this.loadPrevSong()}),ha.$on("play-playlist",t=>{this.loadPlaylist(t.songs,t.startSongIdx,t.shuffle)})},methods:{onAudioPlay(){this.$store.commit("setAudioIsPlaying",!0),ha.$emit("audio-is-playing")},onAudioPause(){this.$store.commit("setAudioIsPlaying",!1)},onAudioEnded(){ha.$emit("playback-song-ended",this.$store.state.playlist.currentSong.id),this.loadNextSong()},onAudioTimeUpdate(){this.$store.commit("setAudioCurrentTime",this.audioDOMElement.currentTime)},onAudioLoadedMetadata(){this.$store.commit("setAudioProperties",this.getMetadata())},loadPlaylist(t,e,a){this.$store.commit("setPlaylist",{playlistId:t[e].album.id,shuffle:a,songs:t,startSongIdx:e}),this.loadAudio()},loadNextSong(){this.$store.getters.hasNextSong&&(this.$store.commit("setCurrentSongToNext"),this.loadAudio())},loadPrevSong(){this.$store.getters.hasPrevSong&&(this.$store.commit("setCurrentSongToPrev"),this.loadAudio())},loadAudio(){let t=this.$store.state.playlist.currentSong;this.audioSourceDOMElement.src=v.getSongSrcUrl(t.id),this.audioDOMElement.load(),ha.$emit("song-is-ready-to-play")},play(){this.audioDOMElement.play()},pause(){this.audioDOMElement.pause()},getMetadata(){return{paused:this.audioDOMElement.paused,volume:this.audioDOMElement.volume,currentTime:this.audioDOMElement.currentTime,duration:parseInt(this.audioDOMElement.duration,10)}}}},Ge=ze,He=Object(S["a"])(Ge,Ue,Oe,!1,null,null,null),Qe=He.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{attrs:{app:"",dense:"",color:"blue-grey lighten-3",fixed:"",flat:"",elevation:"0"}},["LibraryView"===this.$route.name?a("v-app-bar-nav-icon",{on:{click:function(e){t.navDrawer=!0}}}):a("div",{staticClass:"pl-0 text-left"},[a("v-btn",{attrs:{plain:""},on:{click:function(e){return t.routerGoBack()}}},[a("v-icon",[t._v("mdi-arrow-left")])],1)],1),a("v-toolbar-title",[a("v-btn",{staticClass:"text-capitalize",attrs:{plain:"",color:"white",disabled:"LibraryView"===this.$route.name},on:{click:function(e){return t.routerGoHome()}}},[t._v("Playqd")])],1),a("v-spacer"),a("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[a("v-icon",[t._v("mdi-account")])],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{to:{name:"LibrarySettingsView"}}},[a("v-list-item-title",[t._v("Preferences")]),a("v-list-item-icon",[a("v-icon",{attrs:{small:""}},[t._v("mdi-cog-outline")])],1)],1)],1)],1)],1)],1)},We=[],Ye={name:"NavToolbarView",data(){return{navDrawer:!1,group:null}},mounted(){ha.$on("playback-song-ended",t=>{v.updatePlayedSongCount(t)})},methods:{routerGoHome(){"LibraryView"!==this.$route.name&&this.$router.push({name:"LibraryView"})},routerGoBack(){this.$router.back()}}},Je=Ye,Ke=a("40dc"),Xe=a("5bc1"),Ze=a("2a7f"),ta=Object(S["a"])(Je,je,We,!1,null,null,null),ea=ta.exports;V()(ta,{VAppBar:Ke["a"],VAppBarNavIcon:Xe["a"],VBtn:F["a"],VIcon:I["a"],VList:C["a"],VListItem:T["a"],VListItemIcon:E["a"],VListItemTitle:P["d"],VMenu:M["a"],VSpacer:Et["a"],VToolbarTitle:Ze["a"]});var aa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.$store.state.playlist.currentSong?s("div",[s("v-bottom-navigation",{staticClass:"hidden-sm-and-down pl-2",attrs:{app:"",fixed:"",horizontal:"",height:"60"}},[s("v-row",[s("v-col",{attrs:{md:"auto"}},[t.showAlbumImage?s("v-img",{staticClass:"mr-1 mt-1 elevation-1",attrs:{"max-height":"50px","max-width":"50px",src:t.$store.getters.getResourceBaseUrl+"image/"+t.$store.state.playlist.currentSong.album.id+"?target=ALBUM"},on:{error:t.imageError}}):s("v-img",{staticClass:"mr-1 mt-1 elevation-1",attrs:{"max-height":"50px","max-width":"50px",src:a("5eef")}})],1),s("v-col",{staticClass:"text-left"},[s("v-row",[s("v-col",{staticClass:"pl-5 text-start d-inline-block"},[s("a",{staticClass:"text-body-2 red--text",on:{click:function(e){return t.openPlayerView()}}},[t._v(t._s(this.$store.state.playlist.currentSong.artist.name+" - "+this.$store.state.playlist.currentSong.name))])]),s("v-col",{staticClass:"text-right text-caption grey--text",attrs:{md:"auto"}},[t._v(" "+t._s(t.$store.state.playlist.currentSong.fileExtension)+" | "+t._s(t.$store.state.playlist.currentSong.audioBitRate)+" kbps | "+t._s(t.$store.state.playlist.currentSong.audioSampleRate)+" Hz ")]),s("v-col",{staticClass:"pr-5 text-right text-body-2 red--text",attrs:{md:"auto"}},[t._v(" "+t._s(t.playlistUtils.secondsToHHmmss(t.$store.state.audio.currentTimeAsInt)+" / "+t.playlistUtils.secondsToHHmmss(t.$store.state.audio.duration))+" ")])],1),s("v-slider",{attrs:{dense:"","inverse-label":"","hide-details":"","thumb-color":"black","track-color":"grey","track-fill-color":"black",min:"0","tick-size":"1",step:"0.001",max:this.$store.state.audio.duration},on:{change:function(e){return t.changeAudioCurrentTime()}},model:{value:t.slider.audioTime=t.$store.state.audio.currentTime,callback:function(e){t.$set(t.slider.audioTime=t.$store.state.audio,"currentTime",e)},expression:"slider.audioTime = $store.state.audio.currentTime"}})],1)],1),s("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.playPrev()}}},[s("v-icon",[t._v("mdi-rewind")])],1),this.$store.state.audio.isPlaying?s("v-btn",{on:{click:function(e){return t.pause()}}},[s("v-icon",{attrs:{"x-large":""}},[t._v("mdi-pause")])],1):s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.resumePlay()}}},[s("v-icon",{attrs:{"x-large":""}},[t._v("mdi-play")])],1),s("v-btn",{attrs:{small:""},on:{click:function(e){return t.playNext()}}},[s("v-icon",[t._v("mdi-fast-forward")])],1),s("v-btn",{attrs:{icon:"","x-small":""}},[s("v-icon",{attrs:{color:t.$store.state.playlist.shuffle?"red":"grey darken-1"}},[t._v("mdi-shuffle-variant")])],1),s("v-btn",{attrs:{icon:"","x-small":""}},[s("v-icon",[t._v("mdi-repeat")])],1),s("v-divider",{attrs:{vertical:""}}),s("v-menu",{attrs:{top:"","close-on-content-click":!1,"offset-y":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"hidden-sm-and-down",attrs:{icon:""}},"v-btn",i,!1),a),[s("v-icon",{attrs:{color:t.volumeIcon.color}},[t._v(t._s(t.volumeIcon.name))])],1)]}}],null,!1,3339467886)},[s("v-list",[s("v-list-item",[s("v-list-item-content",[s("v-slider",{attrs:{vertical:"",min:"0.0",max:"1.0",step:"0.01"},on:{change:function(e){return t.changeAudioCurrentVolume()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-icon",{on:{click:function(e){return t.mute()}}},[t._v("mdi-volume-mute")])]},proxy:!0},{key:"append",fn:function(){return[s("v-icon",[t._v("mdi-volume-high")])]},proxy:!0}],null,!1,2181639092),model:{value:t.slider.audioVolume=t.$store.state.audio.volume,callback:function(e){t.$set(t.slider.audioVolume=t.$store.state.audio,"volume",e)},expression:"slider.audioVolume = $store.state.audio.volume"}})],1)],1)],1)],1),s("v-btn",{staticClass:"hidden-sm-and-down",attrs:{icon:""},on:{click:function(e){return t.updateFavoriteStatus()}}},[this.$store.state.playlist.currentSong.favorite?s("v-icon",{attrs:{color:"yellow darken-3"}},[t._v("mdi-star")]):s("v-icon",[t._v("mdi-star-outline")])],1)],1),s("v-app-bar",{staticClass:"pr-5 hidden-md-and-up",attrs:{app:"",fixed:"",bottom:"",flat:"",height:"60",color:"grey lighten-3"}},[t.showAlbumImage?s("v-img",{staticClass:"mr-1",attrs:{"max-height":"50px","max-width":"50px",src:t.$store.getters.getResourceBaseUrl+"image/"+t.$store.state.playlist.currentSong.album.id+"?target=ALBUM"},on:{error:t.imageError}}):s("v-img",{staticClass:"mr-1",attrs:{"max-height":"50px","max-width":"50px",src:a("5eef")}}),s("v-list-item",{staticClass:"pl-1 text-left text-truncate",on:{click:function(e){return t.openPlayerView()}}},[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(this.$store.state.playlist.currentSong.name))]),s("v-list-item-subtitle",[t._v(t._s(this.$store.state.playlist.currentSong.artist.name))])],1)],1),s("v-spacer"),this.$store.state.audio.isPlaying?s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.pause()}}},[s("v-icon",{attrs:{"x-large":""}},[t._v("mdi-pause")])],1):s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.resumePlay()}}},[s("v-icon",{attrs:{"x-large":""}},[t._v("mdi-play")])],1),s("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.playNext()}}},[s("v-icon",[t._v("mdi-fast-forward")])],1)],1)],1):s("div")},sa=[],ia={name:"MiniPlayerView",data(){return{playlistUtils:f,showAlbumImage:!0,slider:{audioTime:0,audioVolume:.5},volumeIcon:{color:"grey darken-1",name:"mdi-volume-high"}}},mounted(){ha.$on("audio-is-playing",()=>{this.showAlbumImage=!0})},methods:{changeAudioCurrentTime(){ha.$emit("toolbar-player-current-time-changed",this.slider.audioTime)},playNext(){ha.$emit("play-next-song")},playPrev(){ha.$emit("play-prev-song")},resumePlay(){ha.$emit("player-resume-play")},pause(){ha.$emit("player-pause")},mute(){this.slider.audioVolume=0,this.volumeIcon.color="red",this.volumeIcon.name="mdi-volume-off",this.changeAudioCurrentVolume()},changeAudioCurrentVolume(){this.slider.audioVolume>0&&(this.volumeIcon.color="grey darken-1",this.volumeIcon.name="mdi-volume-high"),ha.$emit("toolbar-player-current-volume-changed",this.slider.audioVolume)},updateFavoriteStatus(){v.setSongFavoriteStatus(this.$store.state.playlist.currentSong).then(t=>{this.$store.commit("setCurrentSongFavoriteStatus")})},openPlayerView(){this.$router.push({name:"PlayerView",params:{songId:this.$store.state.playlist.currentSong.id,playerSong:this.$store.state.playlist.currentSong}})},imageError(){this.showAlbumImage=!1}}},na=ia,ra=a("b81c"),oa=Object(S["a"])(na,aa,sa,!1,null,null,null),la=oa.exports;V()(oa,{VAppBar:Ke["a"],VBottomNavigation:ra["a"],VBtn:F["a"],VCol:q["a"],VDivider:_["a"],VIcon:I["a"],VImg:w["a"],VList:C["a"],VListItem:T["a"],VListItemContent:P["b"],VListItemSubtitle:P["c"],VListItemTitle:P["d"],VMenu:M["a"],VRow:O["a"],VSlider:fe["a"],VSpacer:Et["a"]});var ua={name:"App",store:p,components:{Audio:Qe,NavToolbarView:ea,MiniPlayerView:la},mounted(){null===this.$store.state.authToken&&this.$router.push({name:"LoginView"}),ha.$on("song-is-ready-to-play",()=>{this.appTitle.inner=this.$store.state.playlist.currentSong.artist.name,this.appTitle.complement=this.$store.state.playlist.currentSong.name,this.$emit("updateHead");let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=this.$store.getters.getResourceBaseUrl+"image/"+this.$store.state.playlist.currentSong.album.id+"?target=ALBUM"})},data(){return{appTitle:{inner:"Playqd",complement:"local music player"}}},head:{title(){return{complement:this.appTitle.complement,inner:this.appTitle.inner,separator:" - "}}}},ca=ua,da=a("7496"),ma=a("a523"),pa=a("f6c4"),ga=Object(S["a"])(ca,qe,Me,!1,null,null,null),va=ga.exports;V()(ga,{VApp:da["a"],VCol:q["a"],VContainer:ma["a"],VMain:pa["a"],VRow:O["a"]});a("a766");s["a"].config.productionTip=!1,s["a"].use(Fe.a),s["a"].use(i["a"]);const ha=new s["a"];new s["a"]({router:De,vuetify:new i["a"]({icons:{iconfont:"mdi"}}),render:t=>t(va)}).$mount("#app")},"5eef":function(t,e,a){t.exports=a.p+"img/default-album-cover.ba53da3b.png"},8447:function(t,e,a){},a766:function(t,e,a){},c3fd:function(t,e,a){"use strict";a("8447")},d190:function(t,e,a){},eaeb:function(t,e,a){"use strict";a("d190")}});
//# sourceMappingURL=app.0093c2f3.js.map